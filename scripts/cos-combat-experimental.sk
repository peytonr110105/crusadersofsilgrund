#Grab entity stats and return the value
#If something breaks, return -1
function getEntityStat(ENT: entity, STAT: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {t_%{_STAT}%.%{_ENT}%} is set:
		clear {_CID}
		return {t_%{_STAT}%.%{_ENT}%}
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		return {%{_STAT}%.%{_ENT}%}
	#Is NPC
	else if {_CID} is set:
		return {npc_%{_STAT}%.%{_CID}%}
		clear {_CID}
	else:
		clear {_CID}
		return -1
	
#Returns the combined stat total specified
function getEntityStatTotal(ENT: entity, STAT: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	if {_STAT} is "MAG":
		set {_STAT} to "RES"
	#Is Monster
	if {t_%{_STAT}%.%{_ENT}%} is set:
		clear {_CID}
		return ({t_%{_STAT}%.%{_ENT}%} + {t_%{_STAT}%buff.%{_ENT}%})
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		return ({%{_STAT}%.%{_ENT}%} + {%{_STAT}%buff.%{_ENT}%})
	#Is NPC
	else if {_CID} is set:
		return ({npc_%{_STAT}%.%{_CID}%} + {npc_%{_STAT}%buff.%{_CID}%})
		clear {_CID}
	else:
		clear {_CID}
		return -1
	
#Returns the specified buffs for a given entity	
function getEntityStatBuff(ENT: entity, STAT: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {t_%{_STAT}%.%{_ENT}%} is set:
		clear {_CID}
		return {t_%{_STAT}%buff.%{_ENT}%}
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		return {%{_STAT}%buff.%{_ENT}%}
	#Is NPC
	else if {_CID} is set:
		return {npc_%{_STAT}%buff.%{_CID}%}
		clear {_CID}
	else:
		clear {_CID}
		return -1
		
#Adds the specified value to a given entity's given stat
#Return 0 if change succeeded, -1 if failed
function changeEntityStatBuff(ENT: entity, STAT: text, CHANGE: number) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Treat "MAG" as "RES"
	if {_STAT} is "MAG":
		set {_STAT} to "RES"
	#Is Monster
	if {t_%{_STAT}%.%{_ENT}%} is set:
		clear {_CID}
		add {_CHANGE} to {t_%{_STAT}%buff.%{_ENT}%}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		add {_CHANGE} to {%{_STAT}%buff.%{_ENT}%}
		return 0
	#Is NPC
	else if {_CID} is set:
		add {_CHANGE} to {npc_%{_STAT}%buff.%{_CID}%}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1
		
#Increase/decrease the specified variable by a particular amount
function changeEntityVariableByName(ENT: entity, VAR: text, VAL: number) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		add {_VAL} to {t_%{_VAR}%.%{_ENT}%}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		add {_VAL} to {%{_VAR}%.%{_ENT}%}
		return 0
	#Is NPC
	else if {_CID} is set:
		add {_VAL} to {npc_%{_VAR}%.%{_CID}%}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1

#More powerful variable set tool, be careful with this one
function setEntityVariableByName(ENT: entity, VAR: text, VAL: number) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		set {t_%{_VAR}%.%{_ENT}%} to {_VAL}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		set {%{_VAR}%.%{_ENT}%} to {_VAL}
		return 0
	#Is NPC
	else if {_CID} is set:
		set {npc_%{_VAR}%.%{_CID}%} to {_VAL}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1
		
#Allows you to set a specified variable to text
function setEntityVariableAsTextByName(ENT: entity, VAR: text, TXT: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		set {t_%{_VAR}%.%{_ENT}%} to {_TXT}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		set {%{_VAR}%.%{_ENT}%} to {_TXT}
		return 0
	#Is NPC
	else if {_CID} is set:
		set {npc_%{_VAR}%.%{_CID}%} to {_TXT}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1
		
#Allows you to set a specified index of an array variable to text
function setEntityArrayIndexAsTextByName(ENT: entity, ARR: text, IND: text, TXT: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		set {t_%{_ARR}%.%{_ENT}%::%{_IND}%} to {_TXT}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		set {%{_ARR}%.%{_ENT}%::%{_IND}%} to {_TXT}
		return 0
	#Is NPC
	else if {_CID} is set:
		set {npc_%{_ARR}%.%{_CID}%::%{_IND}%} to {_TXT}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1
		
#Allows you to add/subtract a particular value from a specified index in an array.
function changeEntityArrayIndexByName(ENT: entity, ARR: text, IND: text, VAL: number) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		add {_VAL} to {t_%{_ARR}%.%{_ENT}%::%{_IND}%}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		add {_VAL} to {%{_ARR}%.%{_ENT}%::%{_IND}%}
		return 0
	#Is NPC
	else if {_CID} is set:
		add {_VAL} to {npc_%{_ARR}%.%{_CID}%::%{_IND}%}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1
	
#Clear the specified variable
#Returns 0 if successful, otherwise returns -1
function clearEntityVariableByName(ENT: entity,VAR: text) :: number:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {_ENT} is monster:
		clear {_CID}
		clear {t_%{_VAR}%.%{_ENT}%}
		return 0
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		clear {%{_VAR}%.%{_ENT}%}
		return 0
	#Is NPC
	else if {_CID} is set:
		clear {npc_%{_VAR}%.%{_CID}%}
		clear {_CID}
		return 0
	else:
		clear {_CID}
		return -1	
	
#Grab entity variable and return the value
#If something breaks, return -1
#If variable is not set, return -2
function getEntityVarByName(ENT: entity, STAT: text) :: text:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {t_str.%{_ENT}%} is set:
		clear {_CID}
		if {t_%{_STAT}%.%{_ENT}%} is set:
			return "%{t_%{_STAT}%.%{_ENT}%}%"
		else:
			return "-2"
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		if {%{_STAT}%.%{_ENT}%} is set:
			return "%{%{_STAT}%.%{_ENT}%}%"
		else:
			return "-2"
	#Is NPC
	else if {_CID} is set:
		if {npc_%{_STAT}%.%{_CID}%} is set:
			clear {_CID}
			return "%{npc_%{_STAT}%.%{_CID}%}%"
		else:
			clear {_CID}
			return "-2"
	else:
		clear {_CID}
		return "-1"
		
#Grab a particular index value from an entity's data (arrays)
#If something breaks, return -1
function getEntityArrayValueByName(ENT: entity, ARR: text,IND: text) :: text:
	#Find citizen id of entity for compare checks
	set {_CID} to citizen id of {_ENT}
	#Is Monster
	if {t_%{_ARR}%.%{_ENT}%::%{_IND}%} is set:
		clear {_CID}
		return "%{t_%{_ARR}%.%{_ENT}%::%{_IND}%}%"
	#Is Player
	else if {_CID} is not set:
		clear {_CID}
		return "%{%{_ARR}%.%{_ENT}%::%{_IND}%}%"
	#Is NPC
	else if {_CID} is set:
		return "%{npc_%{_STAT}%.%{_CID}%::%{_IND}%}%"
		clear {_CID}
	else:
		clear {_CID}
		return "-1"
		
#Determines if the player's held item(s) has a particular skill equipped.
#0 = Current Weapon
#1 = Current Offhand Weapon
#2 = Both Weapons
#Returns 1 if skill was found, returns 2 if skill was found on both items, otherwise returns 0
function getEntitySkillsInHand(ENT: entity, SKL: text, EQUIP: number,LINE: number) :: number:
	if {_EQUIP} is 0:
		if line {_LINE} of the lore of {_ENT}'s tool contains {_SKL}:
			return 1
		else:
			return 0
	else if {_EQUIP} is 1:
		if line {_LINE} of the lore of {_ENT}'s offhand tool contains {_SKL}:
			return 1
		else:
			return 0
	else if {_EQUIP} is 2:
		if line {_LINE} of the lore of {_ENT}'s tool contains {_SKL}:
			if line {_LINE} of the lore of {_ENT}'s offhand tool contains {_SKL}:
				return 2
			else:
				return 1
		else if line {_LINE} of the lore of {_ENT}'s offhand tool contains {_SKL}:
			return 1
		else:
			return 0
	else:
		return 0
		
#Calculate if a special skill should activate given a set of parameters
#Returns 1 if the special activates, otherwise returns 0
function specialCheck(ENT: entity, SKL: number, SKLBUFF: number, PCT: number, CAP: number) :: number:
	set {_odds} to floor((({_SKL} + {_SKLBUFF}) * {_PCT}) ^ 0.95)
	if {_odds} is more than {_CAP}:
		set {_odds} to {_CAP}
	if getEntityVarByName({_ENT},"hasAdrenalineBuff") is "true":
		add 10 to {_odds}
	if getEntityVarByName({_ENT},"forceSpecialProc") is "true":
		set {_debug} to clearEntityVariableByName({_ENT},"forceSpecialProc")
		return 1
	if the 6th line of the lore of {_ENT}'s tool contains "Slaying":
		add 10 to {_odds}
	if the 2nd line of the lore of {_ENT}'s tool contains "Wrath":
		if {_ENT}'s health is less than ({_ENT}'s maximum health * 0.5):
			add (({_ENT}'s maximum health * 0.5) - {_ENT}'s health) to {_odds}
	add getAbsoluteValue(getEntityStat({_ENT},"crushing")) to {_odds}
	if the name of {_ENT}'s tool is "<gold><bold>Rex Hasta":
		if the 6th line of the lore of {_ENT}'s tool contains "Unique":
			add 20 to {_odds}
	else if the name of {_ENT}'s tool is "<gold><bold>Hauteclere":
		if the 6th line of the lore of {_ENT}'s tool contains "Unique":
			add 20 to {_odds}
	else if the name of {_ENT}'s tool is "<gold><bold>Durandal":
		if the 6th line of the lore of {_ENT}'s tool contains "Unique":
			add 10 to {_odds}
	if {dSoulActive.%{_ENT}%} is set:
		set {_DraconicAura} to checkSlots({_ENT},"Draconic Aura")
		if {_DraconicAura} is 1:
			add 10 to {_odds}
	chance of {_odds}%:
		clear {crushing.%{_ENT}%}
		return 1
	else if {_odds} is more than 100:
		clear {crushing.%{_ENT}%}
		return 1
	else:
		return 0
		
#Begin main script

#Define new crafting recipes:
on load:
	#Lances
	register new shaped recipe for wood shovel named "<bold>Wooden Lance" using air, cobblestone, air, cobblestone, stick, cobblestone, air, stick, air
	register new shaped recipe for stone shovel named "<bold>Stone Lance" using air, cobblestone, air, cobblestone, stick, cobblestone, air, stick, air
	register new shaped recipe for iron shovel named "<bold>Iron Lance" using air, iron ingot, air, iron ingot, stick, iron ingot, air, stick, air
	register new shaped recipe for gold shovel named "<bold>Golden Lance" using air, gold ingot, air, gold ingot, stick, gold ingot, air, stick, air
	register new shaped recipe for diamond shovel named "<bold>Diamond Lance" using air, diamond, air, diamond, stick, diamond, air, stick, air
	#Firearms
	register new shaped recipe for iron horse armor named "<light gray>Flintlock Pistol" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 1):", "1", "<white><italics>Slow, but works in a pinch." using air, air, cobblestone, cobblestone, cobblestone, stick, air, stick, stick
	register new shaped recipe for iron horse armor named "<light gray>Iron Musket" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 1):", "1", "<white><italics>Primitive, but effective... if it hits." using air, air, cobblestone, iron ingot, iron ingot, stick, air, stick, stick
	register new shaped recipe for iron horse armor named "<light gray>Iron Pistol" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 8):", "8", "<white><italics>The perfect sidearm to turn the tides." using air, air, iron ingot, iron ingot, iron ingot, stick, air, stick, stick
	register new shaped recipe for iron horse armor named "<light gray>Redstone Repeater" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 30):", "30", "<white><italics>A middlingly accurate fully-automatic." using air, air, iron ingot, iron ingot, iron ingot, redstone block, air, stick, redstone block
	register new shaped recipe for iron horse armor named "<light gray>Redgrave E-45 Express" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 18):", "18", "<white><italics>Rapid-fire handgun with a large clip." using air, air, quartz block, quartz block, quartz block, leather, air, stick, leather
	register new shaped recipe for golden horse armor named "<light gray>Redgrave Coyote-Alpha" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 5):", "5", "<white><italics>High-damage pump-action, but with large spread." using air, air, quartz block, gold ingot, gold ingot, iron ingot, air, stick, iron ingot
	register new shaped recipe for golden horse armor named "<light gray>Teufort Two-Timer" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 2):", "2", "<white><italics>Fires with enough force to push things around." using air, air, iron ingot, cobblestone, cobblestone, iron ingot, air, stick, iron ingot
	register new shaped recipe for diamond horse armor named "<light gray>Rocket Launcher" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 4):", "4", "<white><italics>Fires explosive rounds that launch foes." using iron ingot, air, obsidian, obsidian, obsidian, obsidian, stick, stick, obsidian
	register new shaped recipe for golden horse armor named "<light gray>Home-Made Heater" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 5):", "5", "<white><italics>Fires high-accuracy armour piercing shots." using air, air, iron ingot, gold ingot, gold ingot, gold ingot, air, air, stick
	register new shaped recipe for golden horse armor named "<light gray>Minigun" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - N/A", "<white>Special - Empty", "<white>Refine - Empty", "<white><bold>Clip (MAX: 200):", "200", "<white><italics>For when you need a little more gun.", "<white><italics>Fires very quickly, but drains ammo just as fast." using air, air, obsidian, obsidian, obsidian, iron block, air, iron block, iron block
	register new shaped recipe for diamond horse armor named "<light gray>Grenade Launcher" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 4):", "4", "<white><italics>Launches arcing explosives for massive direct damage." using iron ingot, obsidian, obsidian, obsidian, obsidian, cobblestone, air, stick, cobblestone
	register new shaped recipe for golden horse armor named "<light gray>Vettik S-25" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 25):", "25", "<white><italics>Load for a month, and fire for three." using air, air, iron ingot, iron block, iron block, gold block, stick, quartz block, stick
	register new shaped recipe for golden horse armor named "<light gray>Vettik B-30AS" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 30):", "30", "<white><italics>Feather the trigger to burst fire." using iron ingot, air, iron ingot, obsidian, obsidian, redstone block, air, stick, iron block
	register new shaped recipe for golden horse armor named "<light gray>Vettik A-10 Enforcer" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 10):", "10", "<white><italics>Long-range accuracy bundled with full-auto fire." using gold ingot, air, air, obsidian, obsidian, obsidian, iron block, air, iron ingot
	register new shaped recipe for golden horse armor named "<light gray>Redgrave Kalina" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 10):", "10", "<white><italics>Paint the town red in one shot." using quartz block, air, air, obsidian, obsidian, lapis block, air, stick, iron block
	register new shaped recipe for diamond horse armor named "<light gray>Redgrave Ifrit" with lore "<white>Slot A - Empty", "<white>Slot B - Empty", "<white>Slot C - Empty", "<white>Assist - Empty", "<white>Special - Empty", "<white>Refine - N/A", "<white><bold>Clip (MAX: 7):", "7", "<white><italics>For when things get personal." using air, air, air, obsidian, gold block, gold block, air, stick, leather

#Dodge Roll Toggle Command
command /dr [<number=2>]:
	description: Toggles your Dodge Roll on and off.
	usage: /dr
	executable by: players
	trigger:
		if arg 1 is 1:
			set {drenable.%player%} to 1
			send formatted "<green><bold>Dodge Roll enabled! Double tap Sneak to roll backwards."
		else if arg 1 is 0:
			set {drenable.%player%} to 0
			send formatted "<green><bold>Dodge Roll disabled!"
		else:
			if {drenable.%player%} is 1:
				set {drenable.%player%} to 0
				send formatted "<green><bold>Dodge Roll disabled!"
			else:
				set {drenable.%player%} to 1
				send formatted "<green><bold>Dodge Roll enabled! Double tap Sneak to roll backwards."
				
#Dodge Roll Refresh and Double-Tap Check
every 0.5 seconds:
	loop all players:
		if {dr.%loop-value%} is 1 or 2:
			set {dr.%loop-value%} to 0
			
#Out of Combat Buffs/Debuffs
every 0.25 seconds:
	loop {t_globalNPCList::*}:
		add loop-value to {_playerlist::*}
	loop all players:
		add loop-value  to {_playerlist::*}
	loop {_playerlist::*}:
		#Hone Skills
		if the 3rd line of the lore of the loop-value's tool contains "Hone":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-1,"party") is getEntityVarByName(loop-value-2,"party"):
						if the 3rd line of the lore of loop-value-1's tool contains "STR":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",20)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",-20)
						else if the 3rd line of the lore of loop-value-1's tool contains "SPD":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",20)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",-20)
						else if the 3rd line of the lore of loop-value-1's tool contains "SKL":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",20)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",-20)
						else if the 3rd line of the lore of loop-value-1's tool contains "DEF":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",20)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",-20)
						else if the 3rd line of the lore of loop-value-1's tool contains "MAG":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",20)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",-20)
						play 1 (lava pop with speed 0.5) at loop-value-2
						exit 1 loop
		#Drive Skills
		if the 3rd line of the lore of the loop-value's tool contains "Drive":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-1,"party") is getEntityVarByName(loop-value-2,"party"):
						if the 3rd line of the lore of loop-value-1's tool contains "STR":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "SPD":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "SKL":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "DEF":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "MAG":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",-10)
						play 5 (cyan wool break with speed 1) at loop-value-2
		#Joint-Hone Skills
		if the 3rd line of the lore of the loop-value's tool contains "Joint-Hone":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-1,"party") is getEntityVarByName(loop-value-2,"party"):
						if the 3rd line of the lore of loop-value-1's tool contains "STR":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"STR",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",-10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"STR",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "SPD":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"SPD",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",-10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"SPD",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "SKL":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"SKL",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",-10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"SKL",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "DEF":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"DEF",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",-10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"DEF",-10)
						else if the 3rd line of the lore of loop-value-1's tool contains "MAG":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"RES",10)
							wait 0.25 seconds
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",-10)
							set {_confirmbuff} to changeEntityStatBuff(loop-value-1,"RES",-10)
						play 5 (orange wool break with speed 1) at loop-value-2
						play 5 (orange wool break with speed 1) at loop-entity-1
						exit 1 loop
		#Coalition Skills
		if the 3rd line of the lore of the loop-value's tool contains "Coalition":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if checkPlayerClass(loop-value-2,"%{class.%loop-value-1%}%") is {class.%loop-value-1%}:
						if getEntityVarByName(loop-value-1,"party") is getEntityVarByName(loop-value-2,"party"):
							if the 3rd line of the lore of the loop-value-1's tool contains "Sally":
								if {buffsActive.%loop-value-1%::Sally Coalition} is not set:
									set {buffsActive.%loop-value-1%::Sally Coalition} to true
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"STR",20)
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"SPD",20)
									play 5 (white wool break with speed 1) at loop-value-1
								if {buffsActive.%loop-value-2%::Sally Coalition} is not set:	
									set {buffsActive.%loop-value-2%::Sally Coalition} to true
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"STR",20)
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"SPD",20)
									play 5 (white wool break with speed 1) at loop-value-2
								if {_bufferConfirm} is 1:
									wait 0.25 seconds
									clear {buffsActive.%loop-value-1%::Sally Coalition}
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"STR",-20)
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"SPD",-20)
								if {_allyConfirm} is 1:
									wait 0.25 seconds
									clear {buffsActive.%loop-value-2%::Sally Coalition}
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"STR",-20)
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"SPD",-20)
							else if the 3rd line of the lore of the loop-value-1's tool contains "Garrison":
								if {buffsActive.%loop-value-1%::Garrison Coalition} is not set:
									set {buffsActive.%loop-value-1%::Garrison Coalition} to true
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"DEF",20)
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"RES",20)
									play 5 (white wool break with speed 1) at loop-value-1
								if {buffsActive.%loop-value-2%::Garrison Coalition} is not set:	
									set {buffsActive.%loop-value-2%::Garrison Coalition} to true
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"DEF",20)
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"RES",20)
									play 5 (white wool break with speed 1) at loop-value-2
								if {_bufferConfirm} is 1:
									wait 0.25 seconds
									clear {buffsActive.%loop-value-1%::Garrison Coalition}
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"DEF",-20)
									set {_bufferConfirm} to changeEntityStatBuff(loop-value-1,"RES",-20)
								if {_allyConfirm} is 1:
									wait 0.25 seconds
									clear {buffsActive.%loop-value-2%::Garrison Coalition}
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"DEF",-20)
									set {_allyConfirm} to changeEntityStatBuff(loop-value-2,"RES",-20)
		#Authority Skills
		if the 3rd line of the lore of the loop-value's tool contains "Authority":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-1,"party") is getEntityVarByName(loop-value-2,"party"):
						if getEntityVarByName(loop-value-1,"lvl") parsed as integer is more than getEntityVarByName(loop-value-2,"lvl") parsed as integer:
							set {_buffAmount} to ((getEntityVarByName(loop-value-1,"lvl") parsed as integer - getEntityVarByName(loop-value-2,"lvl") parsed as integer) * 2)
							if the 3rd line of the lore of loop-value-1's tool contains "STR":
								set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"STR",{_buffAmount})
								if {_buffConfirm} is 1:
									wait 0.25 seconds
									set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"STR",({_buffAmount} * -1))
							else if the 3rd line of the lore of loop-value-1's tool contains "SPD":
								set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"SPD",{_buffAmount})
								if {_buffConfirm} is 1:
									wait 0.25 seconds
									set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"SPD",({_buffAmount} * -1))
							else if the 3rd line of the lore of loop-value-1's tool contains "SKL":
								set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"SKL",{_buffAmount})
								if {_buffConfirm} is 1:
									wait 0.25 seconds
									set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"SKL",({_buffAmount} * -1))
							else if the 3rd line of the lore of loop-value-1's tool contains "DEF":
								set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"DEF",{_buffAmount})
								if {_buffConfirm} is 1:
									wait 0.25 seconds
									set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"DEF",({_buffAmount} * -1))
							else if the 3rd line of the lore of loop-value-1's tool contains "MAG":
								set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"RES",{_buffAmount})
								if {_buffConfirm} is 1:
									wait 0.25 seconds
									set {_buffConfirm} to changeEntityStatBuff(loop-value-2,"RES",({_buffAmount} * -1))
		#Pressure Skills
		if the 3rd line of the lore of the loop-value's tool contains "Pressure":
			loop all entities in radius 10 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-1,"party") is not getEntityVarByName(loop-value-2,"party"):
						if the 3rd line of the lore of loop-value-1's tool contains "STR":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",-20)
							if {_confirmbuff} is 1:
								wait 0.25 seconds
								set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"STR",20)
						else if the 3rd line of the lore of loop-value-1's tool contains "SPD":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",-20)
							if {_confirmbuff} is 1:
								wait 0.25 seconds
								set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SPD",20)
						else if the 3rd line of the lore of loop-value-1's tool contains "SKL":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",-20)
							if {_confirmbuff} is 1:
								wait 0.25 seconds
								set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"SKL",20)
						else if the 3rd line of the lore of loop-value-1's tool contains "DEF":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",-20)
							if {_confirmbuff} is 1:
								wait 0.25 seconds
								set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"DEF",20)
						else if the 3rd line of the lore of loop-value-1's tool contains "MAG":
							set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",-20)
							if {_confirmbuff} is 1:
								wait 0.25 seconds
								set {_confirmbuff} to changeEntityStatBuff(loop-value-2,"RES",20)
						play 10 (red wool break with speed 1) at loop-value-2
		#Armour Skills
		#Helmet Cosmetics
		if the lore of the loop-value's helmet contains "Stormy Skies":
			play 7 (cloud with speed 0) at the loop-value
		else if the lore of the loop-value's helmet contains "Unbreakable Diamond":
			play 7 (diamond block break with speed 1) at the loop-value
		else if the lore of the loop-value's helmet contains "Emerald Splash":
			play 7 (emerald block break with speed 1) at the loop-value
		else if the lore of the loop-value's helmet contains "Flaming Spirit":
			play 2 (mob spawner flames with speed 1) at the loop-value
		else if the lore of the loop-value's helmet contains "The End is Near":
			play 3 (purple wool break with speed 1) at the loop-value
			play 4 (obsidian block break with speed 1) at the loop-value
		#Chestplate Buffs/Debuffs
		#STR Up
		if the lore of the loop-value's chestplate contains "STR":
			if {buffsActive.%loop-value%::Chestplate_STR} is not set:
				set {buffsActive.%loop-value%::Chestplate_STR} to true
				set {_debug} to changeEntityStatBuff(loop-value,"STR",20)
		else if {buffsActive.%loop-value%::Chestplate_STR} is set:
			clear {buffsActive.%loop-value%::Chestplate_STR}
			set {_debug} to changeEntityStatBuff(loop-value,"STR",-20)
		#DEF
		if the lore of the loop-value's chestplate contains "DEF":
			if {buffsActive.%loop-value%::Chestplate_DEF} is not set:
				set {buffsActive.%loop-value%::Chestplate_DEF} to true
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",20)
		else if {buffsActive.%loop-value%::Chestplate_DEF} is set:
			clear {buffsActive.%loop-value%::Chestplate_DEF}
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-20)
		#SPD
		if the lore of the loop-value's chestplate contains "SPD":
			if {buffsActive.%loop-value%::Chestplate_SPD} is not set:
				set {buffsActive.%loop-value%::Chestplate_SPD} to true
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",20)
		else if {buffsActive.%loop-value%::Chestplate_SPD} is set:
			clear {buffsActive.%loop-value%::Chestplate_SPD}
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",-20)
		#SKL
		if the lore of the loop-value's chestplate contains "SKL":
			if {buffsActive.%loop-value%::Chestplate_SKL} is not set:
				set {buffsActive.%loop-value%::Chestplate_SKL} to true
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",20)
		else if {buffsActive.%loop-value%::Chestplate_SKL} is set:
			clear {buffsActive.%loop-value%::Chestplate_SKL}
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
		#MAG
		if the lore of the loop-value's chestplate contains "MAG":
			if {buffsActive.%loop-value%::Chestplate_MAG} is not set:
				set {buffsActive.%loop-value%::Chestplate_MAG} to true
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",20)
		else if {buffsActive.%loop-value%::Chestplate_MAG} is set:
			clear {buffsActive.%loop-value%::Chestplate_MAG}
			set {_debug} to changeEntityStatBuff(loop-value,"MAG",-20)
		#Brave Blade Debuffs
		if the 2nd line of the lore of loop-value's tool contains "Brave Blade":
			if {buffsActive.%loop-value%::Brave Blade Debuff} is not set:
				set {buffsActive.%loop-value%::Brave Blade Debuff} to true
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-5)
		else if {buffsActive.%loop-value%::Brave Blade Debuff} is set:
			clear {buffsActive.%loop-value%::Brave Blade Debuff}
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",5)
		#Bond Skills
		if getEntitySkillsInHand(loop-value,"Bond",2,1) is more than 0:
			set {_bondOK} to false
			loop all entities in radius 15 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-2,"party") is getEntityVarByName(loop-value-1,"party"):
						set {_bondOK} to true
						exit 1 loop
		if {_bondOK} is true:
			#Offense Bond
			if getEntitySkillsInHand(loop-value,"Offense Bond",2,1) is more than 0:
				if {buffsActive.%loop-value%::Offense Bond} is not set:
					set {buffsActive.%loop-value%::Offense Bond} to changeEntityStatBuff(loop-value,"STR",20)
					set {buffsActive.%loop-value%::Offense Bond} to changeEntityStatBuff(loop-value,"SPD",20)
					set {buffsActive.%loop-value%::Offense Bond} to changeEntityStatBuff(loop-value,"SKL",20)
			#Defense Bond
			if getEntitySkillsInHand(loop-value,"Defense Bond",2,1) is more than 0:
				if {buffsActive.%loop-value%::Defense Bond} is not set:
					set {buffsActive.%loop-value%::Defense Bond} to changeEntityStatBuff(loop-value,"DEF",20)
					set {buffsActive.%loop-value%::Defense Bond} to changeEntityStatBuff(loop-value,"MAG",20)
					set {buffsActive.%loop-value%::Defense Bond} to changeEntityStatBuff(loop-value,"SKL",20)
			#Magic Bond
			if getEntitySkillsInHand(loop-value,"Magic Bond",2,1) is more than 0:
				if {buffsActive.%loop-value%::Magic Bond} is not set:
					set {buffsActive.%loop-value%::Magic Bond} to changeEntityStatBuff(loop-value,"MAG",20)
					set {buffsActive.%loop-value%::Magic Bond} to changeEntityStatBuff(loop-value,"SPD",20)
					set {buffsActive.%loop-value%::Magic Bond} to changeEntityStatBuff(loop-value,"SKL",20)
		#Undo Bond skills
		else:
			#Offense Bond
			if {buffsActive.%loop-value%::Offense Bond} is set:
				clear {buffsActive.%loop-value%::Offense Bond}
				set {_debug} to changeEntityStatBuff(loop-value,"STR",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
			#Magic Bond
			if {buffsActive.%loop-value%::Magic Bond} is set:
				clear {buffsActive.%loop-value%::Magic Bond}
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
			#Defense Bond
			else if {buffsActive.%loop-value%::Defense Bond} is set:
				clear {buffsActive.%loop-value%::Defense Bond}
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
		#Solo Skills
		if getEntitySkillsInHand(loop-value,"Solo",2,1) is more than 0:
			set {_SoloOK} to true
			loop all entities in radius 15 of the loop-value:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-2,"party") is getEntityVarByName(loop-value-1,"party"):
						set {_SoloOK} to false
						exit 1 loop
		if {_SoloOK} is true:
			#Offense Solo
			if getEntitySkillsInHand(loop-value,"Offense Solo",2,1) is more than 0:
				if {buffsActive.%loop-value%::Offense Solo} is not set:
					set {buffsActive.%loop-value%::Offense Solo} to changeEntityStatBuff(loop-value,"STR",20)
					set {buffsActive.%loop-value%::Offense Solo} to changeEntityStatBuff(loop-value,"SPD",20)
					set {buffsActive.%loop-value%::Offense Solo} to changeEntityStatBuff(loop-value,"SKL",20)
			#Defense Solo
			if getEntitySkillsInHand(loop-value,"Defense Solo",2,1) is more than 0:
				if {buffsActive.%loop-value%::Defense Solo} is not set:
					set {buffsActive.%loop-value%::Defense Solo} to changeEntityStatBuff(loop-value,"DEF",20)
					set {buffsActive.%loop-value%::Defense Solo} to changeEntityStatBuff(loop-value,"MAG",20)
					set {buffsActive.%loop-value%::Defense Solo} to changeEntityStatBuff(loop-value,"SKL",20)
			#Magic Solo
			if getEntitySkillsInHand(loop-value,"Magic Solo",2,1) is more than 0:
				if {buffsActive.%loop-value%::Magic Solo} is not set:
					set {buffsActive.%loop-value%::Magic Solo} to changeEntityStatBuff(loop-value,"MAG",20)
					set {buffsActive.%loop-value%::Magic Solo} to changeEntityStatBuff(loop-value,"SPD",20)
					set {buffsActive.%loop-value%::Magic Solo} to changeEntityStatBuff(loop-value,"SKL",20)
		#Undo Solo Skills
		else:
			#Offense Solo
			if {buffsActive.%loop-value%::Offense Solo} is set:
				clear {buffsActive.%loop-value%::Offense Solo}
				set {_debug} to changeEntityStatBuff(loop-value,"STR",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
			#Magic Solo
			else if {buffsActive.%loop-value%::Magic Solo} is set:
				clear {buffsActive.%loop-value%::Magic Solo}
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
			#Defense Solo
			else if {buffsActive.%loop-value%::Defense Solo} is set:
				clear {buffsActive.%loop-value%::Defense Solo}
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",-20)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",-20)
		#Fury
		if getEntitySkillsInHand(loop-value,"Fury",2,1) is more than 0:
			if {buffsActive.%loop-value%::Fury} is not set:
				set {buffsActive.%loop-value%::Fury} to changeEntityStatBuff(loop-value,"STR",10)
				set {buffsActive.%loop-value%::Fury} to changeEntityStatBuff(loop-value,"DEF",10)
				set {buffsActive.%loop-value%::Fury} to changeEntityStatBuff(loop-value,"SKL",10)
				set {buffsActive.%loop-value%::Fury} to changeEntityStatBuff(loop-value,"SPD",10)
				set {buffsActive.%loop-value%::Fury} to changeEntityStatBuff(loop-value,"MAG",10)
		else if {buffsActive.%loop-value%::Fury} is set:
			clear {buffsActive.%loop-value%::Fury}
			set {_debug} to changeEntityStatBuff(loop-value,"STR",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"MAG",-10)
		#Power Within
		if getEntitySkillsInHand(loop-value,"Power Within",2,1) is more than 0:
			if {buffsActive.%loop-value%::Power Within} is not set:
				set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"STR",20)
				set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"DEF",20)
				set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"SKL",20)
				set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"SPD",20)
				set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"MAG",20)
			if {t_PowerWithinDOT.%loop-value%} is less than 1:
				add 1 to {t_PowerWithinDOT.%loop-value%}
			else:
				set {t_PowerWithinDOT.%loop-value%} to 0
				damage loop-value by 0.5 hearts with fake cause poison
		else if {buffsActive.%loop-value%::Power Within} is set:
			set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"STR",-20)
			set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"DEF",-20)
			set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"SKL",-20)
			set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"SPD",-20)
			set {buffsActive.%loop-value%::Power Within} to changeEntityStatBuff(loop-value,"MAG",-20)
			clear {buffsActive.%loop-value%::Power Within}
		#Fensalir
		if the name of the loop-value's tool contains "<gold><bold>Fensalir":
			if the 6th line of the lore of loop-value's tool contains "Unique":
				loop all entities in radius 10 of the loop-value:
					if loop-value-2 is not loop-value-1:
						if getEntityVarByName(loop-value-2,"party") is getEntityVarByName(loop-value-1,"party"):
							set {_FensBondOK} to true
							exit 1 loop
				if {_FensBondOK} is true:
					set {buffsActive.%loop-value%::Fensalir Unique Bond} to changeEntityStatBuff(loop-value,"STR",30)
					set {buffsActive.%loop-value%::Fensalir Unique Bond} to changeEntityStatBuff(loop-value,"SKL",30)
					if {buffsActive.%loop-value%::Fensalir Unique Bond} is 1:
						wait 0.25 seconds
						set {buffsActive.%loop-value%::Fensalir Unique Bond} to changeEntityStatBuff(loop-value,"STR",-30)
						set {buffsActive.%loop-value%::Fensalir Unique Bond} to changeEntityStatBuff(loop-value,"SKL",-30)
		#Falchion Drive Spectrum
		else if the name of loop-value's tool contains "<gold><bold>Falchion":
			loop all entities in radius 10 of loop-value-1:
				if loop-value-2 is not loop-value-1:
					if getEntityVarByName(loop-value-2,"party") is getEntityVarByName(loop-value-1,"party"):
						play 5 (firework spark with speed 0) at loop-value-2
						play 5 (critical hit with speed 0) at loop-value-2
						play 5 (snow shovel with speed 0) at loop-value-2	
						set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"STR",10)
						set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"SPD",10)
						set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"SKL",10)
						set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"DEF",10)
						set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"MAG",10)
						if {buffsActive.%loop-value-2%::Falchion Drive Spectrum} is 1:
							wait 0.25 seconds
							set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"STR",-10)
							set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"SPD",-10)
							set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"SKL",-10)
							set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"DEF",-10)
							set {buffsActive.%loop-value-2%::Falchion Drive Spectrum} to changeEntityStatBuff(loop-value-2,"MAG",-10)
		#Sacred Treasure equip buffs
		#Fujin Yumi
		if the name of the loop-value's tool is "<gold><bold>Fujin Yumi":
			if getEntityVarByName(loop-value,"FujinYumiEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"RES",20)
				set {_debug} to setEntityVariableByName(loop-value,"FujinYumiEQ",{_debug})
		else if getEntityVarByName(loop-value,"FujinYumiEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"RES",-20)
			set {_debug} to clearEntityVariableByName(loop-value,"FujinYumiEQ")
		#Brave Bow
		if the name of the loop-value's tool is "<gold><bold>Brave Bow":
			if getEntityVarByName(loop-value,"bravebowEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",-5)
				set {_debug} to setEntityVariableByName(loop-value,"BraveBowEQ",{_debug})
		else if getEntityVarByName(loop-value,"bravebowEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",5)
			clearEntityVariableByName(loop-value,"bravebowEQ")
		#Hauteclere
		if the name of the loop-value's tool contains "<gold><bold>Hauteclere":
			if getEntityVarByName(loop-value,"hauteclereEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",15)
				set {_debug} to setEntityVariableByName(loop-value,"hauteclereEQ",{_debug})
		else if getEntityVarByName(loop-value,"hauteclereEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-15)
			clearEntityVariableByName(loop-value,"hauteclereEQ")
		#Tyrfing
		if the name of the loop-value's tool contains "<gold><bold>Tyrfing":
			if getEntityVarByName(loop-value,"tyrfingEQ") is "-2":
				if the 6th line of the lore of the loop-value's tool contains "Unique":
					set {_debug} to changeEntityStatBuff(loop-value,"RES",20)
					set {_debug} to changeEntityStatBuff(loop-value,"DEF",15)
					set {_debug} to changeEntityStatBuff(loop-value,"SKL",15)
					set {_debug} to setEntityVariableByName(loop-value,"tyrfingEQ",1)
		else if getEntityVarByName(loop-value,"tyrfingEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"RES",-20)
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-15)
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-15)
			set {_debug} to clearEntityVariableByName(loop-value,"tyrfingEQ")
		#Daybreak Axe
		if the name of the loop-value's tool contains "<gold><bold>Daybreak Axe":
			if getEntityVarByName(loop-value,"DaybreakAxeEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"RES",10)
				set {_debug} to setEntityVariableByName(loop-value,"DaybreakAxeEQ",{_debug})
		else if getEntityVarByName(loop-value,"DaybreakAxeEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"RES",-10)
			set {_debug} to clearEntityVariableByName(loop-value,"DaybreakAxeEQ")
		#Light Brand
		if the name of the loop-value's tool contains "<gold><bold>Light Brand":
			if getEntityVarByName(loop-value,"lightbrandEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",10)
				set {_debug} to setEntityVariableByName(loop-value,"lightbrandEQ",{_debug})
		else if getEntityVarByName(loop-value,"lightbrandEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-10)
			set {_debug} to clearEntityVariableByName(loop-value,"lightbrandEQ")
		#Gae Bolg
		if the name of the loop-value's tool contains "<gold><bold>Gae Bolg":
			if getEntityVarByName(loop-value,"gaebolgEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"STR",10)
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",10)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",10)
				set {_debug} to setEntityVariableByName(loop-value,"gaebolgEQ",{_debug})
		else if getEntityVarByName(loop-value,"gaebolgEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"STR",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-10)
			set {_debug} to clearEntityVariableByName(loop-value,"gaebolgEQ")
		#Mystletainn
		if the name of the loop-value's tool contains "<gold><bold>Mystletainn":
			if getEntityVarByName(loop-value,"MystletainnEQ") is "-2":
				if the 6th line of the lore of loop-value's tool contains "Unique":
					set {_debug} to changeEntityStatBuff(loop-value,"STR",15)
					set {_debug} to changeEntityStatBuff(loop-value,"DEF",15)
					set {_debug} to changeEntityStatBuff(loop-value,"SKL",15)
					set {_debug} to changeEntityStatBuff(loop-value,"SPD",15)
					set {_debug} to changeEntityStatBuff(loop-value,"MAG",15)
					set {_debug} to setEntityVariableByName(loop-value,"mystletainnEQ",{_debug})
		else if getEntityVarByName(loop-value,"MystletainnEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"STR",-15)
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-15)
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-15)
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",-15)
			set {_debug} to changeEntityStatBuff(loop-value,"MAG",-15)
			set {_debug} to clearEntityVariableByName(loop-value,"mystletainnEQ")
		#Binding Blade
		if the name of loop-value's tool contains "<gold><bold>Binding Blade":
			if getEntityVarByName(loop-value,"BindingBladeEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",10)
				set {_debug} to changeEntityStatBuff(loop-value,"RES",10)
				set {_debug} to setEntityVariableByName(loop-value,"BindingBladeEQ",{_debug})
		else if getEntityVarByName(loop-value,"BindingBladeEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"RES",-10)
			set {_debug} to clearEntityVariableByName(loop-value,"BindingBladeEQ")
		#Devil Axe
		if the name of the loop-value's tool contains "<gold><bold>Devil Axe":
			if getEntityVarByName(loop-value,"DevilAxeEQ") is "-2":
				set {_debug} to changeEntityStatBuff(loop-value,"STR",10)
				set {_debug} to changeEntityStatBuff(loop-value,"DEF",10)
				set {_debug} to changeEntityStatBuff(loop-value,"SKL",10)
				set {_debug} to changeEntityStatBuff(loop-value,"SPD",10)
				set {_debug} to changeEntityStatBuff(loop-value,"MAG",10)
				set {_debug} to setEntityVariableByName(loop-value,"DevilAxeEQ",{_debug})
		else if getEntityVarByName(loop-value,"DevilAxeEQ") is not "-2":
			set {_debug} to changeEntityStatBuff(loop-value,"STR",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"DEF",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"SKL",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"SPD",-10)
			set {_debug} to changeEntityStatBuff(loop-value,"MAG",-10)
			set {_debug} to clearEntityVariableByName(loop-value,"DevilAxeEQ")
		
#Air Hang ground refresh
every 0.1 seconds:
	loop all players:
		if loop-value is on ground:
			set {attackHangtimeCount.%loop-value%} to 4
			clear {inHangtime.%loop-value%}
			clear {t_airComboBonus.%loop-value%}
		if the name of loop-player's tool is "<gold><bold>Blessed Sword":
			if the 6th line of the lore of loop-player's tool contains "Unique":
				apply regeneration 2 to loop-player for 1 second
				remove weakness from loop-player
				remove slowness from loop-player
				remove poison from loop-player
				remove wither from loop-player
		else if the name of the loop-player's tool is "<yellow><bold>Climbing Hook":
			apply swiftness 2 to loop-player for 1 second
			apply jump boost 2 to loop-player for 1 second
			apply mining fatigue 5 to loop-player for 1 second
	
#Players can transfer more momentum into the air.
on jump:
	if player is sprinting:
		set {_magnitude} to sqrt(((x of player's velocity ^ 2) + (y of player's velocity ^ 2) + (z of player's velocity ^ 2))) * 3.5
		#Cap maximum speed if it exceeds a specific amount, and take absolute value.
		if {_magnitude} is less than 0:
			set {_magnitude} to {_magnitude} * -1
		else if {_magnitude} is more than 0.1:
			set {_magnitude} to 0.1
		push the player in horizontal direction of the player at speed {_magnitude}
		#ZOOM!
		while {_magnitude} is more than 0.005:
			add 0.0075 to {_decay}
			set {_magnitude} to sqrt(((x of player's velocity ^ 2) + (y of player's velocity ^ 2) + (z of player's velocity ^ 2)))
			push the player in horizontal direction of the player at speed {_magnitude}
			set {_magnitude} to {_magnitude} / (1 + {_decay})
			#send formatted "%{_magnitude}%"
			if player is on ground:
				push the player in horizontal direction of the player at speed {_magnitude}
				exit 1 loop
			wait 1 tick
		
#Gold/Green Herb Pickup Behavior
on pick up:
	if the name of the event-item is "<light green><bold>Sacred Herb":
		if player's health is less than player's maximum health:
			cancel event
			delete event-entity
			play sound "entity.player.swim" with volume 2 and pitch 1.5 at the player for the player
			play sound "item.bucket.fill" with volume 2 and pitch 1.3 at the player for the player
			play 30 (light green wool break with speed 1) at the player
			heal the player by 3 hearts
			send formatted "<light green>Consumed a Sacred Herb and restored 6 HP."
	else if the name of the event-item is "<light yellow><bold>Golden Herb":
		if player's health is less than player's maximum health:
			cancel event
			delete event-entity
			play sound "block.enchantment_table.use" with volume 3 and pitch 2 at the player for the player
			play sound "entity.player.swim" with volume 1 and pitch 1.5 at the player for the player
			play 30 (gold block break with speed 1) at the player
			heal the player by 6 hearts
			send formatted "<light yellow>Consumed a Golden Herb and restored 12 HP."

				
#DR = 0 - Prepped
#DR = 1 - Ready to activated
#DR = 2 - Exhausted, must recharge.
#DRInvincible - Player is rolling with invincibility
#Dodge Roll
on sneak toggle:
	if {drenable.%player%} is 1:
		if player is sneaking:
			set {dr.%player%} to 1
		if {dr.%player%} is 1:
			if player is sneaking:
				set {dr.%player%} to 1
			else:
				set {_flight} to checkSlots(player,"Flight")
				if player's hunger is less than 3:
					send formatted "<red><bold>Not enough hunger to Dodge Roll!" to the player
				else if {_flight} is 1:
					if {flying.%player%} is not set:
						set {flying.%player%} to 1
						set {_armour} to the player's chestplate
						wait 1 tick
						set the player's chestplate to 1 elytra
						push the player upwards at speed 5
						play sound "entity.blaze.shoot" with volume 0.5 and pitch 1.5 at player
						send formatted "<light blue>You take to the skies!"
						wait 1 second
						while player's hunger is more than 3:
							if player is on ground:
								exit 1 loop
							else if player is sneaking:
								exit 1 loop
							play 20 (smoke with speed 0) at player
							play 20 (snowball break with speed 0) at player
							play sound "entity.enderdragon.flap" with volume 1 and pitch 1 at player
							push the player forwards at speed 0.5
							reduce the player's food level by 0.5
							wait 1 second
						clear {flying.%player%}
						set the player's chestplate to {_armour}
						send formatted "<light red>Your wings grow tired..."
						play sound "entity.enderdragon.flap" with volume 1 and pitch 1 at player
				else:
					set {DRInvincible.%player%} to 1
					if the 1st line of the lore of the player's boots contains "<light red><bold>Slot A - Long Jump":
						push the player forwards at speed 2
					else if the 1st line of the lore of the player's boots contains "<light red><bold>Slot A - Quick Stomp":
						push the player downwards at speed 3
					else if the 1st line of the lore of the player's boots contains "<light red><bold>Slot A - Boost Jump":
						push the player upwards at speed 2.5
					else:
						push the player backwards at speed 0.85
					play sound "entity.blaze.shoot" with volume 0.5 and pitch 1.5 at player
					loop 10 times:
						play 2 (smoke with speed 0) at the player
						play 2 (snowball break with speed 1) at the player
						wait 1 tick
					set {_slotcheck.%player%} to checkSlots(player,"Light Feet")
					if {_slotcheck.%player%} is 0:
						reduce the player's food level by 1
					else:
						reduce the player's food level by 0.5
					set {dr.%player%} to 2
					set {DRInvincible.%player%} to 0
					if {quests.%player%::Breaking the Ice} is 3:
						send formatted "<light blue>Combat Instructor: <white>Well done. You get invincibility while you're rolling, but it'll cost hunger every time you roll. Save it for emergencies or else you'll tear through your hunger supply." to the player
						wait 5 seconds
						send formatted "<light blue>Combat Instructor: <white>Now I suppose we're going to have to talk about perks. You'll get these after leveling up or by getting a promotion from Alastor, and with one equipped you'll be able to enhance your abilities." to the player
						wait 5 seconds
						make player execute command "/xp 1l"
						send formatted "<light blue>Combat Instructor: <white>Your practice should've earned you an extra level. Go ahead and equip your new HP +5 perk in your perk menu." to the player
						send formatted "<light yellow><italics>Use the /perks command to equip the HP +5 perk." to the player
						setQuestProgress(player,"Breaking the Ice",4,"Equip the HP +5 perk by using /perks.")
						
#Dodge Roll Invincibility
on damage:
	if victim is a player:
		if {DRInvincible.%victim%} is 1:
			add 1 to {qptally.%victim%}
			if {qptally.%victim%} is more than 49:
				if {perks.%victim%::Quickened Pulse} is not set:
					make victim execute command "/grantskill 0 Quickened Pulse"
			set {_slotcheck.%victim%} to checkSlots(victim,"Quickened Pulse")
			send formatted "<green><bold>Dodged the attack!" to the victim
			play sound "item.totem.use" with volume 1 and pitch 1 at attacker for victim
			if {combograde.%victim%} is more than 0:
				add damage to {comboscore.%victim%}
			cancel event
			add 0.5 to the victim's food bar
			apply speed 1 to the victim for 3 seconds
			if the 1st line of the lore of the victim's boots contains "<light red><bold>Slot A - Quickened Pulse":
				apply slowness 6 to the attacker for 3 seconds
				apply weakness 6 to the attacker for 3 seconds
				apply mining fatigue 6 to the attacker for 3 seconds
				send formatted "<light blue><bold>Quickened Pulse activated!" to the victim
				loop 5 times:
					show smoke on the attacker
					show smoke on the attacker
					show magical critical hit on the attacker
					show magical critical hit on the attacker
				#wait 2 ticks
			else if the 1st line of the lore of the victim's boots contains "<light red><bold>Slot A - Witch Time":
				apply slowness 6 to the attacker for 3 seconds
				apply weakness 6 to the attacker for 3 seconds
				apply mining fatigue 6 to the attacker for 3 seconds
				send formatted "<light purple><bold>Witch Time activated!" to the victim
				set {_cheeky} to a random integer between 1 and 8
				if {_cheeky} is 1:
					send formatted "<light purple><bold>Is that all you've got?" to the attacker
					send formatted "<light purple><bold>Is that all you've got?" to the victim
				else if {_cheeky} is 2:
					send formatted "<light purple><bold>Can't touch me!" to the attacker
					send formatted "<light purple><bold>Can't touch me!" to the victim
				else if {_cheeky} is 3:
					send formatted "<light purple><bold>Too late!" to the attacker
					send formatted "<light purple><bold>Too late!" to the victim
				else if {_cheeky} is 4:
					send formatted "<light purple><bold>So close!" to the attacker
					send formatted "<light purple><bold>So close!" to the victim
				else if {_cheeky} is 5:
					send formatted "<light purple><bold>Almost!" to the attacker
					send formatted "<light purple><bold>Almost!" to the victim
				else if {_cheeky} is 6:
					send formatted "<light purple><bold>Boring!" to the attacker
					send formatted "<light purple><bold>Boring!" to the victim
				else if {_cheeky} is 7:
					send formatted "<light purple><bold>Dreadful!" to the attacker
					send formatted "<light purple><bold>Dreadful!" to the victim
				else if {_cheeky} is 8:
					send formatted "<light purple><bold>Not quite!" to the attacker
					send formatted "<light purple><bold>Not quite!" to the victim
				loop 5 times:
					show smoke on the attacker
					show smoke on the attacker
					show magical critical hit on the attacker
					show magical critical hit on the attacker
				#wait 1 tick
			else if {_slotcheck.%victim%} is 1:
				apply slowness 6 to the attacker for 3 seconds
				apply weakness 6 to the attacker for 3 seconds
				apply mining fatigue 6 to the attacker for 3 seconds
				send formatted "<light blue><bold>Quickened Pulse activated!" to the victim
				loop 5 times:
					show smoke on the attacker
					show smoke on the attacker
					show magical critical hit on the attacker
					show magical critical hit on the attacker
				#wait 2 ticks

#Sandbag commands			
command /sandbag:
	description: Spawn an infinite-health sandbag that tells you the amount of damage you just dealt.
	usage: /sandbag
	executable by: players
	trigger:
		spawn 1 armor stand at the player
		set the name of the last spawned entity to "<gold><bold>Sandbag"

command /sbtoggle:
	description: Toggle damaging of Sandbags
	usage: /sbtoggle
	executable by: players
	trigger:
		if {sandbagkillable.%player%} is 0:
			set {sandbagkillable.%player%} to 1
			send formatted "Your attacks will now damage Sandbags."
		else:
			set {sandbagkillable.%player%} to 0
			send formatted "Your attacks will no longer damage Sandbags."
			
#Lance damage correction
on damage:
	if projectile exists:
		set {_JAVTYPE} to metadata value "JavType" of projectile
		if {_JAVTYPE} is 1:
			set damage to 1.5
		else if {_JAVTYPE} is 2:
			set damage to 2.5
		else if {_JAVTYPE} is 3:
			set damage to 3.5
		else if {_JAVTYPE} is 4:
			set damage to 4.5
		else if {_JAVTYPE} is 5:
			set damage to 5
		else if {_JAVTYPE} is 6:
			set damage to 3.5
	else if the name of the attacker's tool contains "<bold>Wooden Lance":
		set damage to 1.5
	else if the name of the attacker's tool contains "<bold>Stone Lance":
		set damage to 2
	else if the name of the attacker's tool contains "<bold>Iron Lance":
		set damage to 2.5
	else if the name of the attacker's tool contains "<bold>Golden Lance":
		set damage to 2
	else if the name of the attacker's tool contains "<bold>Diamond Lance":
		set damage to 3.5
	else if the name of the attacker's tool contains "Crusader's Lance":
		set damage to 3.5

#On-Damage Buff/Debuff Skills (Time Sensitive)
on damage:
	if damage cause is attack:
		set {_doDamageCheck} to true
	else if projectile exists:
		set {_doDamageCheck} to true
	if citizen id of the attacker is set:
		set {_doDamageCheck} to true
		if attacker's tool is air:
			set attacker's tool to 1 iron sword of unbreaking 10, sharpness 3 named "<bold>Silver Sword"
	if {_doDamageCheck} is true:
		#Darting Blow
		if getEntitySkillsInHand(attacker,"Darting Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"DartingBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"SPD",30)
				set {_debug} to setEntityVariableByName(attacker,"DartingBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"SPD",-30)
				send formatted "<bold>Darting Blow wore off!" to the attacker
				wait 10 seconds
				set {_debug} to clearEntityVariableByName(attacker,"DartingBlowBuff")
				send formatted "<bold>Darting Blow ready!" to the attacker
		#Armoured Blow
		if getEntitySkillsInHand(attacker,"Armoured Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"ArmouredBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"DEF",30)
				set {_debug} to setEntityVariableByName(attacker,"ArmouredBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"DEF",-30)
				send formatted "<bold>Armoured Blow wore off!" to the attacker
				wait 10 seconds
				set {_debug} to clearEntityVariableByName(attacker,"DartingBlowBuff")
				send formatted "<bold>Armoured Blow ready!" to the attacker
		#Death Blow
		if getEntitySkillsInHand(attacker,"Death Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"DeathBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"STR",30)
				set {_debug} to setEntityVariableByName(attacker,"DeathBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"STR",-30)
				send formatted "<bold>Death Blow wore off!" to the attacker
				wait 10 seconds
				set {_debug} to clearEntityVariableByName(attacker,"DeathBlowBuff")
				send formatted "<bold>Death Blow ready!" to the attacker
		#Warding Blow
		if getEntitySkillsInHand(attacker,"Warding Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"WardingBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"RES",30)
				set {_debug} to setEntityVariableByName(attacker,"WardingBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"RES",-30)
				send formatted "<bold>Warding Blow wore off!" to the attacker
				wait 10 seconds
				set {_debug} to clearEntityVariableByName(attacker,"WardingBlowBuff")
				send formatted "<bold>Warding Blow ready!" to the attacker
		#Steady Blow
		if getEntitySkillsInHand(attacker,"Steady Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"SteadyBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"STR",20)
				set {_debug} to changeEntityStatBuff(attacker,"DEF",20)
				set {_debug} to setEntityVariableByName(attacker,"SteadyBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"STR",-20)
				set {_debug} to changeEntityStatBuff(attacker,"DEF",-20)
				send formatted "<bold>Steady Blow wore off!" to the attacker
				wait 15 seconds
				set {_debug} to clearEntityVariableByName(attacker,"SteadyBlowBuff")
				send formatted "<bold>Steady Blow ready!" to the attacker
		#Swift Blow
		if getEntitySkillsInHand(attacker,"Swift Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"SwiftBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"STR",20)
				set {_debug} to changeEntityStatBuff(attacker,"SPD",20)
				set {_debug} to setEntityVariableByName(attacker,"SwiftBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"STR",-20)
				set {_debug} to changeEntityStatBuff(attacker,"SPD",-20)
				send formatted "<bold>Swift Blow wore off!" to the attacker
				wait 15 seconds
				set {_debug} to clearEntityVariableByName(attacker,"SwiftBlowBuff")
				send formatted "<bold>Swift Blow ready!" to the attacker
		#Mirror Blow
		if getEntitySkillsInHand(attacker,"Mirror Blow",2,1) is more than 0:
			if getEntityVarByName(attacker,"MirrorBlowBuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"STR",20)
				set {_debug} to changeEntityStatBuff(attacker,"RES",20)
				set {_debug} to setEntityVariableByName(attacker,"MirrorBlowBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(attacker,"STR",-20)
				set {_debug} to changeEntityStatBuff(attacker,"RES",-20)
				send formatted "<bold>Mirror Blow wore off!" to the attacker
				wait 15 seconds
				set {_debug} to clearEntityVariableByName(attacker,"MirrorBlowBuff")
				send formatted "<bold>Mirror Blow ready!" to the attacker
		#Stances
		#Steady Stance
		if getEntitySkillsInHand(victim,"Steady Stance",2,1) is more than 0:
			if getEntityVarByName(victim,"SteadyStanceBuff") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"DEF",30)
				set {_debug} to setEntityVariableByName(victim,"SteadyStanceBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(victim,"DEF",-30)
				set {_debug} to clearEntityVariableByName(victim,"SteadyStanceBuff")
				send formatted "<bold>Steady Stance wore off!" to the victim
		#Swift Stance
		if getEntitySkillsInHand(victim,"Swift Stance",2,1) is more than 0:
			if getEntityVarByName(victim,"SwiftStanceBuff") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"SPD",30)
				set {_debug} to setEntityVariableByName(victim,"SwiftStanceBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(victim,"SPD",-30)
				set {_debug} to clearEntityVariableByName(victim,"SwiftStanceBuff")
				send formatted "<bold>Swift Stance wore off!" to the victim
		#Warding Stance
		if getEntitySkillsInHand(victim,"Warding Stance",2,1) is more than 0:
			if getEntityVarByName(victim,"WardingStanceBuff") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"RES",30)
				set {_debug} to setEntityVariableByName(victim,"WardingStanceBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(victim,"RES",-30)
				set {_debug} to clearEntityVariableByName(victim,"WardingStanceBuff")
				send formatted "<bold>Warding Stance wore off!" to the victim
		#Fierce Stance
		if getEntitySkillsInHand(victim,"Fierce Stance",2,1) is more than 0:
			if getEntityVarByName(victim,"FierceStanceBuff") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"STR",30)
				set {_debug} to setEntityVariableByName(victim,"FierceStanceBuff",1)
				wait 2 seconds
				set {_debug} to changeEntityStatBuff(victim,"STR",-30)
				set {_debug} to clearEntityVariableByName(victim,"FierceStanceBuff")
				send formatted "<bold>Fierce Stance wore off!" to the victim
		#Kindled-Fire Sword
		if the name of the attacker's tool is "<gold><bold>Kindled-Fire Sword":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if getEntityVarByName(attacker,"KFSwordBuff") is "-2":
					loop all entities in radius 15 of the attacker:
						if checkPlayerClass(attacker,getEntityVarByName(attacker,"class")) is checkPlayerClass(loop-entity,getEntityVarByName(loop-entity,"class")):
							set {_sameClassOK} to true
							exit 1 loop
					if {_sameClassOK} is true:
						set {_debug} to changeEntityStatBuff(attacker,"STR",30)
						set {_debug} to changeEntityStatBuff(attacker,"DEF",30)
						set {_debug} to setEntityVariableByName(attacker,"KFSwordBuff",1)
						wait 2 seconds
						set {_debug} to changeEntityStatBuff(attacker,"STR",-30)
						set {_debug} to changeEntityStatBuff(attacker,"DEF",-30)
						send formatted "<bold>Kindled-Fire Sword's bonus wore off!" to the attacker
		#Swift-Winds Lance
		else if the name of the attacker's tool is "<gold><bold>Swift-Winds Lance":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if getEntityVarByName(attacker,"SWLanceBuff") is "-2":
					loop all entities in radius 15 of the attacker:
						if checkPlayerClass(attacker,getEntityVarByName(attacker,"class")) is checkPlayerClass(loop-entity,getEntityVarByName(loop-entity,"class")):
							set {_sameClassOK} to true
							exit 1 loop
					if {_sameClassOK} is true:
						set {_debug} to changeEntityStatBuff(attacker,"STR",30)
						set {_debug} to changeEntityStatBuff(attacker,"SPD",30)
						set {_debug} to setEntityVariableByName(attacker,"SWLanceBuff",1)
						wait 2 seconds
						set {_debug} to changeEntityStatBuff(attacker,"STR",-30)
						set {_debug} to changeEntityStatBuff(attacker,"SPD",-30)
						send formatted "<bold>Swift-Winds Lance's bonus wore off!" to the attacker
		#Smokes
		else if the 3rd line of the lore of the attacker's tool contains "Smoke":
			loop all entities in radius 10 of the victim:
				if loop-entity is not the victim:
					if getEntityVarByName(loop-entity,"party") is not getEntityVarByName(attacker,"party"):
						#STR Smoke
						if the 3rd line of the lore of the attacker's tool contains "STR Smoke":
							if getEntityVarByName(loop-entity,"STRSmokeDebuff") is "-2":
								set {_debug} to changeEntityStatBuff(loop-entity,"STR",-20)
								set {_debug} to setEntityVariableByName(loop-entity,"STRSmokeDebuff",1)
								wait 2 seconds
								set {_debug} to changeEntityStatBuff(loop-entity,"STR",20)
								set {_debug} to clearEntityVariableByName(loop-entity,"STRSmokeDebuff")
						#DEF Smoke
						else if the 3rd line of the lore of the attacker's tool contains "DEF Smoke":
							if getEntityVarByName(loop-entity,"DEFSmokeDebuff") is "-2":
								set {_debug} to changeEntityStatBuff(loop-entity,"DEF",-20)
								set {_debug} to setEntityVariableByName(loop-entity,"DEFSmokeDebuff",1)
								wait 2 seconds
								set {_debug} to changeEntityStatBuff(loop-entity,"DEF",20)
								set {_debug} to clearEntityVariableByName(loop-entity,"DEFSmokeDebuff")
						#SPD Smoke
						else if the 3rd line of the lore of the attacker's tool contains "SPD Smoke":
							if getEntityVarByName(loop-entity,"SPDSmokeDebuff") is "-2":
								set {_debug} to changeEntityStatBuff(loop-entity,"SPD",-20)
								set {_debug} to setEntityVariableByName(loop-entity,"SPDSmokeDebuff",1)
								wait 2 seconds
								set {_debug} to changeEntityStatBuff(loop-entity,"SPD",20)
								set {_debug} to clearEntityVariableByName(loop-entity,"SPDSmokeDebuff")
						#MAG Smoke
						else if the 3rd line of the lore of the attacker's tool contains "MAG Smoke":
							if getEntityVarByName(loop-entity,"MAGSmokeDebuff") is "-2":
								set {_debug} to changeEntityStatBuff(loop-entity,"RES",-20)
								set {_debug} to setEntityVariableByName(loop-entity,"MAGSmokeDebuff",1)
								wait 2 seconds
								set {_debug} to changeEntityStatBuff(loop-entity,"RES",20)
								set {_debug} to clearEntityVariableByName(loop-entity,"MAGSmokeDebuff")
						#SKL Smoke
						else if the 3rd line of the lore of the attacker's tool contains "SKL Smoke":
							if getEntityVarByName(loop-entity,"SKLSmokeDebuff") is "-2":
								set {_debug} to changeEntityStatBuff(loop-entity,"SKL",-20)
								set {_debug} to setEntityVariableByName(loop-entity,"SKLSmokeDebuff",1)
								wait 2 seconds
								set {_debug} to changeEntityStatBuff(loop-entity,"SKL",20)
								set {_debug} to clearEntityVariableByName(loop-entity,"SKLSmokeDebuff")
		#Sabotage Attack
		if the 2nd line of the lore of the attacker's tool contains "Sabotage Attack":
			remove weakness from the victim
			apply weakness 2 to the victim for 5 seconds
		#Sabotage Speed
		else if the 2nd line of the lore of the attacker's tool contains "Sabotage Speed":
			remove slowness from the victim
			apply slowness 2 to the victim for 5 seconds
		#Poison Strike
		else if the 2nd line of the lore of the attacker's tool contains "Poison Strike":
			remove wither from the victim
			apply wither 3 to the victim for 5 seconds
		#Mystic Boost
		else if the 2nd line of the lore of the attacker's tool contains "Mystic Boost":
			heal the attacker by (attacker's maximum health * 0.075) hearts
		#Windsweep
		else if the 2nd line of the lore of the attacker's tool contains "Windsweep":
			if (getEntityStatTotal(attacker,"SPD")) is more than or equal to ((getEntityStatTotal(victim,"SPD")) + 15):
				remove weakness from the victim
				apply weakness 6 to the victim for 3 seconds
		#Boost Skills
		#Flame Boost
		if the 2nd line of the lore of the attacker's tool contains "Flame Boost":
			if (attacker's health - victim's health) is more than or equal to 6:
				if getEntityVarByName(attacker,"FlameBoostBuff") is "-2":
					set {_debug} to changeEntityStatBuff(attacker,"STR",15)
					set {_debug} to changeEntityStatBuff(attacker,"SPD",15)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",15)
					set {_debug} to setEntityVariableByName(attacker,"FlameBoostBuff",1)
					wait 1 seconds
					set {_debug} to changeEntityStatBuff(attacker,"STR",-15)
					set {_debug} to changeEntityStatBuff(attacker,"SPD",-15)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",-15)
					set {_debug} to clearEntityVariableByName(attacker,"FlameBoostBuff")
		#Earth Boost
		if the 2nd line of the lore of the victim's tool contains "Earth Boost":
			if (victim's health - attacker's health) is more than or equal to 6:
				if getEntityVarByName(victim,"EarthBoostBuff") is "-2":
					set {_debug} to changeEntityStatBuff(victim,"DEF",15)
					set {_debug} to changeEntityStatBuff(victim,"SPD",15)
					set {_debug} to changeEntityStatBuff(victim,"MAG",15)
					set {_debug} to setEntityVariableByName(victim,"EarthBoostBuff",1)
					wait 1 seconds
					set {_debug} to changeEntityStatBuff(victim,"DEF",-15)
					set {_debug} to changeEntityStatBuff(victim,"SPD",-15)
					set {_debug} to changeEntityStatBuff(victim,"MAG",-15)
					set {_debug} to clearEntityVariableByName(victim,"EarthBoostBuff")
		#Aqua Boost
		if the 2nd line of the lore of the attacker's tool contains "Aqua Boost":
			if (attacker's health - victim's health) is more than or equal to 6:
				if getEntityVarByName(attacker,"AquaBoostBuff") is "-2":
					set {_debug} to changeEntityStatBuff(attacker,"MAG",15)
					set {_debug} to changeEntityStatBuff(attacker,"SPD",15)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",15)
					set {_debug} to setEntityVariableByName(attacker,"AquaBoostBuff",1)
					wait 1 seconds
					set {_debug} to changeEntityStatBuff(attacker,"MAG",-15)
					set {_debug} to changeEntityStatBuff(attacker,"SPD",-15)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",-15)
					set {_debug} to clearEntityVariableByName(attacker,"AquaBoostBuff")
		#Other
		#Gae Bolg
		if the name of the victim's tool contains "<gold><bold>Gae Bolg":
			if victim's health is less than (victim's maximum health * 0.5):
				set {_vantageOK} to true
			if getEntityVarByName(attacker,"GaeBolgGuardDebuff") is "-2":
				set {_debug} to changeEntityStatBuff(attacker,"SKL",-50)
				set {_debug} to setEntityVariableByName(attacker,"GaeBolgGuardDebuff",1)
				wait 1 second
				set {_debug} to changeEntityStatBuff(attacker,"SKL",50)
				set {_debug} to clearEntityVariableByName(attacker,"GaeBolgGuardDebuff")
		#Durandal
		if the name of the attacker's tool contains "<gold><bold>Durandal":
			if the 6th line of the lore of the attacker's tool contains "<white><bold>Refined: Unique":
				if getEntityVarByName(attacker,"DurandalRefineBuff") is "-2":
					set {_debug} to changeEntityStatBuff(attacker,"STR",20)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",20)
					set {_debug} to setEntityVariableByName(attacker,"DurandalRefineBuff",1)
					wait 2 seconds
					set {_debug} to changeEntityStatBuff(attacker,"STR",-20)
					set {_debug} to changeEntityStatBuff(attacker,"SKL",-20)
					set {_debug} to clearEntityVariableByName(attacker,"DurandalRefineBuff")
		#Vantage (Perk)
		set {_sklcheck.%victim%} to checkSlots(victim,"Vantage")
		if victim's health is less than (victim's health * 0.5):
			if {_sklcheck.%victim%} is 1:
				set {_vantageOK} to true
		#Vantage
		if the 2nd line of the lore of the victim's tool contains "Vantage":
			set {_vantageOK} to true
		if {_vantageOK} is true:
			if the victim's health is less than (victim's maximum health * 0.75):
				if the name of the attacker's tool is not "<gold><bold>Swift-Winds Lance":
					if distance between the attacker and the victim is less than or equal to 3:
						set {_cc} to 1
					if {_cc} is 1:
						if victim's tool is not a bow:
							if victim's tool is not a book:
								if victim's tool is not blaze rod:
									make the victim damage the attacker by (damage * 0.5)
									push the attacker upwards at speed 0.25
									push the attacker backwards at speed 0.5
								else if the 1st line of the lore of the victim's tool contains "Close Counter":
									make the victim damage the attacker by (damage * 0.5)
									push the attacker upwards at speed 0.25
									push the attacker backwards at speed 0.5
							else if the 1st line of the lore of the victim's tool contains "Close Counter":
								make the victim damage the attacker by (damage * 0.5)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
						else if the 1st line of the lore of the victim's tool contains "Close Counter":
							make the victim damage the attacker by (damage * 0.5)
							push the attacker upwards at speed 0.25
							push the attacker backwards at speed 0.5
					else if victim's tool is bow:
						if victim's tool is book:
							if victim's tool is blaze rod:
								make the victim damage the attacker by (damage * 0.5)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
							else if the 1st line of the lore of the victim's tool contains "Distant Counter":
								make the victim damage the attacker by (damage * 0.5)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
						else if the 1st line of the lore of the victim's tool contains "Distant Counter":
							make the victim damage the attacker by (damage * 0.5)
							push the attacker upwards at speed 0.25
							push the attacker backwards at speed 0.5
					else if the 1st line of the lore of the victim's tool contains "Distant Counter":
						make the victim damage the attacker by (damage * 0.5)
						push the attacker upwards at speed 0.25
						push the attacker backwards at speed 0.5
					if attacker is not alive:
						cancel event

#In-Combat Skills	
on damage:
	if damage cause is attack:
		set {_doDamageCheck} to true
	else if projectile exists:
		set {_doDamageCheck} to true
	if {_doDamageCheck} is true:
		#Bonus Blade
		if the 2nd line of the lore of the attacker's tool contains "Bonus Blade":
			if getEntityVarByName(attacker,"BonusBladeBuff") is "-2":
				set {_attackerOldSTR} to getEntityStatBuff(victim,"STR")
				set {_attackerOldDEF} to getEntityStatBuff(victim,"DEF")
				set {_attackerOldSPD} to getEntityStatBuff(victim,"SPD")
				set {_attackerOldMAG} to getEntityStatBuff(victim,"RES")
				set {_attackerOldSKL} to getEntityStatBuff(victim,"SKL")
				set {_debug} to changeEntityStatBuff(victim,"STR",{_attackerOldSTR} * 1.5)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_attackerOldDEF} * 1.5)
				set {_debug} to changeEntityStatBuff(victim,"SPD",{_attackerOldSPD} * 1.5)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_attackerOldMAG} * 1.5)
				set {_debug} to changeEntityStatBuff(victim,"SKL",{_attackerOldSKL} * 1.5)
				set {_debug} to setEntityVariableByName(attacker,"BonusBladeBuff",1)
		if the 2nd line of the lore of the victim's tool contains "Bonus Blade":
			if getEntityVarByName(victim,"BonusBladeBuff") is "-2":
				set {_victimOldSTR} to getEntityStatBuff(attacker,"STR")
				set {_victimOldDEF} to getEntityStatBuff(attacker,"DEF")
				set {_victimOldSPD} to getEntityStatBuff(attacker,"SPD")
				set {_victimOldMAG} to getEntityStatBuff(attacker,"RES")
				set {_victimOldSKL} to getEntityStatBuff(attacker,"SKL")
				set {_debug} to changeEntityStatBuff(attacker,"STR",{_victimOldSTR} * 1.5)
				set {_debug} to changeEntityStatBuff(attacker,"DEF",{_victimOldDEF} * 1.5)
				set {_debug} to changeEntityStatBuff(attacker,"SPD",{_victimOldSPD} * 1.5)
				set {_debug} to changeEntityStatBuff(attacker,"RES",{_victimOldMAG} * 1.5)
				set {_debug} to changeEntityStatBuff(attacker,"SKL",{_victimOldSKL} * 1.5)
				set {_debug} to setEntityVariableByName(victim,"BonusBladeBuff",1)
		#Weapon Might Adjustments
		#Magic
		if projectile exists:
			#Tomes
			set {_tome} to metadata value "TomeEff" of the projectile
			if {_tome} is "Fire":
				add 8 to damage
				play 40 (lava pop with speed 1) at the victim
			else if {_tome} is "Elthunder":
				strike lightning effect at the victim
				add 10 to damage
			else if {_tome} is "Spark":
				play 20 (critical hit with speed 1) at the victim
				add 4.5 to damage
			else if {_tome} is "Excalibur":
				play 60 (light green wool break with speed 1) at the victim
				add 13 to damage
				if victim is not on ground:
					set damage to damage * 1.5
			else if {_tome} is "Dire Thunder":
				add 15 to damage
				set damage to damage * 2
			set {_isSpell} to metadata value "SPELL" of projectile
			if {_isSpell} is 1:
				set {_spelleffect1} to metadata value "SpellEffect1" of projectile
				set {_spelleffect2} to metadata value "SpellEffect2" of projectile
				set damage to 1
				set {_recoil} to 0
				set {_forloop} to 1
				set {_loc} to location of the victim
				loop 2 times:
					#Ember
					if {_spelleffect%{_forloop}%} is 1:
						ignite the victim
						play 5 (lava pop with speed 1) at the victim
						set damage to damage + 3
						add 0.5 to {_recoil}
					#Spark
					if {_spelleffect%{_forloop}%} is 2:
						play 10 (critical hit with speed 1) at the victim
						show firework's spark on the victim
						set damage to damage + 6
						add 1 to {_recoil}
					#Frost
					if {_spelleffect%{_forloop}%} is 3:
						play 5 (ice break with speed 1) at the victim
						apply slowness 1 to the victim for 5 seconds
						send formatted "<cyan><bold>%attacker% slowed you with a Frost spell!"
						set damage to damage + 2
					#Gust
					if {_spelleffect%{_forloop}%} is 4:
						play 5 (green wool break with speed 1) at the victim
						push the victim backwards at speed 1.5
						set damage to damage + 3
						add 0.5 to {_recoil}
					#Fire
					if {_spelleffect%{_forloop}%} is 5:
						play 15 (lava pop with speed 1) at the victim
						ignite the victim
						set damage to damage + 5
						add 1 to {_recoil}
						loop blocks in radius 1 of {_loc}:
							loop-block is air
							set loop-block to fire
					#Thunder
					if {_spelleffect%{_forloop}%} is 6:
						play 20 (critical hit with speed 1) at the victim
						show firework's spark on the victim
						set damage to damage + 8
						add 1.5 to {_recoil}
					#Hail
					if {_spelleffect%{_forloop}%} is 7:
						play 15 (ice break with speed 1) at the victim
						apply slowness 2 to the victim for 5 seconds
						send formatted "<cyan><bold>%attacker% slowed you with a Hail spell!"
						set damage to damage + 3
						add 1 to {_recoil}
					#Wind
					if {_spelleffect%{_forloop}%} is 8:
						play 15 (green wool break with speed 1) at the victim
						push the victim backwards at speed 2
						push the victim upwards at speed 0.5
						set damage to damage + 4.5
						add 1 to {_recoil}
					#Elfire
					if {_spelleffect%{_forloop}%} is 9:
						ignite the victim
						play 5 (mob spawner flames with speed 1) at the victim
						set damage to damage + 9
						add 1.5 to {_recoil}
						loop blocks in radius 2 of {_loc}:
							loop-block is air
							set loop-block to fire
					#Thoron
					if {_spelleffect%{_forloop}%} is 10:
						set damage to damage + 12
						strike lightning effect at the victim
						add 2.5 to {_recoil}
					#Blizzard
					if {_spelleffect%{_forloop}%} is 11:
						play 40 (ice break with speed 1) at the victim
						play 40 (snowball break with speed 1) at the victim
						apply slowness 3 to the victim for 5 seconds
						send formatted "<cyan><bold>%attacker% slowed you with a Blizzard spell!"
						set damage to damage + 4.5
						add 1.5 to {_recoil}
					#Tornado
					if {_spelleffect%{_forloop}%} is 12:
						play 40 (critical hit with speed 1) at the victim
						play 40 (green wool break with speed 1) at the victim
						push the victim backwards at speed 3
						push the victim upwards at speed 1.5
						set damage to damage + 5.5
						add 1.5 to {_recoil}
					#Bolganone
					if {_spelleffect%{_forloop}%} is 13:
						ignite the victim
						play 10 (mob spawner flames with speed 1) at the victim
						play 20 (lava pop with speed 1) at the victim
						set damage to damage + 13
						add 2.5 to {_recoil}
						loop blocks in radius 3 of {_loc}:
							loop-block is air
							set loop-block to fire
					#Aurora
					if {_spelleffect%{_forloop}%} is 14:
						show 80 (firework's spark with speed 1) at the victim
						set damage to damage + 14.5
						strike lightning effect at the victim
						strike lightning effect at the victim
						add 2.5 to {_recoil}
					#Nosferatu
					if {_spelleffect%{_forloop}%} is 15:
						show 60 (purple wool break with speed 1) at the victim
						show 60 (black wool break with speed 1) at the victim
						set damage to damage + 3.5
						heal the attacker by damage
						add 1.5 to {_recoil}
					#Spellblade
					if {_spelleffect%{_forloop}%} is 17:
						show 80 (light green wool break with speed 1) at the victim
						show 80 (critical hit with speed 1) at the victim
						set damage to damage + floor((({strbuff.%attacker%} / 2) + ({defbuff.%attacker%} / 2) + ({resbuff.%attacker%} / 2) + ({spdbuff.%attacker%} / 2) + ({sklbuff.%attacker%} / 2)) ^ 0.75)
						add damage / 2 to {_recoil}
					#Forseti
					if {_spelleffect%{_forloop}%} is 18:
						show 80 (light green wool break with speed 1) at the victim
						show 80 (critical hit with speed 1) at the victim
						push the victim backwards at speed 2
						set damage to damage + 7.5
						add 3.5 to {_recoil}
						if attacker's health is attacker's maximum health:
							set damage to damage * 2
							add 1.5 to {_recoil}
					#Naga
					if {_spelleffect%{_forloop}%} is 19:
						show 80 (yellow wool break with speed 1) at the victim
						show 80 (critical hit with speed 1) at the victim
						show firework's spark on the victim
						set damage to damage + 10
						if victim is ender dragon:
							set damage to damage * 1.5
							send formatted "<yellow>Dealt effective damage!" to the attacker
						else if {class.%victim%} is "Dragonborn":
							set damage to damage * 1.5
							send formatted "<yellow>Dealt effective damage!" to the attacker
						else if {class.%victim%} is "Manakete":
							set damage to damage * 1.5
							send formatted "<yellow>Dealt effective damage!" to the attacker
						else if {class.%victim%} is "Divine Dragon":
							set damage to damage * 1.5
							send formatted "<yellow>Dealt effective damage!" to the attacker
						else if the lore of the victim's tool contains "Loptous":
							set damage to damage * 1.5
							send formatted "<yellow>Dealt effective damage! (Loptous)" to the attacker
						add 3.5 to {_recoil}
					#Loptous
					if {_spelleffect%{_forloop}%} is 20:
						show 60 (obsidian break with speed 1) at the victim
						show 40 (smoke with speed 0) at the victim
						set damage to damage + 10
					#Stone
					if {_spelleffect%{_forloop}%} is 21:
						show 80 (stone break with speed 1) at the victim
						apply weakness 10 to the victim for 2 seconds
						apply slowness 10 to the victim for 2 seconds
						set damage to damage + 1.5
						add 5 to {_recoil}
					#Rescue:
					if {_spelleffect%{_forloop}%} is 22:
						show 80 (blue wool break with speed 1) at the victim
						set damage to 0
						teleport the victim to the attacker
						add 5 to {_recoil}
					#Slipgate
					if {_spelleffect%{_forloop}%} is 23:
						show 80 (blue wool break with speed 1) at the attacker
						set damage to 0
						teleport the attacker to the victim
						add 5 to {_recoil}
					#Silence
					if {_spelleffect%{_forloop}%} is 24:
						show 60 (chest break with speed 1) at the victim
						set damage to damage + 1.5
						apply weakness 4 to the victim for 4 seconds
						add 1.5 to {_recoil}
					#Thief
					if {_spelleffect%{_forloop}%} is 25:
						show 60 (cobweb break with speed 1) at the victim
						set damage to damage + 1.5
						chance of 35%:
							drop the victim's tool at the victim
							damage the victim's tool by 9999
					#Light
					if {_spelleffect%{_forloop}%} is 16:
						set damage to damage + 4.5
						if victim is monster:
							set damage to damage * 1.5
							play 80 (glowstone break with speed 0) at the victim
							add 3.5 to {_recoil}
						else:
							play 40 (glowstone break with speed 0) at the projectile
							add 2 to {_recoil}
					add 1 to {_forloop}
		#Weapon Ranks
		set {_tmp} to (5 - getEntityStat(attacker,"lvl"))
		if {_tmp} is less than 1:
			set {_tmp} to 1
		#Prevents mobs from getting weapon rank points, cleaning up the database.
		if attacker is a player:
			if the attacker's tool is a sword:
				if getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer is more than or equal to 15000:
					if getEntityArrayValueByName(attacker,"weapongrade","swords") is not "<gold><bold>S":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<gold><bold>---===Weapon Rank Up!===---" with subtitle "<gold><bold>Swords increased to S rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","swords","<gold><bold>S")
					set damage to damage + 5
				else if getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer is more than or equal to 7500:
					if getEntityArrayValueByName(attacker,"weapongrade","swords") is not "A":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Swords increased to A rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","swords","A")
					set damage to damage + 4
				else if getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer is more than or equal to 3750:
					if getEntityArrayValueByName(attacker,"weapongrade","swords") is not "B":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Swords increased to B rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","swords","B")
					set damage to damage + 3
				else if getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer is more than or equal to 1875:
					if getEntityArrayValueByName(attacker,"weapongrade","swords") is not "C":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Swords increased to C rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","swords","C")
					set damage to damage + 2
				else if getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer is more than or equal to 900:
					if getEntityArrayValueByName(attacker,"weapongrade","swords") is not "D":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Swords increased to D rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","swords","D")
					set damage to damage + 1
				#Swords Critical
				set {_weaponRank} to getEntityArrayValueByName(attacker,"weaponrank","swords") parsed as integer
				set {_critchance} to floor((getEntityStat(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") + {_weaponRank}) ^ 0.9)
				chance of {_critchance}%:
					set damage to damage * 2
					send formatted "<gold><bold>CRITICAL HIT!" to the attacker
					set {_randomcritperformed} to true
				if getEntityVarByName(attacker,"prfweapontype") parsed as integer is 0:
					set {_wrBonus} to floor(final damage * 2.35)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","swords",{_wrBonus})
				else:
					set {_wrBonus} to floor(final damage * 2)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","swords",{_wrBonus})
			#Axes WR
			else if the attacker's tool is an axe:
				if getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer is more than or equal to 15000:
					if getEntityArrayValueByName(attacker,"weapongrade","axes") is not "<gold><bold>S":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<gold><bold>---===Weapon Rank Up!===---" with subtitle "<gold><bold>Axes increased to S rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","axes","<gold><bold>S")
					set damage to damage + 5
				else if getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer is more than or equal to 7500:
					if getEntityArrayValueByName(attacker,"weapongrade","axes") is not "A":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Axes increased to A rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","axes","A")
					set damage to damage + 4
				else if getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer is more than or equal to 3750:
					if getEntityArrayValueByName(attacker,"weapongrade","axes") is not "B":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Axes increased to B rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","axes","B")
					set damage to damage + 3
				else if getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer is more than or equal to 1875:
					if getEntityArrayValueByName(attacker,"weapongrade","axes") is not "C":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Axes increased to C rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","axes","C")
					set damage to damage + 2
				else if getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer is more than or equal to 900:
					if getEntityArrayValueByName(attacker,"weapongrade","axes") is not "D":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Axes increased to D rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","axes","D")
					set damage to damage + 1
				#Axes Critical
				set {_weaponRank} to getEntityArrayValueByName(attacker,"weaponrank","axes") parsed as integer
				set {_critchance} to floor((getEntityStat(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") + {_weaponRank}) ^ 0.9)
				chance of {_critchance}%:
					set damage to damage * 2
					send formatted "<gold><bold>CRITICAL HIT!" to the attacker
					set {_randomcritperformed} to true
				if getEntityVarByName(attacker,"prfweapontype") parsed as integer is 1:
					set {_wrBonus} to floor(final damage * 2.35)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","axes",{_wrBonus})
				else:
					set {_wrBonus} to floor(final damage * 2)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","axes",{_wrBonus})
			#Lances WR
			else if the attacker's tool is a shovel:
				if getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer is more than or equal to 15000:
					if getEntityArrayValueByName(attacker,"weapongrade","lances") is not "<gold><bold>S":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<gold><bold>---===Weapon Rank Up!===---" with subtitle "<gold><bold>Lances increased to S rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","lances","<gold><bold>S")
					set damage to damage + 5
				else if getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer is more than or equal to 7500:
					if getEntityArrayValueByName(attacker,"weapongrade","lances") is not "A":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Lances increased to A rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","lances","A")
					set damage to damage + 4
				else if getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer is more than or equal to 3750:
					if getEntityArrayValueByName(attacker,"weapongrade","lances") is not "B":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Lances increased to B rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","lances","B")
					set damage to damage + 3
				else if getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer is more than or equal to 1875:
					if getEntityArrayValueByName(attacker,"weapongrade","lances") is not "C":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Lances increased to C rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","lances","C")
					set damage to damage + 2
				else if getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer is more than or equal to 900:
					if getEntityArrayValueByName(attacker,"weapongrade","lances") is not "D":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Lances increased to D rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","lances","D")
					set damage to damage + 1
				#Lances Critical
				set {_weaponRank} to getEntityArrayValueByName(attacker,"weaponrank","lances") parsed as integer
				set {_critchance} to floor((getEntityStat(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") + {_weaponRank}) ^ 0.9)
				chance of {_critchance}%:
					set damage to damage * 2
					send formatted "<gold><bold>CRITICAL HIT!" to the attacker
					set {_randomcritperformed} to true
				if getEntityVarByName(attacker,"prfweapontype") parsed as integer is 2:
					set {_wrBonus} to floor(final damage * 2.35)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","lances",{_wrBonus})
				else:
					set {_wrBonus} to floor(final damage * 2)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","lances",{_wrBonus})
			#Bows WR
			else if the attacker's tool is a bow:
				if getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer is more than or equal to 15000:
					if getEntityArrayValueByName(attacker,"weapongrade","bows") is not "<gold><bold>S":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<gold><bold>---===Weapon Rank Up!===---" with subtitle "<gold><bold>Bows increased to S rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","bows","<gold><bold>S")
					set damage to damage + 5
				else if getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer is more than or equal to 7500:
					if getEntityArrayValueByName(attacker,"weapongrade","bows") is not "A":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Bows increased to A rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","bows","A")
					set damage to damage + 4
				else if getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer is more than or equal to 3750:
					if getEntityArrayValueByName(attacker,"weapongrade","bows") is not "B":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Bows increased to B rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","bows","B")
					set damage to damage + 3
				else if getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer is more than or equal to 1875:
					if getEntityArrayValueByName(attacker,"weapongrade","bows") is not "C":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Bows increased to C rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","bows","C")
					set damage to damage + 2
				else if getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer is more than or equal to 900:
					if getEntityArrayValueByName(attacker,"weapongrade","bows") is not "D":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Bows increased to D rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","bows","D")
					set damage to damage + 1
				#Bows Critical
				set {_weaponRank} to getEntityArrayValueByName(attacker,"weaponrank","bows") parsed as integer
				set {_critchance} to floor((getEntityStat(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") + {_weaponRank}) ^ 0.9)
				chance of {_critchance}%:
					set damage to damage * 2
					send formatted "<gold><bold>CRITICAL HIT!" to the attacker
					set {_randomcritperformed} to true
				if getEntityVarByName(attacker,"prfweapontype") parsed as integer is 3:
					set {_wrBonus} to floor(final damage * 2.35)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","bows",{_wrBonus})
				else:
					set {_wrBonus} to floor(final damage * 2)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","bows",{_wrBonus})
			#Magic WR
			else if the name of the attacker's tool is "<yellow><bold>Magic Wand":
				if getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer is more than or equal to 15000:
					if getEntityArrayValueByName(attacker,"weapongrade","magic") is not "<gold><bold>S":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<gold><bold>---===Weapon Rank Up!===---" with subtitle "<gold><bold>Magic increased to S rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","magic","<gold><bold>S")
					set damage to damage + 5
				else if getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer is more than or equal to 7500:
					if getEntityArrayValueByName(attacker,"weapongrade","magic") is not "A":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Magic increased to A rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","magic","A")
					set damage to damage + 4
				else if getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer is more than or equal to 3750:
					if getEntityArrayValueByName(attacker,"weapongrade","magic") is not "B":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Magic increased to B rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","magic","B")
					set damage to damage + 3
				else if getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer is more than or equal to 1875:
					if getEntityArrayValueByName(attacker,"weapongrade","magic") is not "C":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Magic increased to C rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","magic","C")
					set damage to damage + 2
				else if getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer is more than or equal to 900:
					if getEntityArrayValueByName(attacker,"weapongrade","magic") is not "D":
						play sound "entity.player.levelup" with volume 0.5 and pitch 0.5 at attacker for attacker
						play 20 (smoke with speed 0) at the attacker
						send title "<bold>---===Weapon Rank Up!===---" with subtitle "<bold>Magic increased to D rank." to attacker for 2 seconds with fade in 0.25 seconds and fade out 0.25 seconds
						set {_debug} to setEntityArrayIndexAsTextByName(attacker,"weapongrade","magic","D")
					set damage to damage + 1
				#Magic Critical
				set {_weaponRank} to getEntityArrayValueByName(attacker,"weaponrank","magic") parsed as integer
				set {_critchance} to floor((getEntityStat(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") + {_weaponRank}) ^ 0.9)
				chance of {_critchance}%:
					set damage to damage * 2
					send formatted "<gold><bold>CRITICAL HIT!" to the attacker
					set {_randomcritperformed} to true
				if getEntityVarByName(attacker,"prfweapontype") parsed as integer is 2:
					set {_wrBonus} to floor(final damage * 2.35)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","magic",{_wrBonus})
				else:
					set {_wrBonus} to floor(final damage * 2)
					set {_debug} to changeEntityArrayIndexByName(attacker,"weaponrank","magic",{_wrBonus})
		#Mystletainn
		if the name of the attacker's tool contains "<gold><bold>Mystletainn":
			set damage to damage + 2
		#Folkvangr
		if the name of the attacker's tool contains "<gold><bold>Folkvangr":
			set damage to damage + 2
			loop all entities in radius 10 of the attacker:
				if loop-value is not the attacker:
					if getEntityVarByName(loop-value,"party") is getEntityVarByName(attacker,"party"):
						set damage to damage + 6
						exit 1 loop
		#Tyrfing
		if the name of the attacker's tool contains "<gold><bold>Tyrfing":
			set damage to damage + 2
		#Fensalir
		if the name of the attacker's tool contains "<gold><bold>Fensalir":
			set damage to damage + 2
			loop all entities in radius 10 of the attacker:
				if loop-value is not the attacker:
					if getEntityVarByName(loop-value,"party") is getEntityVarByName(attacker,"party"):
						set damage to damage + 6
						exit 1 loop
		#Durandal
		else if the name of the attacker's tool contains "<gold><bold>Durandal":
			set damage to damage + 1
			if damage is more than 4.5:
				set {_debug} to changeEntityVariableByName(attacker,"crushing",damage * 0.5)
		#KF-Sword
		if the name of the attacker's tool is "<gold><bold>Kindled-Fire Sword":
			if getEntityVarByName(attacker,"KFSwordBraveEffect") is "-2":
				make the attacker damage the victim by damage
				set {_debug} to setEntityVariableByName(attacker,"KFSwordBraveEffect",1)
			else:
				set {_debug} to clearEntityVariableByName(attacker,"KFSwordBraveEffect")
		#Regalia damage bonus
		if the name of the attacker's tool contains "<gold><bold>Mercurius":
			set damage to damage + 2
		else if the name of the attacker's tool contains "<gold><bold>Hauteclere":
			set damage to damage + 1
		else if the name of the attacker's tool contains "<gold><bold>Gradivus":
			set damage to damage + 2
		else if the name of the attacker's tool contains "<gold><bold>Basilikos":
			set damage to damage + 2.5
		#Cobalt Blade
		if the name of the attacker's tool is "<gold><bold>Cobalt Blade":
			set damage to damage + 5
			apply swiftness 2 to the attacker for 5 seconds
			apply strength 2 to the attacker for 5 seconds
			apply resistance 2 to the attacker for 5 seconds
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set damage to damage + 5
				ignite the victim
				if damage is more than 15:
					apply strength 4 to the attacker for 5 seconds
		#Binding Shield
		if the name of the attacker's offhand tool is "<gold><bold>Binding Shield":
			if victim is an ender dragon:
				set damage to damage * 2
				apply slowness 5 to the victim for 5 seconds
		#Binding Shield DEF
		if the name of the victim's offhand tool is "<gold><bold>Binding Shield":
			set damage to damage - 1.5
		#Fire Emblem
		if the name of the victim's offhand tool is "<gold><bold>Fire Emblem":
			set damage to damage - 1.5
		#Blessed Sword
		if the name of the victim's tool is "<gold><bold>Blessed Sword":
			set damage to damage - 1.5
		if the name of the attacker's tool is "<gold><bold>Blessed Sword":
			if victim is monster:
				set damage to damage * 2
		#Devil Axe
		if the name of the attacker's tool is "<gold><bold>Devil Axe":
			set damage to damage + 8
			if the attacker's health is more than 3:
				damage the attacker by 1.5 heart with fake cause poison
			else:
				set the attacker's health to 0.5
			apply wither 4 to the victim for 4 seconds
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set damage to damage + 12
				if the attacker's health is more than 6:
					damage the attacker by 3 heart with fake cause poison
				else:
					set the attacker's health to 0.5
		#Crusader's Lance
		if the name of the attacker's tool is "<gold><bold>Crusader's Lance":
			set damage to damage + 4
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if attacker's health is more than (attacker's maximum health * 0.8):
					set damage to damage * 1.5
		if the name of the victim's tool is "<gold><bold>Crusader's Lance":
			set damage to damage * 0.7
			if the 6th line of the lore of the victim's tool contains "Unique":
				set damage to damage * 0.8
		#Lunar Bow
		if the name of the attacker's tool is "<gold><bold>Lunar Bow":
			set damage to damage + 1.5
		#Bow of Aresha
		if the name of the attacker's tool is "<gold><bold>Bow of Aresha":
			if (getEntityStatTotal(attacker,"DEF")) - (getEntityStatTotal(victim,"DEF")) is more than or equal to 5:
				set {_areshabowbuff} to (((getEntityStatTotal(attacker,"DEF")) - (getEntityStatTotal(victim,"DEF")) - 5) * 5)
				if {_areshabowbuff} is more than 25:
					set {_areshabowbuff} to 25
				set {_debug} to changeEntityStatBuff(attacker,"STR",{_areshabowbuff})
				set {_debug} to changeEntityStatBuff(attacker,"DEF",{_areshabowbuff})
		#Balder Side Sword
		if the name of the attacker's tool is "<gold><bold>Balder Side Sword":
			set damage to damage + 1.5
		#Parrying
		if {BSS.%victim%} is true:
			cancel event
			set {BSSBonus.%victim%} to damage
			send formatted "<gold>Parried the enemy's attack!" to the victim
			send formatted "<red>The enemy parried your attack!" to the attacker
			clear {BSS.%victim%}
		if {BSSBonus.%attacker%} is set:
			set damage to damage + ({BSSBonus.%attacker%} * 2)
			clear {BSSBonus.%attacker%}
		#Ragnell
		if the name of the attacker's tool contains "<gold><bold>Ragnell":
			set damage to damage + 4
			if the 6th line of the lore of the attacker's tool contains "Unique":
				add 2 to damage
		if the name of the victim's tool is "<gold><bold>Ragnell":
			if the 6th line of the lore of the victim's tool contains "Unique":
				if (distance between attacker and victim) is more than 4:
					make the victim damage the attacker by (damage * 0.33)
		#Yamato
		if the name of the attacker's tool is "<gold><bold>Yamato":
			add 1.5 to damage
		#Meisterschwert
		if the name of the attacker's tool is "<gold><bold>Meisterschwert":
			if getEntityVarByName(attacker,"MeisterschwertDouble") is "-2":
				make the attacker damage the victim by damage
				set {_debug} to setEntityVariableByName(attacker,"MeisterschwertDouble",1)
			else:
				set {_debug} to clearEntityVariableByName(attacker,"MeisterschwertDouble")
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if (attacker's health + getEntityStat(attacker,"SPD") + getEntityStatBuff(attacker,"SPD")) is more than (victim's health + getEntityStat(victim,"SPD") + getEntityStatBuff(victim,"SPD")):
					set damage to damage * 2
		#Dire Thunder (Fallen Hero)
		if the name of the attacker's tool is "<gold><bold>Dire Thunder":
			set damage to damage * 2
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if (attacker's health + getEntityStat(attacker,"SPD") + getEntityStatBuff(attacker,"SPD")) is more than (victim's health + getEntityStat(victim,"SPD") + getEntityStatBuff(victim,"SPD")):
					set damage to damage * 2
		#DC Weapons
		if distance between victim and attacker is more than 4:
			if the name of the victim's tool is "<gold><bold>Tomahawk":
				make the victim damage the attacker by damage * 0.5
			else if the name of the victim's tool is "<gold><bold>Javelin":
				make the victim damage the attacker by damage * 0.5
			else if the name of the victim's tool is "<gold><bold>Tornado Blade":
				make the victim damage the attacker by damage * 0.5
		#Mystletainn
		if the name of the attacker's tool is "<gold><bold>Mystletainn":
			set damage to damage + 2
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if the attacker's health is more than 3:
					damage the attacker by 1.5 heart with fake cause attack
				else:
					set the attacker's health to 0.5
		#Tyrfing
		if the name of the victim's tool contains "<gold><bold>Tyrfing":
			if distance between attacker and victim is more than 4:
				set damage to damage * 0.5
		#Brave Bow
		if the name of the attacker's tool is "<gold><bold>Brave Bow":
			if getEntityVarByName(attacker,"GenBraveBowDouble") is "-2":
				set {_debug} to setEntityVariableByName(attacker,"GenBraveBowDouble",1)
				make the attacker damage the victim by damage
			else:
				set {_debug} to clearEntityVariableByName(attacker,"GenBraveBowDouble")
		#Guard Bow
		if the name of the victim's tool is "<gold><bold>Guard Bow":
			set damage to damage - 1.5
		#Rex Hasta
		if the name of the attacker's tool is "<gold><bold>Rex Hasta":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set damage to damage + 2
		#Rhomphaia
		if the name of the attacker's tool is "<gold><bold>Rhomphaia":
			set {_rhomphaiabonus} to getEntityStat(attacker,"SPD")
			add getEntityStatBuff(attacker,"SPD") to {_rhomphaiabonus}
			set damage to damage + ({_rhomphaiabonus} * 0.25)
		#Falchion
		if the name of the attacker's tool contains "<gold><bold>Falchion":
			set {_falchionTipper} to ((distance between attacker and victim) * 4)
			if {_falchionTipper} is more than 12:
				set {_falchionTipper} to 12
			add {_falchionTipper} to damage
			if the victim is ender dragon or enderman:
				set damage to {_damage} * 1.5
				send formatted "<light blue>Falchion dealt effective damage!" to attacker
				play sound "entity.generic.explode" with volume 0.5 and pitch 1.5 at victim for attacker
		#Binding Blade
		if the name of the victim's tool contains "<gold><bold>Binding Blade":
			if the 6th line of the lore of the victim's tool contains "<white><bold>Refined: Unique":
				set damage to damage * 0.77
				if the victim's health is more than (victim's maximum health * 0.7):
					if (distance between victim and attacker) is more than 4:
						if line 1 of the lore of the victim's tool contains "Distant Counter":
							set {_allowRiposte} to true
						else:
							set {_allowRiposte} to false
					else:
						set {_allowRiposte} to true
					if {_allowRiposte} is true:
						make the victim damage the attacker by (damage * 0.33)
						push the attacker upwards at speed 0.25
						push the attacker backwards at speed 0.5
						ignite the attacker
		if the name of the attacker's tool contains "<gold><bold>Binding Blade":
			set damage to damage + 2
			if the victim is ender dragon or enderman:
				set damage to damage * 1.5
				send formatted "<light blue>The Binding Blade dealt effective damage!" to attacker
				play sound "entity.generic.explode" with volume 0.5 and pitch 1.5 at victim for attacker
		#Parthia
		if the name of the attacker's tool contains "<gold><bold>Parthia":
			set damage to damage + 1.5
			if the 6th line of the lore of the attacker's tool contains "<white><bold>Refined: Unique":
				if (distance between victim and attacker) is more than 4:
					add 5 to damage
				apply weakness 2 to the victim for 4 seconds
				apply slowness 2 to the victim for 4 seconds
		if the name of the victim's tool contains "<gold><bold>Parthia":
			if (distance between victim and attacker) is more than 4:
				set damage to damage * 0.8
		#Armads
		if the name of the victim's tool contains "<gold><bold>Armads":
			if the 6th line of the lore of the victim's tool contains "<white><bold>Refined: Unique":
				if distance between attacker and victim is less than 4:
					make the victim damage the attacker by (damage * 0.33)
					push the attacker upwards at speed 0.25
					push the attacker backwards at speed 1
			if distance between attacker and victim is more than 4:
				set {_ArmadsDC} to true
			if {_ArmadsDC} is true:
				make the victim damage the attacker by (damage * 0.33)
		if the name of the attacker's tool contains "<gold><bold>Armads":
			set damage to damage + 3
		#Axtinguisher
		if the name of the attacker's tool contains "<gold><bold>Axtinguisher":
			if victim is burning:
				set damage to (damage * 1.5)
			else:
				set damage to (damage * 0.5)
		#Love is Blue
		if the name of the attacker's tool contains "<light blue><bold>Love is Blue":
			if damage cause is attack:
				set damage to damage+3
				make attacker execute command "/xp 5"
			else if projectile exists:
				set damage to damage-1
		#Scarborough Fair
		if the name of the attacker's tool contains "<light red><bold>Scarborough Fair":
			if damage cause is attack:
				set damage to damage+3
				make attacker execute command "/xp 5"
			else if projectile exists:
				set damage to damage-1
		#Crowbar
		if the name of the attacker's tool contains "<gold><bold>Crowbar":
			set damage to damage + 5
			set {_cbHitPitch} to a random number between 2 and 0.25
			play sound "entity.experience_orb.pickup" with volume 3 and pitch {_cbHitPitch} at victim for attacker
			play sound "entity.experience_orb.pickup" with volume 3 and pitch {_cbHitPitch} at victim for victim
		#Siegmund
		if the name of the attacker's tool contains "<gold><bold>Siegmund":
			set damage to damage + 2.5
			if the 6th line of the lore of the attacker's tool contains "Unique":
				loop all entities in radius 10 of the attacker:
					if getEntityVarByName(loop-entity,"party") is getEntityVarByName(attacker,"party"):
						add 1 to {_ally}
					else:
						add 1 to {_foe}
				if {_foe} is more than {_ally}:
					if getEntityVarByName(attacker,"SiegmundBraveEff") is "-2":
						make attacker damage the victim by damage
						set {_debug} to setEntityVariableByName(attacker,"SiegmundBraveEff",1)
						send formatted "<light blue>Siegmund's effect activated!" to the attacker
					else:
						set {_debug} to clearEntityVariableByName(attacker,"SiegmundBraveEff")
		#Sieglinde
		if the name of the attacker's tool contains "<gold><bold>Sieglinde":
			set damage to damage + 2.5
		#Light Brand
		if the name of the attacker's tool contains "<gold><bold>Light Brand":
			add 1 to damage
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set {_bonusdamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				add {_bonusdamage} to damage
		#Firearm Base Might Adjustment
		if projectile exists:
			#Super Shotgun Damage Bonus
			set {_sstest} to metadata value "SUPERSHOTGUN" of projectile
			if {_sstest} is 1:
				set damage to damage + 15
				play 20 (critical hit with speed 0) at the victim
				play 20 (lava drip with speed 0) at the victim
			set {_type} to metadata value "gunType" of projectile
			#Flintlock Pistol
			if {_type} is "1":
				set damage to damage + 5
			#Iron Musket
			else if {_type} is "2":
				set damage to damage + 7.5
			#Iron Pistol
			else if {_type} is "3":
				set damage to damage + 5
			#Redstone Rifle
			else if {_type} is "4":
				set damage to damage + 5.5
			#Redgrave E-45 Express
			else if {_type} is "5":
				set damage to damage + 6
			#Redgrave Coyote-Alpha
			else if {_type} is "6":
				add 6 to damage
				if (10 - (distance between the attacker and the victim)) is more than 0:
					add (6 + (2.25 * (10 - (distance between the attacker and the victim)))) to damage
			#Teufort Two-Timer
			else if {_type} is "7":
				if (7.5 - (distance between the attacker and the victim)) is more than 0:
					add (9 + (1.75 * (7.5 - (distance between the attacker and the victim)))) to damage
					set {_pushForce} to ((distance between the attacker and the victim) - 6)
					if {_pushForce} is less than 0:
						push the victim backwards at speed (-0.66 * {_pushForce})
						push the victim upwards at speed (-0.25 * {_pushForce})
			#Rocket Launcher
			else if {_type} is "8":
				add (14 + (1.66 * (12 - (distance between the attacker and the victim)))) to damage
				set {_pushForce} to ((distance between attacker and the victim) - 8)
				if {_pushForce} is less than 0:
					push the victim backwards at speed (-0.33 * {_pushForce})
					push the victim upwards at speed (-0.1 * {_pushForce})
				create safe explosion of force 1 at the victim
			#Minigun
			else if {_type} is "9":
				add (7 + ((7 - distance between the attacker and the victim) * 1.25)) to damage
				set {_pushForce} to ((distance between attacker and the victim) - 10)
				if {_pushforce} is less than 0:
					push the victim backwards at speed (-0.33 * {_pushforce})
			#Home-Made Heater
			else if {_type} is "10":
				add (16 + (1.33 * (distance between the attacker and the victim - 7.5))) to damage
				play 10 (redstone block break with speed 1) at the victim
			#Grenade Launcher
			else if {_type} is "11":
				add 30 to damage
				create safe explosion of force 1.3 at the victim
			#Hell's Spiral
			else if {_type} is "12":
				add (24 + (1.5 * (distance between the attacker and the victim - 3))) to damage
				play 10 (redstone block break with speed 1) at the victim
				play 10 (gold block break with speed 1) at the victim
				create safe explosion of force 1 at the victim
			#Vettik S-25
			else if {_type} is "13":
				add 7 to damage
				if (7 - distance between the attacker and the victim) is more than 0:
					add ((7 - distance between the attacker and the victim) * 1.15) to damage
				else:
					subtract ((distance between the attacker and the victim - 7) * 1.77) from damage
			#Vettik B-30AS
			else if {_type} is "14":
				add 10 to damage
				if (13 - distance between the attacker and the victim) is more than 0:
					add ((13 - distance between the attacker and the victim) * 1.15) to damage
				else:
					subtract ((distance between the attacker and the victim - 13) * 1.33) from damage
			#Vettik A-10 Enforcer
			else if {_type} is "15":
				add (10 + ((distance between the attacker and the victim - 4) * 1.33)) to damage
			#Redgrave Kalina
			else if {_type} is "16":
				add (22 + (distance between the attacker and the victim * 1.66)) to damage
			#Redgrave Ifrit
			else if {_type} is "17":
				add 18 to damage
				if (9 - distance between the attacker and the victim) is more than 0:
					add (1 - ((9 - distance between the attacker and the victim) * -1)) to damage
				else:
					subtract ((distance between the attacker and the victim - 9) * 1.33) from damage
			#PERK: True Shot
			set {_checkSlots} to checkSlots(attacker,"True Shot")
			if {_checkSlots} is 1:
				if (distance between the attacker and the victim) is more than 4:
					add ((distance between the attacker and the victim - 4) * 1.5) to damage
		#Adaptive Damage Checks & Magical Denotation
		if the lore of the attacker's tool contains "Spell 1:":
			set {_magical} to 1
		else if the lore of the attacker's tool contains "Spell 2:":
			set {_magical} to 1
		if the 1st line of the lore of the attacker's tool contains "Sorcery Aura":
			set {_magical} to 1
		if the 1st line of the lore of the attacker's offhand tool contains "Sorcery Aura":
			if the 2nd line of the lore of the attacker's offhand tool contains "Skill Greed":
				set {_magical} to 1
		if {class.%attacker%} is "Dragonborn":
			set {_magical} to 1
		else if {class.%attacker%} is "Manakete":
			set {_magical} to 1
		else if {class.%attacker%} is "Divine Dragon":
			set {_magical} to 1
		else if {lb_ranged.%attacker%} is true:
			set {_magical} to 1
			clear {lb_ranged.%attacker%}
		#Blaze/Ghast/Enderman/Ender Dragon/Creeper/Husk/Stray deal magical damage
		if damage cause is entity explosion:
			set {_magical} to 1
		else if attacker is blaze:
			set {_magical} to 1
		else if attacker is ghast:
			set {_magical} to 1
		else if attacker is enderman:
			set {_magical} to 1
		else if attacker is ender dragon:
			set {_magical} to 1
		else if "%attacker's entity type%" is "husk":
			set {_magical} to 1
		else if attacker is stray:
			set {_magical} to 1
		#Lunar Bow Adaptive Check
		if the name of the attacker's tool is "<gold><bold>Lunar Bow":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				if (getEntityStatTotal(victim,"RES")) is less than (getEntityStatTotal(victim,"DEF")):
					set {_magical} to 1
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
		#Light Brand Adaptive Check
		if the name of the attacker's tool is "<gold><bold>Light Brand":
			if (getEntityStatTotal(victim,"RES")) is less than (getEntityStatTotal(victim,"DEF")):
				set {_LBOldRes} to getEntityStat(attacker,"RES")
				set {_LBOldResBuff} to getEntityStatBuff(attacker,"RES")
				#Sets the attacker's RES stat to their STR for this damage check.
				set {_debug} to setEntityVariableByName(attacker,"RES",getEntityStat(attacker,"STR"))
				set {_debug} to setEntityVariableByName(attacker,"RESBuff",getEntityStatBuff(attacker,"STR"))
				set {_magical} to 1
		#Gale Soul Adaptive Check
		if {dSoulActive.%attacker%} is "Gale Soul":
			#Change damage type over to physical if foe's RES > foe's DEF
			if (getEntityStatTotal(victim,"RES")) is more than (getEntityStatTotal(victim,"DEF")):
				set {_magical} to 0
				#Inverse of Light Brand, causes magical attacks to calculate as physical damage.
				set {_GSOldSTR} to getEntityStat(attacker,"STR")
				set {_GSOldSTRBuff} to getEntityStatBuff(attacker,"STR")
				#Sets the attacker's RES stat to their STR for this damage check.
				set {_debug} to setEntityVariableByName(attacker,"STR",getEntityStat(attacker,"RES"))
				set {_debug} to setEntityVariableByName(attacker,"STRBuff",getEntityStatBuff(attacker,"RES"))
		#Helm Splitter (Global, no skill needed)
		if attacker is player:
			if attacker is not on ground:
				if attacker is sneaking:
					add 3 to damage
					add getHelmetDamageResistance(victim) to damage
					push the attacker downwards at speed 2
					push the victim downwards at speed 2
					play sound "entity.generic.explode" with volume 1 and pitch 1.5 at the attacker for the attacker
					set {inHangtime.%attacker%} to true
		#Refines
		if the 6th line of the lore of the attacker's tool contains "Reinforced":
			set damage to damage + 1.5
		if the 6th line of the lore of the victim's tool contains "Warding":
			if damage cause is attack:
				set damage to damage - 1.5
			else if projectile exists:
				set damage to damage - 1.5
		if the 6th line of the lore of the attacker's tool contains "Crushing":
			if damage is more than 4.5:
				set {_debug} to changeEntityVariableByName(attacker,"crushing",damage * 0.33)
				if getEntityVarByName(attacker,"crushing") parsed as integer is more than 33:
					set {_debug} to setEntityVariableByName(attacker,"crushing",33)
				send formatted "<light yellow>+%(damage / 2)%pct Special Chance" to the attacker
		if the 6th line of the lore of the attacker's tool contains "Piercing":
			set {_bypassdamage.%attacker%} to damage
			cancel event
			damage the victim by {_bypassdamage.%attacker%} * 0.75 with fake cause wither
			push the victim backwards at speed 0.75
			damage the attacker's tool by 1
		#Basilikos Refine
		if the name of the attacker's tool contains "<gold><bold>Basilikos":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set damage to damage * 1.5
		else if the name of the victim's tool contains "<gold><bold>Basilikos":
			if the 6th line of the lore of the attacker's tool contains "Unique":
				set damage to damage * 1.5
		#Dragon Soul Effects
		#Gale Soul Sweep Effect
		if {dSoulActive.%attacker%} is "Gale Soul":
			if attacker's health is more than or equal to victim's health:
				if projectile exists:
					add 6 to damage
					set {_GSDamage} to getHelmetDamageResistance(victim)
					add getChestplateDamageResistance(victim) to {_GSdamage}
					add getLeggingsDamageResistance(victim) to {_GSdamage}
					add getBootsDamageResistance(victim) to {_GSdamage}
					add {_GSdamage} to damage
					ignite the victim
		#Flame Soul Brave Effect
		else if {dSoulActive.%attacker%} is "Flame Soul":
			if attacker's health is more than or equal to (attacker's maximum health * 0.5):
				if attacker's tool is not a bow:
					if attacker's tool is not a book:
						if attacker's tool is not a blaze rod:
							if {t_FlameSoulBraveEff.%attacker%} is not set:
								set {t_FlameSoulBraveEff.%attacker%} to true
								make the attacker damage the victim by damage
								apply strength 5 to the attacker for 4 seconds
							else:
								clear {t_FlameSoulBraveEff.%attacker%}
		#Aqua Soul Retribution Effect
		else if {dSoulActive.%attacker%} is "Aqua Soul":
			if attacker's health is less than or equal to (attacker's maximum health * 0.7):
				add ((attacker's maximum health - attacker's health) * 0.25) to damage
		#Agua Soul damage reduction effect
		if {dSoulActive.%victim%} is "Aqual Soul":
			if victim's health is less than or equal to (victim's maximum health * 0.7):
				set damage to damage * (1 / ((victim's maximum health - victim's health) ^ 0.5))
		#Focus Loss
		#STR Focus
		if getEntityVarByName(victim,"strfocusbuff") is not "-2":
			set {_strfocus} to getEntityVarByName(victim,"strfocusbuff") parsed as integer
			set {_debug} to changeEntityStatBuff(victim,"STR",{_strfocus} * -1)
			set {_debug} to clearEntityVariableByName(victim,"strfocusbuff")
			send "<light red>Your STR Focus buff was lost!" to the victim
		#DEF Focus
		if getEntityVarByName(victim,"deffocusbuff") is not "-2":
			set {_focus} to getEntityVarByName(victim,"deffocusbuff") parsed as integer
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_focus} * -1)
			set {_debug} to clearEntityVariableByName(victim,"deffocusbuff")
			send "<light red>Your DEF Focus buff was lost!" to the victim
		#SPD Focus
		if getEntityVarByName(victim,"spdfocusbuff") is not "-2":
			set {_focus} to getEntityVarByName(victim,"spdfocusbuff") parsed as integer
			set {_debug} to changeEntityStatBuff(victim,"SPD",{_focus} * -1)
			set {_debug} to clearEntityVariableByName(victim,"spdfocusbuff")
			send "<light red>Your SPD Focus buff was lost!" to the victim
		#SKL Focus
		if getEntityVarByName(victim,"sklfocusbuff") is not "-2":
			set {_focus} to getEntityVarByName(victim,"sklfocusbuff") parsed as integer
			set {_debug} to changeEntityStatBuff(victim,"SKL",{_focus} * -1)
			set {_debug} to clearEntityVariableByName(victim,"sklfocusbuff")
			send "<light red>Your SKL Focus buff was lost!" to the victim
		#MAG Focus
		if getEntityVarByName(victim,"magfocusbuff") is not "-2":
			set {_focus} to getEntityVarByName(victim,"resfocusbuff") parsed as integer
			set {_debug} to changeEntityStatBuff(victim,"RES",{_focus} * -1)
			set {_debug} to clearEntityVariableByName(victim,"magfocusbuff")
			send "<light red>Your MAG Focus buff was lost!" to the victim
		#Closes
		if damage cause is attack:
			if distance between attacker and victim is less than or equal to 4:
				set {_CD} to true
			if {_CD} is true:
				#SHIELD - Dull Close
				if the lore of victim's offhand tool contains "Dull Close":
					set damage to damage * 0.66
				#Close Defence
				if getEntitySkillsInHand(victim,"Close Defence",2,1) is more than 0:
					set damage to damage * 0.44
					show 10 (iron block break with speed 1) at the victim
				#Close Counter
				if getEntitySkillsInHand(victim,"Close Counter",2,1) is more than 0:
					if the name of the attacker's tool is not "<gold><bold>Swift-Winds Lance":
						make the victim damage the attacker by damage / 2
						push the attacker backwards at speed 0.75
						show 10 (redstone block break with speed 1) at the victim
						damage the victim's tool by 2
				#Fujin Yumi CC
				if the name of the victim's tool is "Fujin Yumi":
					if the name of the attacker's tool is not "<gold><bold>Swift-Winds Lance":
						make the victim damage the attacker by damage / 2
						push the attacker backwards at speed 0.75
						show 10 (redstone block break with speed 1) at the victim
						damage the victim's tool by 2
		#Distants
		else if projectile exists:
			if distance between attacker and victim is more than or equal to 3:
				set {_NoDC} to true
			if {_noDC} is set:
				#SHIELD - Dull Ranged
				if the lore of the victim's offhand tool contains "Dull Ranged":
					set damage to damage * 0.66
				#Distant Defence
				if getEntitySkillsInHand(victim,"Distant Defence",2,1) is more than 0:
					set damage to damage * 0.44
					show magical critical hit on the victim
				#Distant Counter
				if getEntitySkillsInHand(victim,"Distant Counter",2,1) is more than 0:
					make the victim damage the attacker by damage / 2
					show 10 (redstone block break with speed 1) at the victim
					damage the victim's tool by 2
		#Armour Smasher
		if getEntitySkillsInHand(attacker,"Armour Smasher",2,1) is more than 0:
			set {_bonusdamage} to getHelmetDamageResistance(victim)
			add getChestplateDamageResistance(victim) to {_bonusdamage}
			add getLeggingsDamageResistance(victim) to {_bonusdamage}
			add getBootsDamageResistance(victim) to {_bonusdamage}
			add {_bonusdamage} * 1.5 to damage
		#Brash Assault
		if the 2nd line of the lore of the attacker's tool contains "Brash Assault":
			if the attacker's health is less than (attacker's maximum health * 0.5):
				if getEntityVarByName(attacker,"BrashAssaultBonus") is not "-2":
					set damage to damage * 2
					apply strength 4 to the attacker for 3 seconds
					set {_debug} to clearEntityVariableByName(attacker,"BrashAssaultBonus")
				else:
					set {_debug} to setEntityVariableByName(attacker,"BrashAssaultBonus",1)
		#Blades
		#Flashing Blade
		if getEntitySkillsInHand(attacker,"Flashing Blade",2,1) is more than 0:
			set {_bonus} to (((getEntityStatTotal(attacker,"SPD")) - (getEntityStatTotal(victim,"SPD"))) / 2)
			if {_bonus} is less than 0:
				set {_bonus} to 0
			else if {_bonus} is more than 14:
				set {_bonus} to 14
			set damage to damage + {_bonus}
			set {_debug} to changeEntityStatBuff(attacker,"crushing",{_bonus})
		#Heavy Blade
		else if getEntitySkillsInHand(attacker,"Heavy Blade",2,1) is more than 0:
			set {_bonus} to (((getEntityStatTotal(attacker,"STR")) - (getEntityStatTotal(victim,"STR"))) / 2)
			if {_bonus} is less than 0:
				set {_bonus} to 0
			else if {_bonus} is more than 14:
				set {_bonus} to 14
			set damage to damage + {_bonus}
			add {_bonus} to {crushing.%attacker%}
		#Desperation
		else if the 2nd line of the lore of the attacker's tool contains "Desperation":
			if the attacker's health is less than or equal to (attacker's maximum health * 0.5):
				if getEntityVarByName(attacker,"DesperationBraveEffect") is "-2":
					set {_debug} to setEntityVariableByName(attacker,"DesperationBraveEffect",1)
					make the attacker damage the victim by damage
					push the victim upwards at speed 0.25
					push the victim backwards at speed 1
					send formatted "<light blue>Desperation activated!" to the attacker
				else:
					set {_debug} to clearEntityVariableByName(attacker,"DesperationBraveEffect")
		#Riposte
		if the 2nd line of the lore of the victim's tool contains "Riposte":
			if the victim's health is more than (victim's maximum health * 0.8):
				if name of the attacker's tool is not "<gold><bold>Swift-Winds Lance":
					loop all monsters in radius 4 of the victim:
						if loop-entity is the attacker:
							set {_cc} to true
							exit 1 loop
					loop all players in radius 4 of the victim:
						if loop-entity is the attacker:
							set {_cc} to true
							exit 1 loop
					if {_cc} is 1:
						if victim's tool is not a bow:
							if victim's tool is not a book:
								if victim's tool is not blaze rod:
									make the victim damage the attacker by (damage * 0.33)
									push the attacker upwards at speed 0.25
									push the attacker backwards at speed 0.5
								else if the 1st line of the lore of the victim's tool contains "Close Counter":
									make the victim damage the attacker by (damage * 0.33)
									push the attacker upwards at speed 0.25
									push the attacker backwards at speed 0.5
							else if the 1st line of the lore of the victim's tool contains "Close Counter":
								make the victim damage the attacker by (damage * 0.33)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
						else if the 1st line of the lore of the victim's tool contains "Close Counter":
							damage the attacker by damage * 0.50
							push the attacker upwards at speed 0.25
							push the attacker backwards at speed 0.5
					else if victim's tool is bow:
						if victim's tool is book:
							if victim's tool is blaze rod:
								make the victim damage the attacker by (damage * 0.33)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
							else if the 1st line of the lore of the victim's tool contains "Distant Counter":
								make the victim damage the attacker by (damage * 0.33)
								push the attacker upwards at speed 0.25
								push the attacker backwards at speed 0.5
						else if the 1st line of the lore of the victim's tool contains "Distant Counter":
							make the victim damage the attacker by (damage * 0.33)
							push the attacker upwards at speed 0.25
							push the attacker backwards at speed 0.5
					else if the 1st line of the lore of the victim's tool contains "Distant Counter":
						make the victim damage the attacker by (damage * 0.33)
						push the attacker upwards at speed 0.25
						push the attacker backwards at speed 0.5
		#Brave Blade
		if the 2nd line of the lore of the attacker's tool contains "Brave Blade":
			if getEntityVarByName(attacker,"BraveBladeEffect") is "-2":
				set {_debug} to setEntityVariableByName(attacker,"BraveBladeEffect",1)
				make the attacker damage the victim by (damage - 1)
			else:
				set {_debug} to clearEntityVariableByName(attacker,"BraveBladeEffect")
		#Sabotage Defense
		if the 2nd line of the lore of the attacker's tool contains "Sabotage Defense":
			set damage to damage * 1.15
		#Life and Death
		if getEntitySkillsInHand(attacker,"Life and Death",2,1) is more than 0:
			set damage to damage * 1.5
		#Life and Death - Victim
		if getEntitySkillsInHand(victim,"Life and Death",2,1) is more than 0:
			set damage to damage * 1.5
		#PERK - Wolf Fangs
		set {_checkSlots} to checkSlots(attacker,"Wolf Fangs")
		if {_checkSlots} is 1:
			set {_wfDamageBonus} to (getEntityStatTotal(victim,"STR")) - (getEntityStatTotal(attacker,"STR"))
			if {_wfDamageBonus} is more than 5:
				if {_wfDamageBonus} is more than 25:
					set {_wfDamageBonus} to 25
				add ({_wfDamageBonus} - 5) to damage
		#PERK - Overwhelm
		set {_checkSlots} to checkSlots(attacker,"Overwhelm")
		if {_checkSlots} is 1:
			add ((getEntityStatTotal(attacker,"STR")) * 0.25) to damage
		#Fury
		if getEntitySkillsInHand(attacker,"Fury",2,1) is more than 0:
			set damage to damage + 3
			set {_recoil} to floor(attacker's maximum health * 0.08)
			if the attacker's health is more than {_recoil}:
				damage the attacker by {_recoil} hearts
			else:
				set the attacker's health to 0.5
		#Sword Mastery
		set {_sklcheck} to checkSlots(attacker,"Sword Specialist")
		if {_sklcheck} is 1:
			if the attacker's tool is a sword:
				set damage to damage * 1.25
				chance of (getEntityStatBuff(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") ^ 0.5)%:
					set damage to damage * 1.75
					send formatted "<cyan><bold>Specialist Crit!"
		#Axe Mastery
		set {_sklcheck} to checkSlots(attacker,"Axe Specialist")
		if {_sklcheck} is 1:
			if the attacker's tool is an axe:
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set damage to damage + ({_bonusdamage} / 2)
				chance of (getEntityStatBuff(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") ^ 0.5)%:
					set damage to damage * 1.75
					send formatted "<cyan><bold>Specialist Crit!"
		#Bow Mastery
		set {_sklcheck} to checkSlots(attacker,"Ranged Specialist")
		if {_sklcheck} is 1:
			if the attacker's tool is a bow:
				drop 1 arrow at the victim
				remove slowness from the victim
				apply slowness 1 to the victim for 7 seconds
				chance of (getEntityStatBuff(attacker,"SKL") + getEntityStatBuff(attacker,"SKL") ^ 0.5)%:
					set damage to damage * 1.75
					send formatted "<cyan><bold>Specialist Crit!"
		#Double Lion
		set {_sklcheck.%attacker%} to checkSlots(attacker,"Double Lion")
		if {_sklcheck.%attacker%} is 1:
			if attacker's health is attacker's maximum health:
				if getEntityVarByName(attacker,"DoubleLionBraveEffect") is "-2":
					set {_debug} to setEntityVariableByName(attacker,"DoubleLionBraveEffect",1)
					damage the attacker by 1 with fake cause void
					make the attacker damage the victim by damage
					push the victim upwards at speed 0.25
					push the victim backwards at speed 1
				else:
					set {_debug} to clearEntityVariableByName(attacker,"DoubleLionBraveEffect")
		#Heavy Draw
		set {_sklcheck} to checkSlots(attacker,"Heavy Draw")
		if {_sklcheck} is 1:
			if projectile exists:
				set damage to damage + 1.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set damage to damage + {_bonusdamage}
		#Crusader's Charge
		set {_sklcheck.%victim%} to checkSlots(victim,"Crusader's Charge")
		if {_sklcheck.%victim%} is 1:
			if (attacker's health >= attacker's maximum health * 0.7):
				if getEntityVarByName(attacker,"CrusadersChargeBrave") is "-2":
					loop all entities in radius 10 of the attacker:
						if getEntityVarByName(attacker,"party") is getEntityVarByName(loop-entity,"party"):
							set {_playerClass} to checkPlayerClass(attacker,"Cavalier")
							set {_allyClass} to checkPlayerClass(loop-entity,"Cavalier")
							if {_playerClass} is 1:
								if {_allyClass} is 1:
									set {_debug} to setEntityVariableByName(attacker,"CrusadersChargeBrave",1)
									make the attacker damage the victim by damage
				else:
					set {_debug} to clearEntityVariableByName(attacker,"CrusadersChargeBrave")
		#Distant Defence
		set {_sklcheck} to checkSlots(victim,"Distant Defence")
		if {_sklcheck} is 1:
			loop all monsters in radius 4 of the victim:
				if loop-entity is the attacker:
					set {_DD} to true
					exit 1 loop
			loop all players in radius 4 of the victim:
				if loop-entity is the attacker:
					set {_DD} to true
					exit 1 loop
			if {_DD} is not set:
				set damage to damage * 0.5
		#Mystic Boost
		set {_skl} to checkSlots(attacker,"Mystic Boost")
		if {_skl} is 1:
			heal the attacker by (attacker's maximum health * 0.075) hearts
		#Capture
		if {capture.%attacker%} is set:
			if the 4th line of the lore of the attacker's tool contains "Capture":
				set damage to damage * 0.5
		#Crushing Offense
		set {_sklcheck} to checkSlots(attacker,"Crushing Offense")
		if {_sklcheck} is 1:
			if damage is more than 7:
				set {_debug} to changeEntityStatBuff(attacker,"crushing",damage * 0.33)
				send formatted "<light yellow>+%(damage / 2)% SKL" to the attacker
		#Thracian Difficulty
		if {thraciamode.%attacker%} is 1:
			set {_th} to 1
		else if {thraciamode.%victim%} is 1:
			set {_th} to 1
		if {_th} is 1:
			set {_foeAvoid} to ((getEntityStatTotal(victim,"SPD")) + (getEntityStatTotal(victim,"SKL")))
			if {_foeAvoid} is not set:
				set {_foeAvoid} to 75
			else if {_foeAvoid} is less than 1:
				set {_foeAvoid} to 75
			set {_playerAvoid} to ((getEntityStatTotal(attacker,"SPD")) + (getEntityStatTotal(attacker,"SKL")))
			set {_Avoid} to ({_foeAvoid} - {_playerAvoid})
			if {_Avoid} is less than 0:
				set {_Avoid} to 0
			set {_1RN} to a random integer between 0 and {_Avoid}
			set {_2RN} to a random integer between 0 and {_Avoid}
			set {_trueHit} to (({_1RN} + {_2RN}) / 2)
			chance of {_trueHit}%:
				cancel event
				send formatted "<light red>Your attack missed!" to the attacker
				play 20 (cloud with speed 1) at the victim
				send formatted "<light blue>Dodged the opponent's attack!" to the victim
		#Drag Back
		if the 4th line of the lore of attacker's tool contains "Drag Back":
			push the attacker backwards at speed 1
			push the victim forwards at speed 1
		#Ethreal Grip
		if the 4th line of the lore of attacker's tool contains "Ethreal Grip":
			set damage to damage * 0.5
			apply resistance 4 to the attacker for 1 second
			push victim (direction from victim to location of attacker) at speed 4
		#Suspend
		else if the 4th line of the lore of attacker's tool contains "Suspend":
			set {_magnitude} to (y of victim's velocity)
			if {_magnitude} is less than 0:
				set {_magnitude} to {_magnitude} * -1.05
			push victim upwards at speed (({_magnitude} / 4) + 1)
		#Hit and Run
		if the 4th line of the lore of attacker's tool contains "Hit and Run":
			push the attacker backwards at speed 1.5
			damage the attacker's tool by 1
		#Guard
		set {_GuardEffect} to checkSlots(victim,"Guard")
		if {_GuardEffect} is 1:
			set {_debug} to changeEntityStatBuff(attacker,"SKL",-50)
		#Rings
		loop all items in attacker's inventory:
			if the name of the loop-item contains "Pursuit Ring":
				if attacker's health is more than (attacker's maximum health * 0.5):
					set damage to damage * 1.5
					push the victim backwards at speed 1
					exit 1 loop
			else if the name of the loop-item contains "Prayer Ring":
				if attacker's health is less than or equal to (attacker's maximum health * 0.5):
					set damage to damage * 2
					send formatted "<light blue>The Prayer Ring caused a Critical Hit!" to the attacker
					send formatted "<light red>The Prayer Ring caused a Critical Hit!" to the victim
					exit 1 loop
		#Gravity
		if the 3rd line of the lore of the attacker's tool contains "Gravity":
			loop all monsters in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							if loop-entity is not the victim:
								remove levitation from the loop-entity
								apply levitation 2 to loop-entity for 3 seconds
			loop all players in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							if loop-entity is not the victim:
								remove levitation from the loop-entity
								apply levitation 2 to loop-entity for 3 seconds
		#Fear
		if the 3rd line of the lore of the attacker's tool contains "Fear":
			loop all monsters in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							apply weakness 2 to loop-entity for 3 seconds
			loop all players in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							apply weakness 2 to loop-entity for 3 seconds
		#Restrict
		if the 3rd line of the lore of the attacker's tool contains "Restrict":
			loop all monsters in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							apply slowness 2 to loop-entity for 3 seconds
			loop all players in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							apply slowness 2 to loop-entity for 3 seconds
		#Blowback
		if the 3rd line of the lore of the attacker's tool contains "Blowback":
			loop all monsters in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							push the loop-entity upwards at speed 0.75
							push the loop-entity backwards at speed 0.75
			loop all players in radius 7 of the victim:
				if loop-entity is alive:
					if {party.%victim%} is not {party.%attacker%}:
						if loop-entity is not the attacker:
							push the loop-entity upwards at speed 0.75
							push the loop-entity backwards at speed 0.75
		#Astra
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Astra":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.65,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage * 3
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Astra was activated!" to attacker
				play 60 (nether portal break with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.5 and pitch 1 at victim for attacker
		#Glimmer
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Glimmer":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.765,70)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage * 1.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Glimmer was activated!" to attacker
				play 30 (nether portal break with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Blazing Light
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Blazing Light":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set damage to damage * 1.25
				loop all monsters in radius 7 of the victim:
					if loop-monster is not the attacker:
						send formatted "<gold>%loop-entity% hit for %damage%!" to the attacker
						strike lightning effect at the loop-monster
						damage the loop-entity by damage
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Blazing Light was activated!" to attacker
				play 60 (firework spark with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Growing Light
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Growing Light":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				loop all monsters in radius 14 of the victim:
					if loop-monster is not the attacker:
						send formatted "<gold>%loop-entity% hit for %damage%!" to the attacker
						strike lightning effect at the loop-monster
						damage the loop-entity by damage / 2
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Blazing Light was activated!" to attacker
				play 30 (firework spark with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Luna
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Luna":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.75,70)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set {_bonusdamage} to {_bonusdamage} * 1.5
				set damage to damage + {_bonusdamage}
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_LunaDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.5)
				set {_LunaMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.5)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunaDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_LunaMAGReduction} * -1)
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Luna was activated!" to attacker
				play 40 (cloud with speed 1) at the victim
				play 40 (ender signal with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Lunar Bow
		if the name of the attacker's tool is "<gold><bold>Lunar Bow":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.75,70)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set {_bonusdamage} to {_bonusdamage} * 1.5
				set damage to damage + {_bonusdamage}
				set {_LunarBowDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.5)
				set {_LunarBowMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.5)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunarBowDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_LunarBowMAGReduction} * -1)
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Luna was activated!" to attacker
				play 40 (cloud with speed 1) at the victim
				play 40 (ender signal with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Eclipse
		if the name of the attacker's tool is "<gold><bold>Alondite":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.65,50)
			if {_trigger} is 1:
				set {_eclipse} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set {_bonusdamage} to {_bonusdamage} * 1.5
				set damage to damage + {_bonusdamage}
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_EclipseDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.2)
				set {_EclipseMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.2)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_EclipseDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_EclipseMAGReduction} * -1)
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Eclipse was activated!" to attacker
				play 40 (cloud with speed 1) at the victim
				play 40 (ender signal with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Moonbow
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Moonbow":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.85,80)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set damage to damage + {_bonusdamage}
				set {_MoonbowDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.7)
				set {_MoonbowMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.7)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_MoonbowDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_MoonbowMAGReduction} * -1)
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Moonbow was activated!" to attacker
				play 20 (cloud with speed 1) at the victim
				play 20 (ender signal with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Sol
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Sol":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,70)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				heal the attacker by damage * 0.75
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Sol was activated!" to attacker
				play 40 (heart with speed 1) at the attacker
				show 40 (yellow wool break with speed 1) at the attacker
				play sound "entity.player.levelup" with volume 0.5 and pitch 0.75 at victim for attacker
		#Subdue
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Subdue":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.65,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set damage to damage + 10
				if damage is more than victim's health:
					set damage to victim's health - 0.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Subdue was activated!" to attacker
				play 50 (red wool break with speed 1) at the attacker
				play 50 (obsidian break with speed 1) at the attacker
				play sound "entity.player.levelup" with volume 0.5 and pitch 0.75 at victim for attacker
		#Aether
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Aether":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.55,65)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set {_bonusdamage} to {_bonusdamage} * 1.5
				set damage to damage + {_bonusdamage}
				set {_AetherDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.5)
				set {_AetherMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.5)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_AetherDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_AetherMAGReduction} * -1)
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				heal the attacker by damage * 0.75
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Aether was activated!" to attacker
				play 50 (heart with speed 1) at the attacker
				play 50 (yellow wool break with speed 1) at the attacker
				play 50 (cloud with speed 1) at the victim
				play 50 (ender signal with speed 1) at the victim
				play sound "item.totem.use" with volume 0.5 and pitch 1 at victim for attacker
				play sound "entity.player.levelup" with volume 0.5 and pitch 0.75 at victim for attacker
		#Retribution
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Retribution":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.675,70)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage + (abs(the health of the attacker - the max health of the attacker) * 0.5)
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Retribution was activated!" to attacker
				play 80 (red wool break with speed 1) at the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
		#Ignis
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Ignis":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage + ((getEntityStat(attacker,"DEF") + getEntityStatBuff(attacker,"DEF") / 2))
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Ignis was activated!" to attacker
				play 60 (mobspawner flames with speed 1) at the victim
				play 60 (lava pop with speed 1) at the victim
				play sound "item.totem.use" with volume 0.5 and pitch 2 at victim for attacker
		#Dragon Fang
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Dragon Fang":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage + ((getEntityStat(attacker,"STR") + getEntityStatBuff(attacker,"STR") * 0.3))
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Dragon Fang was activated!" to attacker
				play 60 (purple wool break with speed 1) at the victim
				play 60 (dust of netherrack with speed 1) at the victim
				play sound "item.totem.use" with volume 0.5 and pitch 2 at victim for attacker
		#Glacies
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Glacies":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage + ((getEntityStat(attacker,"RES") + getEntityStatBuff(attacker,"RES") * 0.3))
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<gold>Glacies was activated!" to attacker
				play 60 (ice break with speed 1) at the victim
				play 60 (snowball break with speed 1) at the victim
				play sound "item.totem.use" with volume 0.5 and pitch 2 at victim for attacker
		#Rising Wind
		if the 5th line of the lore of attacker's tool contains "<light purple><bold>Special - Rising Wind":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.7,50)
			if {_trigger} is 1:
				set {_proc} to true
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				set damage to damage + ((getEntityStat(attacker,"SPD") + getEntityStatBuff(attacker,"SPD") / 2))
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				send formatted "<gold>Rising Wind was activated!" to attacker
				play 60 (happy villager with speed 1) at the victim
				play 60 (tall grass break with speed 1) at the victim
				play sound "item.totem.use" with volume 0.5 and pitch 2 at victim for attacker
		#Radiant Aether
		if the name of the attacker's tool contains "<gold><bold>Ragnell":
			set {_trigger} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.6,65)
			if {_trigger} is 1:
				set {_proc} to true
				set {_bonusDamage} to getHelmetDamageResistance(victim)
				add getChestplateDamageResistance(victim) to {_bonusdamage}
				add getLeggingsDamageResistance(victim) to {_bonusdamage}
				add getBootsDamageResistance(victim) to {_bonusdamage}
				set {_bonusdamage} to {_bonusdamage} * 1.5
				set damage to damage + {_bonusdamage}
				set {_RadiantAetherDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.5)
				set {_RadiantAetherMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.5)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_RadiantAetherDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_RadiantAetherMAGReduction} * -1)
				if the 2nd line of the lore of the attacker's tool contains "Wrath":
					set damage to damage + 2.5
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				heal the attacker by damage * 0.5
				set {_rng} to a random integer between 1 and 4
				if {_rng} is 1:
					make attacker say "%{skillquote1.%attacker%}%"
				else if {_rng} is 2:
					make attacker say "%{skillquote2.%attacker%}%"
				else if {_rng} is 3:
					make attacker say "%{skillquote3.%attacker%}%"
				else if {_rng} is 4:
					make attacker say "%{skillquote4.%attacker%}%"
				send formatted "<light blue><bold>Radiant Aether was activated!" to attacker
				play 40 (heart with speed 1) at the attacker
				play 40 (yellow wool break with speed 1) at the attacker
				play 40 (cloud with speed 1) at the victim
				play 40 (ender signal with speed 1) at the victim
				play 80 (magic crit with speed 1) at the victim
				play sound "item.totem.use" with volume 0.25 and pitch 0.5 at victim for attacker
				strike lightning effect at the victim
		#Braces
		if {_proc} is true:
			if the 2nd line of the lore of the attacker's tool contains "Eclipse Brace":
				set {_LunarBraceDEFReduction} to (getEntityStat(victim,"DEF") + getEntityStatBuff(victim,"DEF") * 0.7)
				set {_LunarBraceMAGReduction} to (getEntityStat(victim,"RES") + getEntityStatBuff(victim,"RES") * 0.7)
				set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunarBraceDEFReduction} * -1)
				set {_debug} to changeEntityStatBuff(victim,"RES",{_LunarBraceMAGReduction} * -1)
			else if the 2nd line of the lore of the attacker's tool contains "Solar Brace":
				heal the attacker by (damage * 0.5)
			else if the 2nd line of the lore of the attacker's tool contains "Special Spiral":
				set {_debug} to changeEntityStatBuff(attacker,"crushing",final damage / 2)
				show mob spawner flames on the attacker
			if the name of the attacker's tool is "<gold><bold>Mystletainn":
				if attacker's health is less than or equal to (attacker's maximum health * 0.75):
					set damage to damage + 4
			else if the name of the attacker's tool is "<gold><bold>Lunar Bow":
				if the 6th line of the lore of the attacker's tool contains "Unique":
					add ((getEntityStatTotal(attacker,"SPD")) * 0.2) to damage
			else if the name of the attacker's tool is "<gold><bold>Rex Hasta":
				add 5 to damage
			else if the name of the attacker's tool is "<gold><bold>Daybreak Axe":
				if the 6th line of the lore of the attacker's tool contains "Unique":
					heal the attacker by (damage * 0.3)
		#Pavise
		if the 5th line of the lore of victim's tool contains "Pavise":
			set {_level} to ({skl.%victim%} + {sklbuff.%victim%}) ^ 0.8
			if {_level} is greater than 85:
				set {_level} to 85
			if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
				add 15 to {_level}
			if the 6th line of the lore of the victim's tool contains "Slaying":
				set {_level} to {_level} + 10
			add getEntityStat(victim,"crushing") to {_level}
			loop all monsters in radius 5 of the victim:
				if loop-entity is attacker:
					set {_AT} to 1
					exit 1 loop
			loop all players in radius 5 of the victim:
				if loop-entity is attacker:
					set {_AT} to 1
					exit 1 loop
			if {_AT} is 1:
				chance of {_level}%:
					set damage to (damage * 0.5) - 1.5
					if the 6th line of the lore of the victim's tool contains "Koenig":
						set damage to damage - 1.5
					if the 1st line of the lore of the victim's tool contains "Shield Pulse":
						set damage to damage - 2.5
					set {_debug} to clearEntityVariableByName(victim,"crushing")
					send formatted "<gold>Pavise was activated!" to victim
					play 60 (crit with speed 1) at the victim
					play sound "item.totem.use" with volume 0.5 and pitch 0.5 at victim for attacker
		#Aegis
		if the 5th line of the lore of victim's tool contains "Aegis":
			set {_level} to ({skl.%victim%} + {sklbuff.%victim%}) ^ 0.8
			if {_level} is greater than 85:
				set {_level} to 85
			if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
				add 15 to {_level}
			if the 6th line of the lore of the attacker's tool contains "Slaying":
				set {_level} to {_level} + 10
			add getEntityStat(victim,"crushing") to {_level}
			if projectile exists:
				chance of {_level}%:
					set {_debug} to clearEntityVariableByName(victim,"crushing")
					set damage to (damage * 0.5) - 1.5
					if the 6th line of lore of the victim's tool contains "Koenig":
						set damage to damage - 1.5
					if the 1st line of the lore of the victim's tool contains "Shield Pulse":
						set damage to damage - 2.5
					send formatted "<gold>Aegis was activated!" to victim
					play 60 (crit with speed 1) at the victim
					play sound "item.totem.use" with volume 0.5 and pitch 0.5 at victim for attacker
		#Loptous Damage Reduction
		if the lore of the victim's tool contains "Loptous":
			set damage to damage * 0.5
			play 10 (obsidian break with speed 1) at the victim
		#Reinforced/Warding Multipliers
		if the 6th line of the lore of the attacker's tool contains "Reinforced":
			set damage to damage * 1.1
		if the 6th line of the lore of the victim's tool contains "Warding":
			set damage to damage * 0.9
		#
		#Stat Calculations
		#Pursuit SPD Bonus
		set {_pursuitCheck} to checkSlots(attacker,"Pursuit")
		if {_pursuitCheck} is 1:
			set {_debug} to changeEntityStatBuff(victim,"SPD",-5)
		#Nihl
		set {_skl} to checkSlots(victim,"Nihl")
		if {_skl} is 1:
			set {_nihlAttackerSPD} to (getEntityStatTotal(attacker,"SPD"))
			set {_nihlVictimSPD} to (getEntityStatTotal(victim,"SPD"))
			set {_debug} to changeEntityStatBuff(attacker,"SPD",{_nihlAttackerSPD} * -1)
			set {_debug} to changeEntityStatBuff(victim,"SPD",{_nihlVictimSPD} * -1)
		else:
			set {_skl} to checkSlots(attacker,"Nihl")
			if {_skl} is 1:
				set {_nihlAttackerSPD} to (getEntityStatTotal(attacker,"SPD"))
				set {_nihlVictimSPD} to (getEntityStatTotal(victim,"SPD"))
				set {_debug} to changeEntityStatBuff(attacker,"SPD",{_nihlAttackerSPD} * -1)
				set {_debug} to changeEntityStatBuff(victim,"SPD",{_nihlVictimSPD} * -1)
		#Magical damage calculation
		if {_magical} is 1:
			set damage to damage + (((getEntityStatTotal(attacker,"RES")) / 5) - ((getEntityStatTotal(victim,"RES")) / 5))
		#Physical damage calculation
		else:
			set damage to damage + (((getEntityStatTotal(attacker,"STR")) / 5) - ((getEntityStatTotal(victim,"DEF")) / 5))
		#SPD check
		if (getEntityStatTotal(attacker,"SPD")) is more than (getEntityStatTotal(victim,"SPD") + 5):
			set damage to damage * 2
			send formatted "<light green>Outsped the defender and doubled!" to the attacker
			send formatted "<light red>%attacker% outsped you and doubled!" to the victim
		#Pursuit perk clear debuff
		if {_pursuitCheck} is 1:
			set {_debug} to changeEntityStatBuff(victim,"SPD",5)
		#Nihl debuff clear
		if {_nihlCheck} is 1:
			set {_debug} to changeEntityStatBuff(attacker,"SPD",{_nihlAttackerSPD})
			set {_debug} to changeEntityStatBuff(victim,"SPD",{_nihlVictimSPD})
		#Unbreakable
		set {_sklcheck} to checkSlots(victim,"Unbreakable")
		if {_sklcheck} is 1:
			set damage to damage * 0.75
		#Personal Difficulty Damage Adjust
		if {perdiff.%victim%} is 0:
			set damage to damage * 0.5
		else if {perdiff.%victim%} is 1:
			set damage to damage * 0.75
		else if {perdiff.%victim%} is 2:
			set damage to damage * 1
		else if {perdiff.%victim%} is 3:
			set damage to damage * 1.25
		else if {perdiff.%victim%} is 4:
			set damage to damage * 1.5
		else if {perdiff.%victim%} is 5:
			set damage to damage * 2
		else if {perdiff.%victim%} is 6:
			set damage to damage * 2
		else if {perdiff.%victim%} is 7:
			set damage to damage * 2
		else if {perdiff.%victim%} is 8:
			set damage to damage * 3
		if {perdiff.%attacker%} is 0:
			set damage to damage * 1.5
		else if {perdiff.%attacker%} is 1:
			set damage to damage * 1.25
		else if {perdiff.%attacker%} is 2:
			set damage to damage * 1
		else if {perdiff.%attacker%} is 3:
			set damage to damage * 0.75
		else if {perdiff.%attacker%} is 4:
			set damage to damage * 0.5
		else if {perdiff.%attacker%} is 5:
			set damage to damage * 0.25
		else if {perdiff.%attacker%} is 6:
			set damage to damage * 0.75
		else if {perdiff.%attacker%} is 7:
			set damage to damage * 0.5
		else if {perdiff.%attacker%} is 8:
			set damage to damage * 0.25
		#Perks
		#Gamble
		set {_sklcheck} to checkSlots(attacker,"Gamble")
		if {_sklcheck} is 1:
			set {_foeAvoid} to ((getEntityStatTotal(victim,"SPD")) + (getEntityStatTotal(victim,"SKL")))
			if {_foeAvoid} is not set:
				set {_foeAvoid} to 75
			else if {_foeAvoid} is less than 1:
				set {_foeAvoid} to 75
			set {_playerAvoid} to ((getEntityStatTotal(attacker,"SPD")) + (getEntityStatTotal(attacker,"SKL")))
			set {_Avoid} to ({_foeAvoid} - {_playerAvoid})
			if {_Avoid} is less than 0:
				set {_Avoid} to 0
			set {_1RN} to a random integer between 0 and {_Avoid}
			set {_2RN} to a random integer between 0 and {_Avoid}
			set {_trueHit} to floor(({_1RN} + {_2RN}) / 2)
			chance of {_trueHit}%:
				set damage to 0
				cancel event
				send formatted "<light red>Your Gamble perk caused the attack to miss!" to the attacker
				apply weakness 3 to the attacker for 2 seconds
				send formatted "<light blue>The opponent's Gamble perk caused their attack to miss!" to the victim
		#Close Call
		set {_sklcheck} to checkSlots(victim,"Close Call")
		if {_sklcheck} is 1:
			set {_Avoid} to ((getEntityStatTotal(attacker,"SPD")) + (getEntityStatTotal(attacker,"SKL")))
			set {_foeAvoid} to ((getEntityStatTotal(victim,"SPD")) + (getEntityStatTotal(victim,"SKL")))
			if {_foeAvoid} is not set:
				set {_foeAvoid} to 75
			else if {_foeAvoid} is less than 1:
				set {_foeAvoid} to 75
			set {_playerAvoid} to ({_Avoid} - {_foeAvoid})
			if {_playerAvoid} is less than 0:
				set {_playerAvoid} to 0
			set {_1RN} to a random integer between 0 and {_playerAvoid}
			set {_2RN} to a random integer between 0 and {_playerAvoid}
			set {_trueHit} to ceil(({_1RN} + {_2RN}) / 2)
			chance of {_trueHit}%:
				set damage to 0
				cancel event
				send formatted "<light red>The foe's Close Call perk caused your attack to miss!" to the attacker
				apply weakness 3 to the attacker for 2 seconds
				send formatted "<light blue>Close Call caused you to dodge the attack!" to the victim
		#Shield damage reduction
		if victim is blocking:
			set {_poise} to (((getEntityStatTotal(victim,"STR")) + (getEntityStatTotal(victim,"DEF"))) * 0.5) / (getEntityStat(victim,"lvl"))
			if the lore of the victim's offhand tool contains "Skill Greed":
				set {_poise} to {_poise} / 4
			else if the lore of the victim's offhand tool contains "Sturdy Frame":
				set {_poise} to {_poise} * 2
			if {_poise} is less than damage:
				set damage to (damage / ({_poise} / 4))
				send "<light red>The block failed!" to the victim
			else:
				set damage to (damage / ({_poise} / 2))
				play sound "entity.experience_orb.pickup" with volume 3 and pitch 2 at victim for attacker
				play sound "entity.experience_orb.pickup" with volume 3 and pitch 2 at victim for victim
				send "<light green>Blocked the attack successfully!" to the victim
				send formatted "<light red>%victim's tablist name%<reset><light red>'s block was too strong!" to the attacker
		#Underdog
		set {_checkSlots} to checkSlots(attacker,"Underdog")
		if {_checkSlots} is 1:
			if getEntityStat(attacker,"lvl") is less than getEntityStat(victim,"lvl"):
				set damage to damage * (1 + (((getEntityStat(victim,"lvl")) - (getEntityStat(attacker,"lvl"))) * 0.05))
		set {_checkSlots} to checkSlots(victim,"Underdog")
		if {_checkSlots} is 1:
			if getEntityStat(victim,"lvl") is less than getEntityStat(attacker,"lvl"):
				if (1 - (((getEntityStat(attacker,"lvl")) - (getEntityStat(victim,"lvl"))) * 0.05)) is less than or equal to 0.05:
					set damage to damage * 0.05
				else:
					set damage to damage * (1 - (((getEntityStat(attacker,"lvl")) - (getEntityStat(victim,"lvl"))) * 0.05))
		if final damage is less than or equal to 0:
			if victim is not item frame:
				if damage cause is not fall:
					cancel event
					if projectile exists:
						delete the projectile
					send formatted "<light red>Your efforts are wasted. %victim%'s defenses are too strong." to the attacker
					send formatted "<light green>%attacker%'s blows were no match for your defenses." to the victim
					play sound "entity.experience_orb.pickup" with volume 3 and pitch 2 at victim for attacker
					play sound "entity.experience_orb.pickup" with volume 3 and pitch 2 at victim for victim
		set {_actionBarLVL} to getEntityStat(victim,"lvl")
		if damage is less than victim's health:
			send action bar "<bold>%victim% | Level: %{_actionBarLVL}% | HP: %victim's health - (final damage / 2)% / %victim's maximum health% | Damage Dealt: %final damage / 2%" to the attacker
		else:
			send action bar "<gold><bold>%victim%<reset><bold> | Level: %{_actionBarLVL}% | HP: <gold><bold>0 / %victim's maximum health%<reset><bold> | Damage Dealt: %final damage / 2% | <gold><bold>Overkill: %abs(victim's health - (final damage / 2))%" to the attacker
		#Sandbag
		if the name of the victim contains "<gold><bold>Sandbag":
			if {sandbagkillable.%attacker%} is 0:
				send formatted "<light blue>Damage dealt that hit: %final damage%" to the attacker
				cancel event
		#Seals
		if the 2nd line of the lore of the attacker's tool contains "Seal SPD/SKL":
			if getEntityVarByName(victim,"SPDSKLDebuffed") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"SPD",-20)
				set {_debug} to changeEntityStatBuff(victim,"SKL",-20)
				set {_debug} to setEntityVariableByName(victim,"SPDSKLDebuffed",1)
				wait 3 seconds
				set {_debug} to changeEntityStatBuff(victim,"SPD",20)
				set {_debug} to changeEntityStatBuff(victim,"SKL",20)
				set {_debug} to clearEntityVariableByName(victim,"SPDSKLDebuffed")
		else if the 2nd line of the lore of the attacker's tool contains "Seal DEF/MAG":
			if getEntityVarByName(victim,"DEFMAGDebuffed") is "-2":
				set {_debug} to changeEntityStatBuff(victim,"DEF",-20)
				set {_debug} to changeEntityStatBuff(victim,"MAG",-20)
				set {_debug} to setEntityVariableByName(victim,"DEFMAGDebuffed",1)
				wait 3 seconds
				set {_debug} to changeEntityStatBuff(victim,"DEF",20)
				set {_debug} to changeEntityStatBuff(victim,"MAG",20)
				set {_debug} to clearEntityVariableByName(victim,"DEFMAGDebuffed")
		#Lethality
		if {_proc} is true:
			set {_sklchk} to checkSlots(attacker,"Lethality")
			if {_sklchk} is 1:
				damage the victim by (damage * 0.2) with fake cause poison
				if final damage is more than victim's health:
					drop victim's tool at the attacker
		else if {_randomcritperformed} is true:
			set {_sklchk} to checkSlots(attacker,"Lethality")
			if {_sklchk} is 1:
				damage the victim by (damage * 0.2) with fake cause poison
				if final damage is more than victim's health:
					drop victim's tool at the attacker
		#Saboteur
		set {_sklchk} to checkSlots(attacker,"Saboteur")
		if {_sklchk} is 1:
			apply poison 4 to the victim for 5 seconds
			loop all entities in radius 10 of the victim:
				if loop-entity is not the victim:
					if getEntityVarByName(loop-entity,"SaboteurDebuffed") is "-2":
						if getEntityVarByName(loop-entity,"party") is getEntityVarByName(attacker,"party"):
							set {_debug} to changeEntityStatBuff(loop-entity,"SKL",-20)
							set {_debug} to changeEntityStatBuff(loop-entity,"DEF",-20)
							set {_debug} to changeEntityStatBuff(loop-entity,"RES",-20)
							set {_debug} to setEntityVariableByName(loop-entity,"SaboteurDebuffed",1)
							wait 5 seconds
							set {_debug} to changeEntityStatBuff(loop-entity,"SKL",20)
							set {_debug} to changeEntityStatBuff(loop-entity,"DEF",20)
							set {_debug} to changeEntityStatBuff(loop-entity,"RES",20)
							set {_debug} to clearEntityVariableByName(loop-entity,"SaboteurDebuffed")
		#DEF/MAG Debuff Clears
		#Aether
		if {_AetherDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_AetherDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_AetherMAGReduction})
		#Moonbow
		if {_MoonbowDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_MoonbowDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_MoonbowMAGReduction})
		#Eclipse
		if {_EclipseDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_EclipseDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_EclipseMAGReduction})
		#Lunar Bow
		if {_LunarBowDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunarBowDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_LunarBowMAGReduction})
		#Luna
		if {_LunaDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunaDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_LunaMAGReduction})
		#Eclipse Brace
		if {_LunarBraceDEFReduction} is set:
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_LunarBraceDEFReduction})
			set {_debug} to changeEntityStatBuff(victim,"RES",{_LunarBraceMAGReduction})			
		#Dragon Soul charging
		set {_soulCheck} to checkSlots(attacker,"Gale Soul")
		if {_soulCheck} is 0:
			set {_soulCheck} to checkSlots(attacker,"Flame Soul")
			if {_soulCheck} is 0:
				set {_soulCheck} to checkSlots(attacker,"Aqua Soul")
		if {_soulCheck} is 1:
			set {dSoulMeterCap.%attacker%} to (getEntityStat(attacker,"lvl") * 10)
			add (final damage / 4) to {dSoulMeter.%attacker%}
			if {dsoulMeter.%attacker%} is more than {dsoulMeterCap.%attacker%}:
				set {dSoulMeter.%attacker%} to {dSoulMeterCap.%attacker%}
			set {_dSoulMeterDisplay} to {dSoulMeter.%attacker%} / {dSoulMeterCap.%attacker%} * 100
			if {_dSoulMeterDisplay} is more than 100:
				set {_dSoulMeterDisplay} to 100
				if {t_MeterFull.%attacker%} is not set:
					play sound "block.end_portal.spawn" with volume 0.5 and pitch 1 at the attacker
					send "<red>Transformation Meter full! Sneak + Right click with an empty hand to activate." to the attacker
					set {t_MeterFull.%attacker%} to true
			set bossbar "dsoul.%attacker's uuid%" progress to {_dSoulMeterDisplay}
		if {_GuardEffect} is 1:
			set {_debug} to changeEntityStatBuff(attacker,"SKL",50)
		#Breath of Life
		if the 3rd line of the lore of the attacker's tool contains "Breath of Life":
			loop all players in radius 15 of the attacker:
				if loop-player is not the attacker:
					if {party.%loop-player%} is {party.%attacker%}:
						heal the loop-player by (damage * 0.33)
		#Savage Blow
		else if the 3rd line of the lore of the attacker's tool contains "Savage Blow":
			loop all monsters in radius 7 of the victim:
				if loop-entity is not the attacker:
					if loop-entity is not the victim:
						if {party.%loop-entity%} is not {party.%attacker%}:
							set {_aoedamage} to (damage * 0.33)
							if {_aoedamage} is more than loop-entity's health:
								set loop-entity's health to 0.5
							else:
								damage the loop-entity by (damage * 0.33)
							if {combograde.%attacker%} is more than 0:
								add (damage * 0.25) to {comboscore.%attacker%}
			loop all players in radius 7 of the victim:
				if loop-entity is not the attacker:
					if loop-entity is not the victim:
						if {party.%loop-entity%} is not {party.%attacker%}:
							if {_aoedamage} is more than loop-entity's health:
								set loop-entity's health to 0.5
							else:
								damage the loop-entity by (damage * 0.33)
							if {combograde.%attacker%} is more than 0:
								add (damage * 0.25) to {comboscore.%attacker%}
		#Bonus Blade Buff Reversion
		if getEntityVarByName(victim,"BonusBladeBuff") is not "-2":
			set {_debug} to changeEntityStatBuff(attacker,"STR",{_victimOldSTR} * -1.5)
			set {_debug} to changeEntityStatBuff(attacker,"DEF",{_victimOldDEF} * -1.5)
			set {_debug} to changeEntityStatBuff(attacker,"SPD",{_victimOldSPD} * -1.5)
			set {_debug} to changeEntityStatBuff(attacker,"RES",{_victimOldMAG} * -1.5)
			set {_debug} to changeEntityStatBuff(attacker,"SKL",{_victimOldSKL} * -1.5)
		if getEntityVarByName(attacker,"BonusBladeBuff") is not "-2":
			set {_debug} to changeEntityStatBuff(victim,"STR",{_attackerOldSTR} * -1.5)
			set {_debug} to changeEntityStatBuff(victim,"DEF",{_attackerOldDEF} * -1.5)
			set {_debug} to changeEntityStatBuff(victim,"SPD",{_attackerOldSPD} * -1.5)
			set {_debug} to changeEntityStatBuff(victim,"RES",{_attackerOldMAG} * -1.5)
			set {_debug} to changeEntityStatBuff(victim,"SKL",{_attackerOldSKL} * -1.5)
		#Highest Damage Dealt Record
		if damage is more than {highestdamage.%attacker%}:
			set {highestdamage.%attacker%} to damage
		#Highest Damage Suffered Record
		if damage is more than {highestsuffered.%victim%}:
			set {highestsuffered.%victim%} to damage
		#Spell recoil
		if {_spelleffect1} is set:
			set {spellcooldown.%attacker%} to 1
			set {_checkSlots} to checkSlots(attacker,"Magic Ward")
			if {_checkSlots} is 1:
				set {_recoil} to {_recoil} / 2
			set {_checkSlots} to checkSlots(attacker,"Elder Knowledge")
			if {_checkSlots} is 1:
				set {_recoil} to {_recoil} / 2
				set {_EK} to true
			if {_recoil} is less than 0:
				set {_recoil} to 0
			set {_recoil2} to {_recoil}
			if {_EK} is true:
				if attacker's health - {_recoil} is less than or equal to 0:
					set attacker's health to 0.5
				else:
					damage the attacker by {_recoil}
				clear {spellCooldown.%attacker%}
			else:
				while {_recoil2} is more than 0:
					send formatted "<light blue>Recharged in: %{_recoil2}%" to the attacker
					subtract 0.25 from {_recoil2}
					wait 0.25 seconds
				clear {spellcooldown.%attacker%}
				send formatted "<green><bold>Spells ready!" to the attacker
		#Dire Thunder VFX
		if the name of the attacker's tool contains "<gold><bold>Dire Thunder":
			if projectile exists:
				strike lightning effect at the victim
				wait 0.5 seconds
				strike lightning effect at the victim
		#Light Brand Adaptive Damage Reset
		if {_LBOldRes} is set:
			set {_debug} to setEntityVariableByName(attacker,"RES",{_LBOldRes})
			set {_debug} to setEntityVariableByName(attacker,"RESBuff",{_LBOldResBuff})
		#Gale Soul Adaptive Damage Reset
		if {_GSOldSTR} is set:
			set {_debug} to setEntityVariableByName(attacker,"STR",{_GSOldSTR})
			set {_debug} to setEntityVariableByName(attacker,"STRBuff",{_GSOldSTRBuff})
		#Bow of Aresha Buff Reset
		if {_areshabowbuff} is set:
			set {_debug} to changeEntityStatBuff(attacker,"STR",{_areshabowbuff} * -1)
			set {_debug} to changeEntityStatBuff(attacker,"DEF",{_areshabowbuff} * -1)
			
#Toggle Battle Forecast	
command /bf:
	trigger:
		send formatted "<gold>Dismissed the Battle Forecast."
		wipe the player's sidebar
	
#Galeforce	
on damage:
	if damage cause is attack:
		set {_doDamageCheck} to true
	else if damage cause is projectile:
		set {_doDamageCheck} to true
	if {_doDamageCheck} is true:
		if the 5th line of the lore of attacker's tool contains "Galeforce":
			set {_level} to specialCheck(attacker,getEntityStat(attacker,"SKL"),getEntityStatBuff(attacker,"SKL"),0.5,50)
			if {_level} is 1:
				apply swiftness 6 to the attacker for 5 seconds
				apply strength 6 to the attacker for 5 seconds
				set {_debug} to changeEntityStatBuff(attacker,"SKL",-100)
				loop all entities in radius 20 of the attacker:
					if getEntityVarByName(loop-entity,"party") is not getEntityVarByName(attacker,"party"):
						apply slowness 10 to the loop-entity for 10 seconds
						apply weakness 10 to the loop-entity for 10 seconds
						apply jump boost 128 to the loop-entity for 10 seconds
				if the 6th line of the lore of the attacker's tool contains "Koenig":
					set damage to damage + 2.5
				set {_debug} to clearEntityVariableByName(attacker,"crushing")
				send formatted "<gold>Galeforce was activated!" to attacker
				show witch spell on the victim
				play sound "entity.zombie_villager.cure" with volume 0.25 and pitch 1.5 at victim for attacker
				wait 20 seconds
				set {_debug} to changeEntityStatBuff(attacker,"SKL",100)
				send "<light blue>Galeforce ready!" to the attacker
		
#Projectile Collision
on projectile hit:
	#Fujin Yumi Refine Eff
	if the name of the shooter's tool is "<gold><bold>Fujin Yumi":
		if the 6th line of the lore of the shooter's tool contains "Unique":
			if the shooter is sneaking:
				teleport the shooter to the projectile
	if metadata value "gunType" of the projectile is set:
		#Rocket Launchers create explosions
		if metadata value "gunType" of the projectile is "8":
			set {t_AllowRocketJump.%shooter%} to true
			#Enable Rocket Jumping for a few ticks
			create safe explosion of force 1.5 at the projectile
			wait 5 ticks
			delete the projectile
			clear {t_AllowRocketJump.%shooter%}
		else if metadata value "gunType" of the projectile is "11":
			wait 5 ticks
			create safe explosion of force 1 at the projectile
			delete the projectile
		else:
			if {displayBulletHitArea.%shooter%} is true:
				wait 5 ticks
				set {_bulletLoc} to projectile's location
				delete the projectile
				loop 20 times:
					play (firework spark with speed 0) at {_bulletLoc}
					wait 5 tick
			else:
				wait 5 tick
				delete the projectile
	else if metadata value "SUPERSHOTGUN" of the projectile is set:
		wait 5 tick
		delete the projectile
	else if metadata value "JavType" of the projectile is set:
		wait 5 tick
		delete the projectile

command /toggleBulletHitDisplay:
	trigger:
		if {displayBulletHitArea.%player%} is not set:
			set {displayBulletHitArea.%player%} to true
			send "<light green>Now displaying bullet hit areas."
		else:
			clear {displayBulletHitArea.%player%}
			send "<light red>No longer displaying bullet hit areas."

on right click:
	#Dragon Soul perk activation
	if player is sneaking:
		if player's tool is air:
			if {dSoulActive.%player%} is not set:
				if {dSoulMeter.%player%} is more than 20:
					set {_dtCheck} to checkSlots(player,"Gale Soul")
					if {_dtCheck} is 1:
						set {dSoulActive.%player%} to "Gale Soul"
						clear {t_meterFull.%player%}
						play sound "entity.generic.explode" with volume 1 and pitch 1 at the player
						play sound "entity.enderdragon.growl" with volume 1 and pitch 1 at the player
						play 20 (smoke with speed 0) at the player
						play 20 (spell with speed 0) at the player
						play 20 (emerald block break with speed 1) at the player
						while {dSoulMeter.%player%} is more than 0:
							add 25 to {spdbuff.%player%}
							add 25 to {sklbuff.%player%}
							play 10 (emerald block break with speed 1) at the player
							wait 0.25 seconds
							subtract 25 from {spdbuff.%player%}
							subtract 25 from {sklbuff.%player%}
							set {_triggerHeart} to checkSlots(player,"Draconic Aura")
							if {_triggerHeart} is 1:
								subtract 1.25 from {dSoulMeter.%player%}
							else:
								subtract 2.5 from {dSoulMeter.%player%}
							set {_dSoulMeterDisplay} to {dSoulMeter.%player%} / {dSoulMeterCap.%player%} * 100
							set bossbar "dsoul.%player's uuid%" progress to {_dSoulMeterDisplay}
							if {dSoulActive.%player%} is not set:
								exit 1 loop
						play sound "entity.generic.explode" with volume 0.75 and pitch 0.5 at the player
						play sound "entity.enderdragon.growl" with volume 1 and pitch 0.7 at the player
						play large explosion at the player
						play 20 (emerald block break with speed 1) at the player
						clear {dSoulActive.%player%}
						send "<light red>Your Gale Dragon transformation wore off!"
					else:
						set {_dtCheck} to checkSlots(player,"Flame Soul")
						if {_dtCheck} is 1:
							set {dSoulActive.%player%} to "Flame Soul"
							clear {t_meterFull.%player%}
							play sound "entity.generic.explode" with volume 1 and pitch 1 at the player
							play sound "entity.enderdragon.growl" with volume 1 and pitch 1 at the player
							play mob spawner flames at the player
							play 20 (smoke with speed 0) at the player
							play 20 (spell with speed 0) at the player
							play 20 (redstone block break with speed 1) at the player
							while {dSoulMeter.%player%} is more than 0:
								add 25 to {resbuff.%player%}
								add 25 to {defbuff.%player%}
								play mob spawner flames at the player
								wait 0.25 seconds
								subtract 25 from {resbuff.%player%}
								subtract 25 from {defbuff.%player%}
								set {_triggerHeart} to checkSlots(player,"Draconic Aura")
								if {_triggerHeart} is 1:
									subtract 1.25 from {dSoulMeter.%player%}
								else:
									subtract 2.5 from {dSoulMeter.%player%}
								set {_dSoulMeterDisplay} to {dSoulMeter.%player%} / {dSoulMeterCap.%player%} * 100
								set bossbar "dsoul.%player's uuid%" progress to {_dSoulMeterDisplay}
								if {dSoulActive.%player%} is not set:
									exit 1 loop
							play sound "entity.generic.explode" with volume 0.75 and pitch 0.5 at the player
							play sound "entity.enderdragon.growl" with volume 1 and pitch 0.7 at the player
							play large explosion at the player
							play 20 (emerald block break with speed 1) at the player
							clear {dSoulActive.%player%}
							send "<light red>Your Flame Dragon transformation wore off!"
						else:
							set {_dtCheck} to checkSlots(player,"Aqua Soul")
							if {_dtCheck} is 1:
								set {dSoulActive.%player%} to "Aqua Soul"
								clear {t_meterFull.%player%}
								play sound "entity.generic.explode" with volume 1 and pitch 1 at the player
								play sound "entity.enderdragon.growl" with volume 1 and pitch 1 at the player
								play 20 (smoke with speed 0) at the player
								play 20 (spell with speed 0) at the player
								play 20 (lapis block break with speed 1) at the player
								while {dSoulMeter.%player%} is more than 0:
									add 25 to {spdbuff.%player%}
									add 25 to {resbuff.%player%}
									play 10 (lapis block break with speed 1) at the player
									wait 0.25 seconds
									subtract 25 from {spdbuff.%player%}
									subtract 25 from {resbuff.%player%}
									set {_triggerHeart} to checkSlots(player,"Draconic Aura")
									if {_triggerHeart} is 1:
										subtract 1.25 from {dSoulMeter.%player%}
									else:
										subtract 2.5 from {dSoulMeter.%player%}
									set {_dSoulMeterDisplay} to {dSoulMeter.%player%} / {dSoulMeterCap.%player%} * 100
									set bossbar "dsoul.%player's uuid%" progress to {_dSoulMeterDisplay}
									if {dSoulActive.%player%} is not set:
										exit 1 loop
								play sound "entity.generic.explode" with volume 0.75 and pitch 0.5 at the player
								play sound "entity.enderdragon.growl" with volume 1 and pitch 0.7 at the player
								play large explosion at the player
								play 20 (lapis block break with speed 1) at the player
								clear {dSoulActive.%player%}
								send "<light red>Your Water Dragon transformation wore off!"
			else:
				clear {dSoulActive.%player%}
				play 20 (redstone block break with speed 1) at the player
	#Lance throw behavior
	if the name of the player's tool contains "<bold>Wooden Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 1
		damage the player's tool by 2
	else if the name of the player's tool contains "<bold>Stone Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 2
		damage the player's tool by 3
	else if the name of the player's tool contains "<bold>Iron Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 3
		damage the player's tool by 4
	else if the name of the player's tool contains "<bold>Golden Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 4
		damage the player's tool by 1
	else if the name of the player's tool contains "<bold>Diamond Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 5
		damage the player's tool by 5
	else if the name of the player's tool contains "Crusader's Lance":
		make the player shoot an arrow with speed 2
		set metadata value "JavType" of the last shot projectile to 6
	#Balder Side Sword Parry Behavior
	if the name of the player's tool contains "<gold><bold>Balder Side Sword":
		if {BSSCooldown.%player%} is not set:
			send formatted "<gold>Parrying attacks!" to the player
			set {BSS.%player%} to true
			set {BSSCooldown.%player%} to true
			wait 0.45 seconds
			clear {BSS.%player%}
			send formatted "<red>The parry wore off!" to the player
			wait 0.6 seconds
			clear {BSSCooldown.%player%}
			send formatted "<gold>Ready to parry again!" to the player
	#Falchion
	if the name of the player's tool contains "<gold><bold>Falchion":
		if player is sneaking:
			set {_temp} to the damage value of the player's tool
			if {_temp} is more than or equal to 1531:
				cancel event
				send formatted "<red>Your tool is too worn down to use this ability!"
				#send formatted "<red>Current Durability: %1561 -{_temp}%"
			else:
				apply regeneration 4 to the player for 3 seconds
				heal the player by 2
				damage player's tool by 10
	#Light Brand
	if the name of the player's tool contains "<gold><bold>Light Brand":
		if player is sneaking:
			set {_temp} to the damage value of the player's tool
			if {_temp} is more than or equal to 1531:
				cancel event
				send formatted "<red>Your tool is too worn down to use this ability!"
				#send formatted "<red>Current Durability: %1561 -{_temp}%"
			else:
				loop all monsters in radius 10 of the player:
					if {_temp} is less than 1531:
						make the player damage loop-monster by 5
						set {lb_ranged.%player%} to true
						strike lightning effect at the loop-monster
						damage the player's tool by 5
						set {_temp} to the damage value of the player's tool
					else:
						send formatted "<red>Your attack was cancelled due to low weapon durability."
						exit 1 loop
	#Binding Blade
	if the name of the player's tool contains "<gold><bold>Binding Blade":
		if player is sneaking:
			set {_temp} to the damage value of the player's tool
			if {_temp} is more than or equal to 1531:
				cancel event
				send formatted "<red>Your tool is too worn down to use this ability!"
				#send formatted "<red>Current Durability: %1561 -{_temp}%"
			else:
				apply regeneration 4 to the player for 5 seconds
				heal the player by 3
				damage player's tool by 15
	#Axtinguisher
	if the name of the player's tool contains "<gold><bold>Axtinguisher":
		push the target upwards at speed 0.5
		damage the player's tool by 1
	#Rebellion
	if the name of the player's tool contains "<gold><bold>Rebellion":
		if the 7th line of the lore of the player's tool is "<red><bold>STYLE: Trickster":
			if player is not sneaking:
				if {t_groundTrickCD.%player%} is not set:
					push the player forwards at speed 1.4
					play 20 (smoke with speed 0) at player
					play 20 (red wool break with speed 1) at player
					play sound "entity.blaze.shoot" with volume 1 and pitch 1 at player
					apply resistance 5 to the player for 2 seconds
					set {t_groundTrickCD.%player%} to true
					wait 2 seconds
					clear {t_groundTrickCD.%player%}
					send "<light blue>Trickster recharged!" to the player
			else:
				set the 7th line of the lore of the player's tool to "<orange><bold>STYLE: Swordmaster"
				make the player say "<orange>Swordmaster!"
				play 20 (orange glass break with speed 1) at the player
				play mob spawner flames at the player
				play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
				play sound "entity.generic.explode" with volume 0.3 and pitch 1.5 at the player
		else if the 7th line of the lore of the player's tool is "<blue><bold>STYLE: Royalguard":
			if player is not sneaking:
				if {t_royalCD.%player%} is not set:
					set {t_royalCD.%player%} to true
					set {BSS.%player%} to true
					wait 0.45 seconds
					clear {BSS.%player%}
					send "<light red>Royal Block wore off!" to the player
					wait 0.9 seconds
					clear {t_royalCD.%player%}
					send "<light blue>Royal Block recharged!" to the player
			else:
				set the 7th line of the lore of the player's tool to "<red><bold>STYLE: Trickster"
				make the player say "<light red>Trickster!"
				play 20 (redstone block break with speed 1) at the player
				play mob spawner flames at the player
				play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
				play sound "entity.generic.explode" with volume 0.3 and pitch 1.5 at the player
		else if the 7th line of the lore of the player's tool is "<green><bold>STYLE: Gunslinger":
			if player is not sneaking:
				make the player shoot an arrow with speed 2.25
				set metadata value "JavType" of the last shot projectile to 3
				damage the player's tool by 1
			else:
				set the 7th line of the lore of the player's tool to "<blue><bold>STYLE: Royalguard"
				make the player say "<light blue>Royalguard!"
				play 20 (lapis block break with speed 1) at the player
				play mob spawner flames at the player
				play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
				play sound "entity.generic.explode" with volume 0.3 and pitch 1.5 at the player
		else if the 7th line of the lore of the player's tool is "<orange><bold>STYLE: Swordmaster":
			if player is sneaking:
				set the 7th line of the lore of the player's tool to "<green><bold>STYLE: Gunslinger"
				make the player say "<light green>Gunslinger!"
				play 20 (emerald block break with speed 1) at the player
				play mob spawner flames at the player
				play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
				play sound "entity.generic.explode" with volume 0.3 and pitch 1.5 at the player
		else:
			set the 7th line of the lore of the player's tool to "<red><bold>STYLE: Trickster"
			make the player say "<light red>Trickster!"
			play 20 (redstone block break with speed 1) at the player
			play mob spawner flames at the player
			play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
			play sound "entity.generic.explode" with volume 0.3 and pitch 1.5 at the player
	#Super Shotgun
	if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 2/2":
		play sound "entity.blaze.shoot" with volume 4 and pitch 0.5 at the player
		play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
		set the name of the player's tool to "<red><bold>Super Shotgun | Clip: 1/2"
		push the player backwards at speed 0.5
		shoot an arrow from the player with speed 6
		play 10 (lava pop with speed 0) at the player
		play 10 (void fog with speed 0) at the player
		set metadata value "SUPERSHOTGUN" of the last shot projectile to 1
		set {_spread} to checkSlots(player,"Controlled Shot")
		loop 7 times:
			if {_spread} is 1:
				set {_ShotSpreadX} to random number between -1 and 1
				set {_ShotSpreadY} to random number between -0.5 and 0.5
			else:
				set {_ShotSpreadX} to random number between -2 and 2
				set {_ShotSpreadY} to random number between -1 and 1
			shoot an arrow from the player with speed 6
			push the last shot projectile right at speed {_ShotSpreadX}
			push the last shot projectile up at speed {_ShotSpreadY}
			set metadata value "SUPERSHOTGUN" of the last shot projectile to 1
		wait 4 ticks
	else if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 1/2":
		play sound "entity.blaze.shoot" with volume 4 and pitch 0.5 at the player
		play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
		set the name of the player's tool to "<red><bold>Super Shotgun | Clip: 0/2"
		play 10 (lava pop with speed 0) at the player
		play 10 (void fog with speed 0) at the player
		push the player backwards at speed 0.5
		shoot an arrow from the player with speed 6
		set {_spread} to checkSlots(player,"Controlled Shot")
		set metadata value "SUPERSHOTGUN" of the last shot projectile to 1
		loop 7 times:
			if {_spread} is 1:
				set {_ShotSpreadX} to random number between -1 and 1
				set {_ShotSpreadY} to random number between -0.5 and 0.5
			else:
				set {_ShotSpreadX} to random number between -2 and 2
				set {_ShotSpreadY} to random number between -1 and 1
			shoot an arrow from the player with speed 6
			push the last shot projectile right at speed {_ShotSpreadX}
			push the last shot projectile up at speed {_ShotSpreadY}
			set metadata value "SUPERSHOTGUN" of the last shot projectile to 1
		wait 4 ticks
	else if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 0/2":
		play sound "block.dispenser.dispense" with volume 4 and pitch 0.5 at the player
		play smoke at the player
	#Weapon firing behavior
	set {_spread} to checkSlots(player,"Controlled Shot")
	set {_resourceful} to checkSlots(player,"Resourceful")
	#Flintlock Pistol
	if the name of the player's tool is "<light gray>Flintlock Pistol":
		if the 8th line of the lore of the player's tool is "1":
			if {_spread} is 1:
				set {_ShotSpreadX} to random number between -0.15 and 0.15
				set {_ShotSpreadY} to random number between -0.15 and 0.15
			else:
				set {_ShotSpreadX} to random number between -0.25 and 0.25
				set {_ShotSpreadY} to random number between -0.25 and 0.25
			make the player shoot an arrow
			push the last shot projectile right at speed {_ShotSpreadX}
			push the last shot projectile up at speed {_ShotSpreadY}
			set metadata value "gunType" of the last shot projectile to "1"
			play sound "block.dispenser.launch" with volume 1 and pitch 1.5 at the player
			play sound "entity.generic.explode" with volume 0.5 and pitch 1.5 at the player
			set {_clip} to the 8th line of the lore of the player's tool parsed as integer
			if {_resourceful} is not 1:
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
			else:
				chance of 50%:
					subtract 1 from {_clip}
					set the 8th line of the lore of the player's tool to "%{_clip}%"
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
	#Iron Musket
	else if the name of the player's tool is "<light gray>Iron Musket":
		if the 8th line of the lore of the player's tool is "1":
			if {_spread} is 1:
				set {_ShotSpreadX} to random number between -0.15 and 0.15
				set {_ShotSpreadY} to random number between -0.15 and 0.15
			else:
				set {_ShotSpreadX} to random number between -0.35 and 0.35
				set {_ShotSpreadY} to random number between -0.35 and 0.35
			make the player shoot an arrow
			push the last shot projectile right at speed {_ShotSpreadX}
			push the last shot projectile up at speed {_ShotSpreadY}
			push the last shot projectile forwards at speed 1
			set metadata value "gunType" of the last shot projectile to "2"
			play sound "block.dispenser.launch" with volume 1 and pitch 1 at the player
			play sound "entity.generic.explode" with volume 0.5 and pitch 1.25 at the player
			set {_clip} to the 8th line of the lore of the player's tool parsed as integer
			if {_resourceful} is not 1:
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
			else:
				chance of 50%:
					subtract 1 from {_clip}
					set the 8th line of the lore of the player's tool to "%{_clip}%"
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 1 at the player
	#Iron Pistol
	else if the name of the player's tool is "<light gray>Iron Pistol":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Iron Pistol} is not true:
				if {_spread} is 1:
					set {_ShotSpreadX} to random number between -0.15 and 0.15
					set {_ShotSpreadY} to random number between -0.15 and 0.15
				else:
					set {_ShotSpreadX} to random number between -0.25 and 0.25
					set {_ShotSpreadY} to random number between -0.25 and 0.25
				make the player shoot an arrow
				push the last shot projectile right at speed {_ShotSpreadX}
				push the last shot projectile up at speed {_ShotSpreadY}
				set metadata value "gunType" of the last shot projectile to "3"
				play sound "block.dispenser.launch" with volume 1 and pitch 1.5 at the player
				play sound "entity.generic.explode" with volume 0.5 and pitch 1.5 at the player
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 66%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				set {t_FirearmsCooldown.%player%::Iron Pistol} to true
				wait 0.33 seconds
				clear {t_FirearmsCooldown.%player%::Iron Pistol}
		else:
			play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Redstone Rifle
	else if the name of the player's tool is "<light gray>Redstone Repeater":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Redstone Rifle} is not true:
				if {_spread} is 1:
					set {_ShotSpreadX} to random number between -0.2 and 0.2
					set {_ShotSpreadY} to random number between -0.2 and 0.2
				else:
					set {_ShotSpreadX} to random number between -0.385 and 0.385
					set {_ShotSpreadY} to random number between -0.385 and 0.385
				make the player shoot an arrow
				push the last shot projectile right at speed {_ShotSpreadX}
				push the last shot projectile up at speed {_ShotSpreadY}
				set metadata value "gunType" of the last shot projectile to "4"
				play sound "block.dispenser.launch" with volume 1 and pitch 1.5 at the player
				play sound "entity.generic.explode" with volume 0.5 and pitch 1.5 at the player
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 50%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				set {t_FirearmsCooldown.%player%::Redstone Rifle} to true
				wait 0.175 seconds
				clear {t_FirearmsCooldown.%player%::Redstone Rifle}
		else:
			play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Redgrave E-45 Express
	else if the name of the player's tool is "<light gray>Redgrave E-45 Express":
		if the 8th line of the lore of the player's tool is not "0":
			if {_spread} is 1:
				set {_ShotSpreadX} to random number between -0.1 and 0.1
				set {_ShotSpreadY} to random number between -0.1 and 0.1
			else:
				set {_ShotSpreadX} to random number between -0.25 and 0.25
				set {_ShotSpreadY} to random number between -0.25 and 0.25
			make the player shoot an arrow
			push the last shot projectile right at speed {_ShotSpreadX}
			push the last shot projectile up at speed {_ShotSpreadY}
			set metadata value "gunType" of the last shot projectile to "5"
			play sound "block.anvil.place" with volume 0.5 and pitch 2 at the player
			play sound "entity.generic.explode" with volume 0.7 and pitch 1.5 at the player
			set {_clip} to the 8th line of the lore of the player's tool parsed as integer
			if {_resourceful} is 1:
				chance of 35%:
					add 1 to {_clip}
					play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
			subtract 1 from {_clip}
			set the 8th line of the lore of the player's tool to "%{_clip}%"
		else:
			play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Redgrave Ifrit
	else if the name of the player's tool is "<light gray>Redgrave Ifrit":
		if {t_FirearmsCooldown.%player%::Redgrave Ifrit} is not set:
			if the 8th line of the lore of the player's tool is not "0":
				set {t_FirearmsCooldown.%player%::Redgrave Ifrit} to 1
				if player is not sneaking:
					add 0.2 to {firearmRecoilDynamic.%player%::Redgrave Ifrit}
				else:
					add 0.1 to {firearmRecoilDynamic.%player%::Redgrave Ifrit}
				if {_spread} is 1:
					set {_ShotSpreadX} to random number between (-0.075 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * -0.2)) and (0.075 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * 0.2))
					set {_ShotSpreadY} to (-0.1 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * 1))
				else:
					set {_ShotSpreadX} to random number between (-0.15 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * -0.2)) and (0.15 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * 0.2))
					set {_ShotSpreadY} to (-0.1 + ({firearmRecoilDynamic.%player%::Redgrave Ifrit} * 1.25))
				make the player shoot an arrow with speed 6
				push the last shot projectile right at speed {_ShotSpreadX}
				push the last shot projectile up at speed {_ShotSpreadY}
				set metadata value "gunType" of the last shot projectile to "17"
				play sound "block.wood.break" with volume 0.5 and pitch 0.7 at the player
				play sound "entity.generic.explode" with volume 0.8 and pitch 0.8 at the player
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 35%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.15 seconds
				clear {t_FirearmsCooldown.%player%::Redgrave Ifrit}
			else:
				play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Redgrave Coyote-Alpha
	else if the name of the player's tool is "<light gray>Redgrave Coyote-Alpha":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Redgrave Coyote-Alpha} is not true:
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.5 at the player
				play sound "entity.generic.explode" with volume 2 and pitch 0.7 at the player
				play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
				make the player shoot an arrow with speed 6
				set {_spread} to checkSlots(player,"Controlled Shot")
				set metadata value "gunType" of the last shot projectile to "6"
				loop 8 times:
					if {_spread} is 1:
						set {_ShotSpreadX} to random number between -0.5 and 0.5
						set {_ShotSpreadY} to random number between -0.35 and 0.35
					else:
						set {_ShotSpreadX} to random number between -1 and 1
						set {_ShotSpreadY} to random number between -0.7 and 0.7
					make the player shoot an arrow with speed 6
					push the last shot projectile right at speed {_ShotSpreadX}
					push the last shot projectile up at speed {_ShotSpreadY}
					set {t_shotType.%last shot projectile%} to "RSO"
					set metadata value "gunType" of the last shot projectile to "6"
				set {t_FirearmsCooldown.%player%::Redgrave Coyote-Alpha} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 40%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.35 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 0.8 at the player
				wait 0.35 seconds
				clear {t_FirearmsCooldown.%player%::Redgrave Coyote-Alpha}
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Redgrave Kalina
	else if the name of the player's tool is "<light gray>Redgrave Kalina":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Redgrave Kalina} is not set:
				clear {t_reloading.%player%}
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.7 at the player
				play sound "entity.generic.explode" with volume 0.7 and pitch 0.7 at the player
				play sound "entity.lightning.thunder" with volume 0.3 and pitch 1 at the player
				make the player shoot an arrow with speed 6
				set metadata value "gunType" of the last shot projectile to "16"
				set {t_FirearmsCooldown.%player%::Redgrave Kalina} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 15%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				play sound "block.fire.extinguish" with volume 0.7 and pitch 0.7 at the player
				wait 1.7 seconds
				play sound "ui.button.click" with volume 2 and pitch 1.2 at the player
				wait 0.2 seconds
				play sound "block.piston.extend" with volume 1 and pitch 1.3 at the player
				wait 0.1 seconds
				play sound "block.piston.contract" with volume 1 and pitch 1.3 at the player
				wait 0.6 seconds
				play sound "ui.button.click" with volume 2 and pitch 1 at the player
				clear {t_FirearmsCooldown.%player%::Redgrave Kalina}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Vettik S-25
	else if the name of the player's tool is "<light gray>Vettik S-25":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Vettik S-25} is not true:
				set {t_FirearmsCooldown.%player%::Vettik S-25} to true
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.5 at the player
				play sound "entity.generic.explode" with volume 2 and pitch 0.7 at the player
				play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
				make the player shoot an arrow with speed 6
				set {_spread} to checkSlots(player,"Controlled Shot")
				set metadata value "gunType" of the last shot projectile to "6"
				loop 8 times:
					if {_spread} is 1:
						set {_ShotSpreadX} to random number between -0.33 and 0.33
						set {_ShotSpreadY} to random number between -0.33 and 0.33
					else:
						set {_ShotSpreadX} to random number between -0.66 and 0.66
						set {_ShotSpreadY} to random number between -0.66 and 0.66
					make the player shoot an arrow with speed 6
					push the last shot projectile right at speed {_ShotSpreadX}
					push the last shot projectile up at speed {_ShotSpreadY}
					set {t_shotType.%last shot projectile%} to "RSO"
					set metadata value "gunType" of the last shot projectile to "13"
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1: 
					chance of 40%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.25 seconds
				play sound "block.piston.extend" with volume 2 and pitch 0.8 at the player
				wait 0.25 seconds
				clear {t_FirearmsCooldown.%player%::Vettik S-25}
				play sound "block.piston.contract" with volume 2 and pitch 0.8 at the player
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Vettik A-10 Enforcer
	else if the name of the player's tool is "<light gray>Vettik A-10 Enforcer":
		if {t_FirearmsCooldown.%player%::Vettik A-10 Enforcer} is not set:
			if the 8th line of the lore of the player's tool is not "0":
				set {t_FirearmsCooldown.%player%::Vettik A-10 Enforcer} to 1
				if player is not sneaking:
					add 0.095 to {firearmRecoilDynamic.%player%::Vettik A-10 Enforcer}
				else:
					add 0.055 to {firearmRecoilDynamic.%player%::Vettik A-10 Enforcer}
				if {_spread} is 1:
					set {_ShotSpreadX} to random number between (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * -1.1)) and (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * 1.1))
					set {_ShotSpreadY} to random number between (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * -1.1)) and (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * 1.1))
				else:
					set {_ShotSpreadX} to random number between (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * -1.1)) and (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * 1.1))
					set {_ShotSpreadY} to random number between (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * -1.1)) and (({firearmRecoilDynamic.%player%::Vettik A-10 Enforcer} * 1.1))
				make the player shoot an arrow with speed 6
				push the last shot projectile right at speed {_ShotSpreadX}
				push the last shot projectile up at speed {_ShotSpreadY}
				set metadata value "gunType" of the last shot projectile to "15"
				play sound "block.wood.break" with volume 0.5 and pitch 0.7 at the player
				play sound "entity.generic.explode" with volume 0.8 and pitch 0.8 at the player
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 10%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.225 seconds
				clear {t_FirearmsCooldown.%player%::Vettik A-10 Enforcer}
			else:
				play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Vettik B-30AS
	else if the name of the player's tool is "<light gray>Vettik B-30AS":
		if {t_FirearmsCooldown.%player%::Vettik B-30AS} is not set:
			if the 8th line of the lore of the player's tool is not "0":
				if {_spread} is 1:
					set {_firearmRecoilMultiplier} to 0.5
				else:
					set {_firearmRecoilMultiplier} to 1
				set {t_FirearmsCooldown.%player%::Vettik B-30AS} to 1
				loop 3 times:
					if player is not sneaking:
						add 0.11 to {firearmRecoilDynamic.%player%::Vettik B-30AS}
					else:
						add 0.09 to {firearmRecoilDynamic.%player%::Vettik B-30AS}
					#First Recoil Checkpoint (Up and to the right)
					if {firearmRecoilDynamic.%player%::Vettik B-30AS} is less than 0.9:
						set {_ShotSpreadX} to random number between (-0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS}) * {_firearmRecoilMultiplier}) and (0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS} * {_firearmRecoilMultiplier}))
						set {_ShotSpreadY} to random number between ((-0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS}) * {_firearmRecoilMultiplier})) and (0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS} * {_firearmRecoilMultiplier}))
					else:
						set {_ShotSpreadX} to random number between (-0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS}) * {_firearmRecoilMultiplier}) and ((0.05 + ({firearmRecoilDynamic.%player%::Vettik B-30AS} * {_firearmRecoilMultiplier}) * -0.25))
						set {_ShotSpreadY} to random number between (1 * {_firearmRecoilMultiplier}) and (1.1 * {_firearmRecoilMultiplier})
					make the player shoot an arrow with speed 6
					if player is facing east:
						set {_mirrorSpread} to true
					else if player is facing west:
						set {_mirrorSpread} to true
					if {_mirrorSpread} is true:
						push the last shot projectile left at speed {_ShotSpreadX}
					else:
						push the last shot projectile right at speed {_ShotSpreadX}
					push the last shot projectile up at speed {_ShotSpreadY}
					set metadata value "gunType" of the last shot projectile to "14"
					play sound "block.stone.break" with volume 0.5 and pitch 0.8 at the player
					play sound "entity.generic.explode" with volume 0.8 and pitch 1.3 at the player
					set {_clip} to the 8th line of the lore of the player's tool parsed as integer
					if {_resourceful} is 1:
						chance of 10%:
							add 1 to {_clip}
							play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
					subtract 1 from {_clip}
					set the 8th line of the lore of the player's tool to "%{_clip}%"
					wait 0.1 seconds
				clear {t_FirearmsCooldown.%player%::Vettik B-30AS}
			else:
				play sound "block.stone_button.click_on" with volume 1 and pitch 1.6 at the player
	#Teufort Two-Timer
	else if the name of the player's tool is "<light gray>Teufort Two-Timer":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Teufort Two-Timer} is not true:
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.5 at the player
				play sound "entity.generic.explode" with volume 2 and pitch 0.7 at the player
				play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
				make the player shoot an arrow with speed 6
				push the player backwards at speed 0.9
				set {_spread} to checkSlots(player,"Controlled Shot")
				set metadata value "gunType" of the last shot projectile to "6"
				loop 4 times:
					if {_spread} is 1:
						set {_ShotSpreadX} to random number between -0.3 and 0.3
						set {_ShotSpreadY} to random number between -0.15 and 0.15
					else:
						set {_ShotSpreadX} to random number between -0.45 and 0.45
						set {_ShotSpreadY} to random number between -0.3 and 0.3
					make the player shoot an arrow with speed 6
					push the last shot projectile right at speed {_ShotSpreadX}
					push the last shot projectile up at speed {_ShotSpreadY}
					set {t_shotType.%last shot projectile%} to "TTT"
					set metadata value "gunType" of the last shot projectile to "7"
				set {t_FirearmsCooldown.%player%::Teufort Two-Timer} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 40%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.15 seconds
				clear {t_FirearmsCooldown.%player%::Teufort Two-Timer}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Rocket Launcher
	else if the name of the player's tool is "<light gray>Rocket Launcher":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Rocket Launcher} is not set:
				clear {t_reloading.%player%}
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.7 at the player
				play sound "entity.generic.explode" with volume 2 and pitch 1 at the player
				make the player shoot an arrow with speed 3
				set metadata value "gunType" of the last shot projectile to "8"
				set {t_FirearmsCooldown.%player%::Rocket Launcher} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 25%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.8 seconds
				play sound "block.dispenser.fire" with volume 2 and pitch 0.5 at the player
				clear {t_FirearmsCooldown.%player%::Rocket Launcher}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Home-Made Heater
	else if the name of the player's tool is "<light gray>Home-Made Heater":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Home-Made Heater} is not set:
				clear {t_reloading.%player%}
				play sound "entity.blaze.shoot" with volume 1 and pitch 1.3 at the player
				play sound "entity.generic.explode" with volume 0.7 and pitch 1.3 at the player
				make the player shoot an arrow with speed 5
				set metadata value "gunType" of the last shot projectile to "10"
				set {t_FirearmsCooldown.%player%::Home-Made Heater} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 15%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 1.1 seconds
				play sound "ui.button.click" with volume 2 and pitch 0.8 at the player
				wait 0.4 seconds
				play sound "ui.button.click" with volume 2 and pitch 1 at the player
				clear {t_FirearmsCooldown.%player%::Home-Made Heater}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Grenade Launcher
	else if the name of the player's tool is "<light gray>Grenade Launcher":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Grenade Launcher} is not set:
				clear {t_reloading.%player%}
				play sound "entity.blaze.shoot" with volume 1 and pitch 0.5 at the player
				play sound "entity.generic.explode" with volume 2 and pitch 1 at the player
				play sound "block.dispenser.fire" with volume 1.5 and pitch 0.8 at the player
				make the player shoot an arrow with speed 1.4
				set metadata value "gunType" of the last shot projectile to "11"
				set {t_FirearmsCooldown.%player%::Grenade Launcher} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 25%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.55 seconds
				play sound "block.dispenser.fire" with volume 2 and pitch 1 at the player
				clear {t_FirearmsCooldown.%player%::Grenade Launcher}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Hell's Spiral
	else if the name of the player's tool is "<gold><bold>Hell's Spiral":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Hell's Spiral} is not set:
				clear {t_reloading.%player%}
				play sound "entity.blaze.shoot" with volume 1 and pitch 1.3 at the player
				play sound "entity.generic.explode" with volume 0.7 and pitch 1 at the player
				make the player shoot an arrow with speed 11
				set metadata value "gunType" of the last shot projectile to "12"
				set {t_FirearmsCooldown.%player%::Hell's Spiral} to true
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				if {_resourceful} is 1:
					chance of 33%:
						add 1 to {_clip}
						play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player for the player
				subtract 1 from {_clip}
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				wait 0.9 seconds
				clear {t_FirearmsCooldown.%player%::Hell's Spiral}
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.6 at the player
	#Minigun
	else if the name of the player's tool is "<light gray>Minigun":
		if the 8th line of the lore of the player's tool is not "0":
			if {t_FirearmsCooldown.%player%::Minigun} is not set:
				clear {t_reloading.%player%}
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				apply slowness 4 to the player for 1 second
				loop 8 times:
					if {_clip} is more than 0:
						make the player shoot an arrow with speed 3
						set metadata value "gunType" of the last shot projectile to "9"
						play sound "entity.blaze.shoot" with volume 0.6 and pitch 1.5 at the player
						play sound "block.dispenser.fire" with volume 0.6 and pitch 1.5 at the player
						if {_subtractClipOnInterval} is not 1:
							add 1 to {_subtractClipOnInterval}
						else:
							clear {_subtractClipOnInterval}
							subtract 1 from {_clip}
							if {_resourceful} is 1:
								chance of 5%:
									add 1 to {_clip}
						wait 2 ticks
					else:
						exit 1 loop
				set the 8th line of the lore of the player's tool to "%{_clip}%"
				remove slowness from the player
		else:
			play sound "block.stone_button.click_off" with volume 1 and pitch 0.5
	#Gold/Green Herb Use Behavior
	if the name of the player's tool is "<light green><bold>Sacred Herb":
		if player's health is less than player's maximum health:
			remove 1 of tool from tool
			play sound "entity.player.swim" with volume 2 and pitch 1.5 at the player for the player
			play sound "item.bucket.fill" with volume 2 and pitch 1.3 at the player for the player
			play 30 (light green wool break with speed 1) at the player
			heal the player by 6 hearts
			send formatted "<light green>Consumed a Sacred Herb and restored 6 HP."
		else:
			send formatted "<light red>Using this wouldn't benefit you right now."
	#Golden Herb
	if the name of the player's tool is "<light yellow><bold>Golden Herb":
		if player's health is less than player's maximum health:
			remove 1 of tool from tool
			play sound "block.enchantment_table.use" with volume 3 and pitch 2 at the player for the player
			play sound "entity.player.swim" with volume 1 and pitch 1.5 at the player for the player
			play 30 (gold block break with speed 1) at the player
			heal the player by 12 hearts
			send formatted "<light yellow>Consumed a Golden Herb and restored 12 HP."
		else:
			send formatted "<light red>Using this wouldn't benefit you right now."
	#Baked Herb
	else if the name of the player's tool is "<green><bold>Baked Herb":
		if player's health is less than player's maximum health:
			remove 1 of tool from tool
			play sound "entity.player.swim" with volume 2 and pitch 1.5 at the player for the player
			play sound "item.bucket.fill" with volume 2 and pitch 1.3 at the player for the player
			play 30 (light green wool break with speed 1) at the player
			heal the player by 3 hearts
			increase the player's food level by 3
			send formatted "<light green>Consumed a Baked Herb and restored 3 HP & 3 Hunger."
		else if player's hunger is less than 10:
			remove 1 of tool from tool
			play sound "entity.player.swim" with volume 2 and pitch 1.5 at the player for the player
			play sound "item.bucket.fill" with volume 2 and pitch 1.3 at the player for the player
			play 30 (light green wool break with speed 1) at the player
			heal the player by 3 hearts
			increase the player's food level by 3
			send formatted "<light green>Consumed a Baked Herb and restored 3 HP & 3 Hunger."	
		else:
			send "<light red>Using this wouldn't benefit you right now."
	#Baked Golden Herb
	else if the name of the player's tool is "<yellow><bold>Baked Golden Herb":
		if player's health is less than player's maximum health:
			remove 1 of tool from tool
			play sound "block.enchantment_table.use" with volume 3 and pitch 2 at the player for the player
			play sound "entity.player.swim" with volume 1 and pitch 1.5 at the player for the player
			play 30 (gold block break with speed 1) at the player
			heal the player by 6 hearts
			increase the player's food level by 6
			send formatted "<light yellow>Consumed a Baked Golden Herb and restored 6 HP & 6 Hunger."
		if player's health is less than player's maximum health:
			remove 1 of tool from tool
			play sound "block.enchantment_table.use" with volume 3 and pitch 2 at the player for the player
			play sound "entity.player.swim" with volume 1 and pitch 1.5 at the player for the player
			play 30 (gold block break with speed 1) at the player
			heal the player by 6 hearts
			increase the player's food level by 6
			send formatted "<light yellow>Consumed a Baked Golden Herb and restored 6 HP & 6 Hunger."
		else:
			send formatted "<light red>Using this wouldn't benefit you right now."
	if player is sneaking:
		#Fortify Health
		if the 4th line of the lore of player's tool contains "Fortify Health":
			apply absorption 2 to the player for 75 seconds
			damage player's tool by 10
		#Restore
		if the 4th line of the lore of player's tool contains "Restore":
			apply regeneration 4 to the player for 2 seconds
			damage player's tool by 5
	#Wings of Mercy
	if the 2nd line of the lore of the player's tool contains "Wings of Mercy":
		set {_health} to {support.%player%}'s health
		if {_health} is less than {support.%player%}'s maximum health / 2:
			teleport the player to {support.%player%}
			send formatted "%player% has arrived with Wings of Mercy!" to {support.%player%}
			set {_sklcheck.%player%} to checkSlots(player,"Everlasting Bond")
			if {_sklcheck.%player%} is 1:
				send formatted "Everlasting Bond granted you STR/DEF +15 for 10 seconds!" to the player
				add 15 to {strbuff.%player%}
				add 15 to {defbuff.%player%}
				wait 10 seconds
				subtract 15 from {strbuff.%player%}
				subtract 15 from {strbuff.%player%}
		else if {bleedout.%{support.%player%}%} is 1:
			teleport the player to {support.%player%}
			send formatted "%player% has arrived with Wings of Mercy!" to {support.%player%}
			set {_sklcheck.%player%} to checkSlots(player,"Everlasting Bond")
			if {_sklcheck.%player%} is 1:
				send formatted "Everlasting Bond granted you STR/DEF +15 for 10 seconds!" to the player
				add 15 to {strbuff.%player%}
				add 15 to {defbuff.%player%}
				wait 10 seconds
				subtract 15 from {strbuff.%player%}
				subtract 15 from {strbuff.%player%}
		else:
			send formatted "<red>HP Threshold not met!" to the player
	#Escape Route
	if the 2nd line of the lore of the player's tool contains "Escape Route":
		if player's health is less than (player's maximum health / 2):
			teleport the player to {support.%player%}
			set {_slot} to checkSlots(player,"Everlasting Bond")
			if {_slot} is 1:
				add 15 to {strbuff.%{support.%player%}%}
				add 15 to {defbuff.%{support.%player%}%}
				send formatted "%player%'s Everlasting Bond granted you STR/DEF +15 for 10 seconds!" to {support.%player%}
				wait 10 seconds
				subtract 15 from {strbuff.%{support.%player%}%}
				subtract 15 from {defbuff.%{support.%player%}%}
			send formatted "%player% has arrived with Escape Route!" to {support.%player%}
		else if {bleedout.%player%} is 1:
			teleport the player to {support.%player%}
			set {_slot} to checkSlots(player,"Everlasting Bond")
			if {_slot} is 1:
				add 15 to {strbuff.%{support.%player%}%}
				add 15 to {defbuff.%{support.%player%}%}
				send formatted "%player%'s Everlasting Bond granted you STR/DEF +15 for 10 seconds!" to {support.%player%}
				wait 10 seconds
				subtract 15 from {strbuff.%{support.%player%}%}
				subtract 15 from {defbuff.%{support.%player%}%}
			send formatted "%player% has arrived with Escape Route" to {support.%player%}
		else:
			send formatted "<red>HP Threshold not met!" to the player
	#Stinger
	if the 4th line of the lore of the player's tool contains "Stinger":
		if {stingerCooldown.%player%} is not set:
			play 20 (smoke with speed 0) at player
			play 20 (red wool break with speed 1) at player
			play sound "entity.blaze.shoot" with volume 1 and pitch 1 at player
			push the player forwards at speed 1.5
			set {stingerCooldown.%player%} to 1
			if {combograde.%player%} is more than 0:
				add (1.5 * (7 - {combograde.%player%})) to {comboscore.%player%}
			wait 1.5 seconds
			send formatted "<light green>Stinger ready!"
			clear {stingerCooldown.%player%}
			#EEEEEEEEEYAAAAAAAAAAAAAAAAAGH
	#Shield Charge
	if the lore of the player's offhand tool contains "Shield Charge":
		if {t_shieldchargeCooldown.%player%} is not set:
			play 20 (smoke with speed 0) at the player
			play 20 (iron block break with speed 1) at the player
			play sound "entity.blaze.shoot" with volume 1 and pitch 0.75 at the player
			set {t_shieldchargeCooldown.%player%} to true
			loop 5 times:
				push the player in horizontal direction of the player at speed 1.25
				play sound "entity.minecart.riding" with volume 1.2 and pitch 1 at the player
				add 6 to {strbuff.%player%}
				add 6 to {_chargeBuff}
				wait 0.3 seconds
			subtract {_chargeBuff} from {strbuff.%player%}
			loop 7 times:
				wait 1 second
			clear {t_shieldchargeCooldown.%player%}
			send "<light blue>Shield Charge ready!" to the player
	#Capture
	if the 4th line of the lore of the player's tool contains "Capture":
		if player is sneaking:
			if {capture.%player%} is set:
				clear {capture.%player%}
				send formatted "<light green>No longer attempting to Capture foes!"
			else:
				set {capture.%player%} to 1
				send formatted "<light green>Now attempting to Capture foes! Attacks will deal 50%% less damage."
	#Taunt
	if the 4th line of the lore of the player's tool is "<light green><bold>Assist - Taunt":
		if player is sneaking:
			if {isTaunting.%player%} is not set:
				set {_rng} to a random integer from 1 to 4
				if {_rng} is 1:
					make player say {skillquote1.%player%}
				else if {_rng} is 2:
					make player say {skillquote2.%player%}
				else if {_rng} is 3:
					make player say {skillquote3.%player%}
				else if {_rng} is 4:
					make player say {skillquote4.%player%}
				set {isTaunting.%player%} to true
				while player is sneaking:
					play sound "block.snow.hit" with volume 0.7 and pitch 0.8 at the player
					add 1 to {_tauntTimer}
					wait 2 tick
					if {_tauntTimer} is more than or equal to 18:
						exit 1 loop
				if {_tauntTimer} is more than or equal to 18:
					buffSFX(player)
					play mob spawner flames at the player
					play 20 (redstone block break with speed 1) at the player
					add 15 to {strbuff.%player%}
					add 15 to {sklbuff.%player%}
					wait 10 seconds
					if {combograde.%player%} is more than 0:
						add (9 * (8 - {combograde.%player%}) + ({comboscale.%player%})) to {comboscore.%player%}
					subtract 15 from {strbuff.%player%}
					subtract 15 from {sklbuff.%player%}
					clear {isTaunting.%player%}
					send formatted "<light red>Taunt's bonus expired!"
				else:
					clear {isTaunting.%player%}
	#MAX-Taunt
	else if the 4th line of the lore of the player's tool contains "MAX-Taunt":
		if player is sneaking:
			if {isTaunting.%player%} is not set:
				set {_rng} to a random integer from 1 to 4
				if {_rng} is 1:
					make player say {skillquote1.%player%}
				else if {_rng} is 2:
					make player say {skillquote2.%player%}
				else if {_rng} is 3:
					make player say {skillquote3.%player%}
				else if {_rng} is 4:
					make player say {skillquote4.%player%}
				set {isTaunting.%player%} to true
				while player is sneaking:
					play sound "block.snow.hit" with volume 0.7 and pitch 0.8 at the player
					add 1 to {_tauntTimer}
					wait 2 tick
					if {_tauntTimer} is more than or equal to 36:
						exit 1 loop
				if {_tauntTimer} is more than or equal to 36:
					buffSFX(player)
					play 2 mob spawner flames at the player
					play 40 (lapis block break with speed 1) at the player
					add 30 to {strbuff.%player%}
					add 30 to {sklbuff.%player%}
					if {combograde.%player%} is more than 0:
						add (18 * (7 - {combograde.%player%}) + ({comboscale.%player%})) to {comboscore.%player%}
					wait 20 seconds
					subtract 30 from {strbuff.%player%}
					subtract 30 from {sklbuff.%player%}
					clear {isTaunting.%player%}
					send formatted "<light red>MAX-Taunt's bonus expired!"
				else:
					clear {isTaunting.%player%}
				
command /fixtaunts:
	trigger:
		clear {isTaunting.%player%}

on right click on an entity:
	#Rally Speed
	if the 4th line of the lore of player's tool contains "Rally Speed":
		apply speed 1 to the target for 30 seconds
		damage the player's tool by 2
	#Rally Strength
	else if the 4th line of the lore of player's tool contains "Rally Strength":
		apply strength 1 to the target for 30 seconds
		damage the player's tool by 2
	#Rally Defence
	else if the 4th line of the lore of player's tool contains "Rally Defence":
		apply resistance 1 to the target for 30 seconds
		damage the player's tool by 2
	#Rally Spectrum
	else if the 4th line of the lore of player's tool contains "Rally Spectrum":
		apply resistance 1 to the target for 30 seconds
		apply strength 1 to the target for 30 seconds
		apply speed 1 to the target for 30 seconds
		damage the player's tool by 6	
	#Shove
	else if the 4th line of the lore of player's tool contains "Shove":
		push the target backwards at speed 0.8
		push the target upwards at speed 0.6
		damage the player's tool by 1
		if {combograde.%player%} is more than 0:
			add (2.5 * (7 - {combograde.%player%})) to {comboscore.%player%}
	#Shield Bash
	else if the 4th line of the lore of player's offhand tool contains "Shield Bash":
		push the target backwards at speed 1.1
		push the target upwards at speed 0.25
		make player damage the target by 4
	#Smite
	else if the 4th line of the lore of player's tool contains "Smite":
		push the target backwards at speed 1.7
		push the target upwards at speed 0.6
		damage the player's tool by 1
		if {combograde.%player%} is more than 0:
			add (2.5 * (7 - {combograde.%player%})) to {comboscore.%player%}
	#Launcher
	else if the 4th line of the lore of player's tool contains "Launcher":
		damage the target by 1
		push the target upwards at speed 1.75
		if player is sneaking:
			push the player upwards at speed 1.75
		damage the player's tool by 1
		if {combograde.%player%} is more than 0:
			add (3 * (7 - {combograde.%player%})) to {comboscore.%player%}
	#Rebellion - Swordmaster
	else if the name of the player's tool is "<gold><bold>Rebellion":
		if the 7th line of the lore of the player's tool is "<orange><bold>STYLE: Swordmaster":
			damage the target by 1
			push the target upwards at speed 1.75
			if {combograde.%player%} is more than 0:
				add (3 * (7 - {combograde.%player%})) to {comboscore.%player%}
	#Ardent Sacrifice
	else if the 4th line of the lore of player's tool contains "Ardent Sacrifice":
		heal the target by 4 hearts
		damage the player by 4 hearts
		make target say "%{healedQuote.%target%}%"
	#Swap
	else if the 4th line of the lore of player's tool contains "Swap":
		set {_warp} to location of block at the target
		teleport the target to the player
		teleport the player to {_warp}
		push the player forwards at speed 0.75
		push the target backwards at speed 0.75
	#Stomp
	else if the 4th line of the lore of the player's tool contains "Stomp":
		damage the target by 1 heart
		push the target downwards at speed 3
		if {combograde.%player%} is more than 0:
			add (3 * (7 - {combograde.%player%})) to {comboscore.%player%}
	#Reposition
	else if the 4th line of the lore of the player's tool contains "Reposition":
		teleport the target to the player
		wait 1 tick
		push the target backwards at speed 1.5
	#Siegmund & Sieglinde
	if the name of the player's tool contains "<gold><bold>Siegmund":
		apply strength 2 to the target for 15 seconds
		damage the player's tool by 5
	if the name of the player's tool contains "<gold><bold>Sieglinde":
		if the 6th line of the lore of the player's tool contains "<white><bold>Refined: Unique":
			loop all players in radius 10 of the player:
				if {party.%loop-player%} is {party.%player%}:
					apply strength 2 to the loop-player for 15 seconds
					if the 4th line of the lore of the player's tool contains "Rally Speed":
						apply swiftness 1 to the loop-player for 15 seconds
					if the 4th line of the lore of the player's tool contains "Rally Resistance":
						apply resistance 1 to the loop-player for 15 seconds
					if the 4th line of the lore of the player's tool contains "Rally Spectrum":
						apply resistance 1 to the loop-player for 15 seconds
						apply swiftness 1 to the loop-player for 15 seconds
					damage the player's tool by 5
			apply strength 2 to the player for 15 seconds
			if the 4th line of the lore of the player's tool contains "Rally Speed":
				apply swiftness 1 to the player for 15 seconds
			else if the 4th line of the lore of the player's tool contains "Rally Resistance":
				apply resistance 1 to the player for 15 seconds
		else:
			apply strength 2 to the target for 15 seconds
			damage the player's tool by 5
		
#On Equip
on tool change:
	#Light Brand
	if the name of the player's tool contains "<gold><bold>Light Brand":
		if {weaponrank.%player%::swords} is less than 3750:
			send formatted "<light red>You need at least B rank or higher in Swords to wield the Light Brand."
			cancel event
	#Gae Bolg
	if the name of the player's tool contains "<gold><bold>Gae Bolg":
		set {_slot} to checkSlots(player,"Crusader's Blood")
		if {_slot} is 0:
			if {weapongrade.%player%::lances} is not "<gold><bold>S":
				send formatted "<light red>You need an S rank in Lances OR a Crusader's Blood to wield the Gae Bolg." to the player
				cancel event
	#Tyrfing Crusader's Blood
	if the name of the player's tool contains "<gold><bold>Tyrfing":
		set {_slot} to checkSlots(player,"Crusader's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least an A rank in Swords OR a Crusader's blood to wield Tyrfing." to the player
				cancel event
	#Mystletainn Crusader's Blood
	if the name of the player's tool contains "<gold><bold>Mystletainn":
		set {_slot} to checkSlots(player,"Crusader's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least an A rank in Swords OR a Crusader's blood to wield Mystletainn." to the player
				cancel event
	#Falchion Lord's Blood
	if the name of the player's tool contains "<gold><bold>Falchion":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least A rank in Swords OR a Lord's blood to wield Falchion." to the player
				cancel event
	#Binding Blade Lord's Blood
	if the name of the player's tool contains "<gold><bold>Binding Blade":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least A rank in Swords OR a Lord's blood to wield the Binding Blade." to the player
				cancel event
	#Sieglinde Lord's Blood
	if the name of the player's tool contains "<gold><bold>Sieglinde":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least A rank in Swords OR a Lord's blood to wield Sieglinde." to the player
				cancel event
	#Siegmund Lord's Blood
	if the name of the player's tool contains "<gold><bold>Siegmund":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::lances} is less than 7500:
				send formatted "<light red>You need at least A rank in Lances OR a Lord's blood to wield Siegmund." to the player
				cancel event
	#Folkvangr Lord's Blood
	if the name of the player's tool contains "<gold><bold>Folkvangr":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::swords} is less than 7500:
				send formatted "<light red>You need at least A rank in Swords OR a Lord's blood to wield Folkvangr." to the player
				cancel event
	#Fensalir Lord's Blood
	if the name of the player's tool contains "<gold><bold>Fensalir":
		set {_slot} to checkSlots(player,"Lord's Blood")
		if {_slot} is 0:
			if {weaponrank.%player%::lances} is less than 7500:
				send formatted "<light red>You need at least A rank in Lances OR a Lord's blood to wield Fensalir." to the player
				cancel event
	#Ragnell
	if the name of the player's tool is "<gold><bold>Ragnell":
		if {weaponrank.%player%::swords} is less than 7500:
			send formatted "<light red>You need at least A rank in Swords to wield Ragnell."
			cancel event
	#Armads
	if the name of the player's tool is "<gold><bold>Armads":
		if {weaponrank.%player%::axes} is less than 7500:
			send formatted "<light red>You need at least A rank in Axes to wield Armads."
			cancel event
	#Parthia
	if the name of the player's tool is "<gold><bold>Parthia":
		if {weaponrank.%player%::bows} is less than 3750:
			send formatted "<light red>You need at least B rank in Bows to wield Parthia."
			cancel event
	#Durandal
	if the name of the player's tool is "<gold><bold>Durandal":
		if {weaponrank.%player%::swords} is less than 7500:
			send formatted "<light red>You need at least A rank in Swords to wield Durandal."
			cancel event
	#Mercurius
	if the name of the player's tool is "<gold><bold>Mercurius":
		if {weaponrank.%player%::swords} is less than 3750:
			send formatted "<light red>You need at least B rank in Swords to wield Mercurius."
			cancel event
	#Basilikos
	if the name of the player's tool is "<gold><bold>Basilikos":
		if {weaponrank.%player%::axes} is less than 3750:
			send formatted "<light red>You need at least B rank in Axes to wield Basilikos."
			cancel event
	#Basilikos
	if the name of the player's tool is "<gold><bold>Basilikos":
		if {weaponrank.%player%::axes} is less than 3750:
			send formatted "<light red>You need at least B rank in Axes to wield Basilikos."
			cancel event
	#Gradivus
	if the name of the player's tool is "<gold><bold>Gradivus":
		if {weaponrank.%player%::lances} is less than 3750:
			send formatted "<light red>You need at least B rank in Lances to wield Gradivus."
			cancel event
	#BSS
	if the name of the player's tool is "<gold><bold>Balder Side Sword":
		if {weaponrank.%player%::swords} is less than 3750:
			send formatted "<light red>You need at least B rank in Swords to wield the Balder Side Sword."
			cancel event
	#Rex Hasta
	if the name of the player's tool is "<gold><bold>Rex Hasta":
		if {weaponrank.%player%::lances} is less than 7500:
			send formatted "<light red>You need at least B rank in Lances to wield the Rex Hasta."
			cancel event
	#Meisterschwert
	if the name of the player's tool is "<gold><bold>Meisterschwert":
		if {weaponrank.%player%::swords} is less than 3750:
			send formatted "<light red>You need at least B rank in Lances to wield the Meisterschwert."
			cancel event
	#Dire Thunder
	if the name of the player's tool is "<gold><bold>Dire Thunder":
		if {weaponrank.%player%::magic} is less than 3750:
			send formatted "<light red>You need at least B rank in Magic to cast Dire Thunder."
			cancel event
	#Rhomphaia
	if the name of the player's tool is "<gold><bold>Rhomphaia":
		if {weaponrank.%player%::lances} is less than 3750:
			send formatted "<light red>You need at least B rank in Lances to wield Rhomphaia."
			cancel event
	#Alondite
	if the name of the player's tool is "<gold><bold>Alondite":
		if {weaponrank.%player%::swords} is less than 7500:
			send formatted "<light red>You need at least A rank in Swords to wield Alondite."
			cancel event
	#Guard Bow
	if the name of the player's tool is "<gold><bold>Guard Bow":
		if {weaponrank.%player%::bows} is less than 1875:
			send formatted "<light red>You need at least C rank in Bows to wield a Guard Bow."
			cancel event
	#Fujin Yumi
	if the name of the player's tool is "<gold><bold>Fujin Yumi":
		if {weaponrank.%player%::bows} is less than 3750:
			send formatted "<light red>You need at least B rank in Bows to wield the Fujin Yumi."
			cancel event
	#Brave Bow
	if the name of the player's tool is "<gold><bold>Brave Bow":
		if {weaponrank.%player%::bow} is less than 1875:
			send formatted "<light red>You need at least C rank in Bows to wield a Brave Bow."
			cancel event
	#Hauteclere
	if the name of the player's tool contains "<gold><bold>Hauteclere":
		if {weaponrank.%player%::Axes} is less than 3750:
			send formatted "<light red>You need at least B rank in Axes to wield Hauteclere."
			cancel event
	#
	#Prevent Hotswaps While Reloading
	if {reloading.%player%} is 1:
		cancel event
		send formatted "<red><bold>Can't swap weapons while reloading!"
	#Sacred Treasures produce particles
	if the name of the player's tool contains "<gold><bold>":
		play sound "entity.player.levelup" with volume 0.5 and pitch 2 at the player
		play 15 (firework spark with speed 0) at the player
		play 15 (critical hit with speed 0) at the player
		play 15 (snow shovel with speed 0) at the player
		
#Defiant Skills
on heal:
	#Sacred Treasure "FEH Brazen" effects
	if player's health is more than (player's max health * 0.7):
		#Folkvangr
		if the name of the player's tool contains "<gold><bold>Folkvangr":
			if getEntityVarByName(player,"FolkvangrDefiantBuff") is not "-2":
				set {_debug} to changeEntityStatBuff(player,"STR",-25)
				set {_debug} to changeEntityStatBuff(player,"DEF",-25)
				send formatted "<yellow>Folkvangr's effect wore off!" to the player
				set {_debug} to clearEntityVariableByName(player,"FolkvangrDefiantBuff")
		#Mystletainn
		else if the name of the player's tool contains "<gold><bold>Mystletainn":
			if getEntityVarByName(player,"MystletainnWrathBuff") is "-2":
				subtract 30 from {sklbuff.%player%}
				send formatted "<yellow>Mystletainn's effect wore off!" to the player
				set {_debug} to clearEntityVariableByName(player,"MystletainnWrathBuff")
	#Defiant Skills
	if player's health is less than (player's max health * 0.5):
		#Defiant Attack
		if getEntitySkillsInHand(player,"Defiant Attack",2,1) is more than 0:
			remove strength from the player
			apply strength 4 to the player for 90 seconds
			show mob spawner flames on the player
			set {_debug} to setEntityVariableByName(player,"DefiantAttackBuff",1)
		#Defiant Speed
		if getEntitySkillsInHand(player,"Defiant Speed",2,1) is more than 0:
			remove speed from the player
			apply speed 4 to the player for 90 seconds
			show mob spawner flames on the player
			set {_debug} to setEntityVariableByName(player,"DefiantSpeedBuff",1)
		#Defiant Resistance
		if getEntitySkillsInHand(player,"Defiant Resistance",2,1) is more than 0:
			remove resistance from the player
			apply resistance 4 to the player for 90 seconds
			show mob spawner flames on the player
			set {_debug} to setEntityVariableByName(player,"DefiantResistanceBuff",1)
		if getEntitySkillsInHand(player,"Wrath",2,2) is more than 0:
			set {_debug} to setEntityVariableByName(player,"Wrath",1)
			show mob spawner flames on the player
	#Remove Defiant bonuses if healed past HP threshold
	else:
		if getEntityVarByName(player,"DefiantAttackBuff") is not "-2":
			remove strength from the player
			send formatted "<light red>Defiant Strength bonus deactivated!" to the player
			set {_debug} to clearEntityVariableByName(player,"DefiantAttackBuff")
		else if getEntityVarByName(player,"DefiantSpeedBuff") is not "-2":
			remove swiftness from the player
			send formatted "<light red>Defiant Speed bonus deactivated!" to the player
			set {_debug} to clearEntityVariableByName(player,"DefiantSpeedBuff")
		else if getEntityVarByName(player,"DefiantResistanceBuff") is not "-2":
			remove resistance from the player
			send formatted "<light red>Defiant Resistance bonus deactivated!" to the player
			set {_debug} to clearEntityVariableByName(player,"DefiantResistanceBuff")
		else if getEntityVarByName(player,"Wrath") is not "-2":
			send formatted "<light red>Wrath's bonus deactivated!" to the player
			set {_debug} to clearEntityVariableByName(player,"WrathBuff")
		
#Defiant skills, proc on damage.
on damage of a player:
	if (victim's health - final damage) is less than or equal to (victim's max health * 0.5):
		#Defiant Attack
		if getEntitySkillsInHand(victim,"Defiant Attack",2,1) is more than 0:
			if getEntityVarByName(victim,"DefiantAttackBuff") is "-2":
				remove strength from the victim
				apply strength 4 to the victim for 90 seconds
				show mob spawner flames on the victim
				set {_debug} to setEntityVariableByName(victim,"DefiantAttackBuff",1)
				send formatted "<yellow>Defiant Attack bonus now active!" to the victim
		#Defiant Speed
		if getEntitySkillsInHand(victim,"Defiant Speed",2,1) is more than 0:
			if getEntityVarByName(victim,"DefiantSpeedBuff") is "-2":
				remove speed from the victim
				apply speed 4 to the victim for 90 seconds
				show mob spawner flames on the victim
				set {_debug} to setEntityVariableByName(victim,"DefiantAttackBuff",1)
				send formatted "<yellow>Defiant Speed bonus now active!" to the victim
		#Defiant Resistance
		if getEntitySkillsInHand(victim,"Defiant Resistance",2,1) is more than 0:
			if getEntityVarByName(victim,"DefiantResistanceBuff") is "-2":
				remove resistance from the victim
				apply resistance 4 to the victim for 90 seconds
				show mob spawner flames on the victim
				set {_debug} to setEntityVariableByName(victim,"DefiantResistanceBuff",1)
				send formatted "<yellow>Defiant Resistance bonus now active!" to the victim
		#Folkvangr Unique
		if the name of the victim's tool contains "<gold><bold>Folkvangr":
			if the 6th line of the lore of the victim's tool contains "<white><bold>Refined: Unique":
				if (victim's health - damage) is less than (victim's health * 0.7):
					if getEntityVarByName(victim,"FolkvangrDefiantBuff") is "-2":
						set {_debug} to setEntityVariableByName(victim,"FolkvangrDefiantBuff",1)
						set {_debug} to changeEntityStatBuff(victim,"STR",25)
						set {_debug} to changeEntityStatBuff(victim,"DEF",25)
						send formatted "<yellow>Folkvangr's effect activated!" to the victim
						show mob spawner flames on the victim
		#Mystletainn
		if the name of the victim's tool contains "<gold><bold>Mystletainn":
			if (victim's health - damage) is less than (victim's health * 0.7):
				if getEntityVarByName(victim,"MystletainnWrathBuff") is "-2":
					set {_debug} to setEntityVariableByName(victim,"MystletainnWrathBuff",1)
					set {_debug} to changeEntityStatBuff(victim,"SKL",30)
					send formatted "<yellow>Mystletainn's effect activated!" to the victim
					show mob spawner flames on the victim
		
#TF2-Style Rocket Jumping Behavior
on damage of a player:
	if damage cause is block explosion:
		if {t_AllowRocketJump.%victim%} is true:
			send "<light yellow>Rocket Jump!" to the victim
			#Main momentum behavior
			loop all entities in radius 3 of the victim:
				if metadata value "gunType" of the loop-entity is "8":
					set {_BonusMag} to 0.9/(distance between victim and loop-entity + 0.01)
					send "%{_BonusMag}%" to the victim
					set {_playerY} to victim's Y-Coordinate + 1
					set {_playerX} to victim's x-coordinate
					set {_playerZ} to victim's z-coordinate
					set {_rocketY} to loop-entity's Y-Coordinate
					set {_rocketX} to loop-entity's X-Coordinate
					set {_rocketZ} to loop-entity's Z-Coordinate
					set {_PlayerToRocketX} to {_playerX} - {_rocketX}
					set {_playerToRocketZ} to {_playerZ} - {_rocketZ}
					set {_verticalGain} to getAbsoluteValue({_playerY} - {_rocketY})
					send "%{_verticalGain}%" to the victim
					set {_rocketDirection} to "%direction from victim to loop-entity%"
					set {_splitDirections::*} to {_rocketDirection} split at " and "
					#broadcast "%{_rocketDirection}%"
					push the victim {_splitDirections::1} at speed ({_verticalGain} + {_bonusMag})
					push the victim {_splitDirections::3} at speed ({_verticalGain} + {_bonusMag})
					#push the victim in z direction at speed ({_playerToRocketZ} + {_bonusMag})
					push the victim upwards at speed ({_verticalGain} + {_BonusMag})
				else if metadata value "SPELL" of the loop-entity is "1":
					set {_BonusMag} to 1/(distance between victim and loop-entity)
					send "%{_BonusMag}%" to the victim
					set {_playerY} to victim's Y-Coordinate + 1
					set {_playerX} to victim's x-coordinate
					set {_playerZ} to victim's z-coordinate
					set {_rocketY} to loop-entity's Y-Coordinate
					set {_rocketX} to loop-entity's X-Coordinate
					set {_rocketZ} to loop-entity's Z-Coordinate
					set {_PlayerToRocketX} to {_playerX} - {_rocketX}
					set {_playerToRocketZ} to {_playerZ} - {_rocketZ}
					set {_verticalGain} to getAbsoluteValue({_playerY} - {_rocketY})
					send "%{_verticalGain}%" to the victim
					set {_rocketDirection} to "%direction from victim to loop-entity%"
					set {_splitDirections::*} to {_rocketDirection} split at " and "
					#broadcast "%{_rocketDirection}%"
					push the victim {_splitDirections::1} at speed ({_verticalGain} + {_bonusMag})
					push the victim {_splitDirections::3} at speed ({_verticalGain} + {_bonusMag})
					#push the victim in z direction at speed ({_playerToRocketZ} + {_bonusMag})
					push the victim upwards at speed ({_verticalGain} + {_BonusMag})
			#Reduce damage of Rocket Jumps.
			set damage to (damage + {_verticalGain}) / 2
			#Make the reduced spread perk (Controlled Shot) grant an even larger reduction to self-damage from rocket jumping as an easter egg.
			set {_gunboats} to checkSlots(victim,"Controlled Shot")
			if {_gunboats} is 1:
				#"Gunboats" effect reduces self-damage by 66%
				set damage to damage * 0.33
			set {_magnitude} to (sqrt(((x of victim's velocity ^ 2) + (z of victim's velocity ^ 2)))) * 0.33
			send "%{_magnitude}%" to victim
			while {_magnitude} is more than 0.05:
				add 0.05 to {_decay}
				push the victim in horizontal direction of the victim at speed {_magnitude}
				set {_magnitude} to {_magnitude} / (1 + {_decay})
				#send formatted "%{_magnitude}%"
				if victim is on ground:
					push the victim in horizontal direction of the victim at speed {_magnitude}
					exit 1 loop
				wait 1 tick
						
#Misc
on death:
	#Pursuit
	set {_sklcheck} to checkSlots(attacker,"Pursuit")
	if {_sklcheck} is 1:
		if attacker is riding:
			apply swiftness 4 to the attacker for 4 seconds
			loop all horses in radius 1 of the attacker:
				apply swiftness 4 to the loop-horse for 4 seconds
				exit 1 loop
			buffSFX(attacker)
	#Glory Kill
	if the attacker is a player:
		if the 1st line of the lore of the attacker's chestplate contains "Glory Kills":
			if the attacker's held item is empty:
				remove speed from the attacker
				remove haste from the attacker
				remove resistance from the attacker
				remove strength from the attacker
				wait a tick
				heal the attacker by (attacker's maximum health * 0.25)
				increase the attacker's food level by 3
				apply speed 3 to the attacker for 6 seconds
				apply haste 4 to the attacker for 6 seconds
				apply resistance 3 to the attacker for 6 seconds
				apply strength 4 to the attacker for 6 seconds
				send formatted "<red><bold>GLORY KILL!" to the attacker
				play sound "entity.generic.explode" with volume 1 and pitch 1 at victim for attacker
				play 60 (red wool break with speed 2) at the victim
	#Capture
	if {capture.%attacker%} is set:
		if the 4th line of the lore of the attacker's tool contains "Capture":
			drop the victim's tool at the attacker
			drop the victim's helmet at the attacker
			drop the victim's chestplate at the attacker
			drop the victim's leggings at the attacker
			drop the victim's boots at the attacker
			send formatted "<light green>%victim% was captured!" to the attacker
	if citizen id of the victim is not set:
		#Bleedout
		if {farewells.%victim%} is 1:
			if {farewellskip.%victim%} is 1:
				cancel event
				apply resistance 10 to the victim for 15 seconds
				apply weakness 99 to the victim for 15 seconds
				apply slowness 99 to the victim for 15 seconds
				apply mining fatigue 99 to the victim for 15 seconds
				set {bleedout.%victim%} to 1
				set the victim's health to 0.5
				send formatted "<red><bold>You have been critically wounded. You have 15 seconds to be revived by another player..." to the victim
				broadcast formatted "<red><bold>%victim's tablist name% <red><bold>has been downed!"
				make victim say "%{downedQuote.%victim%}%"
				loop 15 times:
					if {bleedout.%victim%} is 0:
						send formatted "<light blue><bold>Another player saved you from imminent death." to the victim
						make victim say "%{healedQuote.%victim%}%"
						heal the victim by 5
						apply regeneration 3 to the victim for 5 seconds
						remove blindness from the victim
						remove slowness from the victim
						remove weakness from the victim
						remove resistance from the victim
						remove mining fatigue from the victim
						set {farewellskip.%victim%} to 1
						exit 1 loop
					wait 1 second
				if {bleedout.%victim%} is 1:
					set {farewellskip.%victim%} to 0
					#send formatted "<red><bold>You were unable to be saved..."
					kill the victim
			else:
				send formatted "<red><bold>You were unable to be saved..."
		#Last Stand
		if {bhealth.%victim%} is 1:
			cancel event
			set the victim's health to 2
			apply resistance 5 to the victim for 2 seconds
			set {bhealth.%victim%} to 0
			send formatted "<light red>You're on your last leg.." to the victim
			wait 15 seconds
			set {bhealth.%victim%} to 1
			send formatted "<light green>Your strength has returned." to the victim
	#Miracle
	if the 5th line of the lore of the victim's tool contains "Miracle":
		set {_level} to (((getEntityStatTotal(victim,"SKL"))) * 0.5)
		if {_level} is greater than 50:
			set {_level} to 50
		if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
			add 15 to {_level}
		if the 6th line of the lore of the victim's tool contains "Slaying":
			set {_level} to {_level} + 10
		if the name of victim's tool is "<gold><bold>Rex Hasta":
			if the 6th line of the lore of victim's tool contains "Unique":
				add 20 to {_level}
		else if the name of victim's tool is "<gold><bold>Hauteclere":
			if the 6th line of the lore of victim's tool contains "Unique":
				add 20 to {_level}
		add getEntityVarByName(victim,"crushing") parsed as integer to {_level}
		chance of {_level}%:
			cancel event
			set the victim's health to 5
			if the 6th line of the lore of the victim's tool contains "Koenig":
				heal the victim by 1.5
			if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
				heal the victim by 2.5
			apply weakness 4 to the attacker for 2 seconds
			apply resistance 5 to the victim for 2 seconds
			push the attacker backwards at speed 1.5
			send formatted "<light yellow><bold>Miracle was activated!" to victim
			send formatted "<light red><bold>The foe's Miracle was activated!" to attacker
			play 80 (crit with speed 1) at the victim
			play 80 (wool break with speed 1) at the victim
			strike lightning effect at the victim
			play sound "item.totem.use" with volume 0.5 and pitch 0.5 at victim for attacker
			play sound "item.totem.use" with volume 0.5 and pitch 1 at victim for victim
	#Miracle - Perk
	set {_slot} to checkSlots(victim,"Miracle")
	if {_slot} is 1:
		set {_level} to (((getEntityStatTotal(victim,"SKL"))) * 0.5)
		if {_level} is greater than 50:
			set {_level} to 50
		chance of {_level}%:
			cancel event
			set the victim's health to 5
			apply weakness 4 to the attacker for 2 seconds
			apply resistance 5 to the victim for 2 seconds
			push the attacker backwards at speed 1.5
			send formatted "<light yellow><bold>Miracle was activated!" to victim
			send formatted "<light red><bold>The foe's Miracle was activated!" to attacker
			play 80 (crit with speed 1) at the victim
			play 80 (wool break with speed 1) at the victim
			strike lightning effect at the victim
			play sound "item.totem.use" with volume 0.5 and pitch 0.5 at victim for attacker
			play sound "item.totem.use" with volume 0.5 and pitch 1 at victim for victim
	#Tyrfing - Miracle
	if the name of the victim's tool is "<gold><bold>Tyrfing":
		set {_level} to (((getEntityStatTotal(victim,"SKL"))) * 0.5)
		if {_level} is greater than 50:
			set {_level} to 50
		if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
			add 15 to {_level}
		if the 6th line of the lore of the victim's tool contains "Slaying":
			set {_level} to {_level} + 10
		add getEntityVarByName(victim,"crushing") parsed as integer to {_level}
		chance of {_level}%:
			cancel event
			set the victim's health to 5
			if the 6th line of the lore of the victim's tool contains "Koenig":
				heal the victim by 1.5
			if the 2nd line of the lore of the victim's tool contains "Shield Pulse":
				heal the victim by 2.5
			apply weakness 4 to the attacker for 2 seconds
			apply resistance 5 to the victim for 2 seconds
			push the attacker backwards at speed 1.5
			send formatted "<light yellow><bold>Tyrfing's Miracle was activated!" to victim
			send formatted "<light red><bold>The foe's Miracle was activated!" to attacker
			play 80 (crit with speed 1) at the victim
			play 80 (wool break with speed 1) at the victim
			strike lightning effect at the victim
			play sound "item.totem.use" with volume 0.5 and pitch 0.5 at victim for attacker
			play sound "item.totem.use" with volume 0.5 and pitch 1 at victim for victim
	#Final death behavior
	if victim's name does not contain "Guard":
		if victim is player:
			if event is not cancelled:
				add 1 to {deaths.%victim%}
				set {lastDeath.%player%} to the victim's location
				#spawn 1 zombie at the victim's location
				set {_xpLost} to ceil(victim's level * 0.1)
				set {_moneyLost} to ceil(victim's balance * 0.25)
				subtract {_moneyLost} from the victim's balance
				make victim execute command "/xp -%{_xpLost}%l"
				send formatted "<light red>Lost %{_xpLost}% XP levels and %{_moneyLost}% gold." to the victim
						
#Mob loot handler
on death of a monster:
	#Resourceful Perk
	set {_perk} to checkSlots(attacker,"Resourceful")
	if {_perk} is 1:
		chance of 75%:
			drop 1 gunpowder at the victim
		chance of 50%:
			drop 1 iron nugget at the victim
			chance of 15%:
				drop 1 iron ingot at the victim
		chance of 33%:
			drop 1 gold nugget at the victim
			chance of 15%:
				drop 1 gold ingot at the victim
	if victim's world is not "Salindrum":
		#Helmund boss bonus
		if the name of the victim is "<light red>Helmund":
			loop getEntityStat(victim,"lvl") times:
				chance of 5%:
					drop 1 diamond block at the victim
				chance of 30%:
					drop 1 diamond at the victim
				chance of 25%:
					drop 1 emerald at the victim
					chance of 20%:
						drop 1 emerald block at the victim
				drop 1 gold ingot at the victim
				chance of 25%:
					drop 1 gold block at the victim
				drop 1 iron ingot at the victim
				chance of 50%:
					drop 1 iron block at the victim
			add ceil(5 * getEntityStat(victim,"lvl")) to {_cash}
			add ceil(getEntityStat(attacker,"lvl") ^ 1.15) to {_xp}
			send formatted "<gold>Helmund has been defeated!" to the attacker
			make player execute command "/qhelmundkilled"
			loop all monsters in radius 128 of the victim:
				if loop-monster is alive:
					clear {isBoss.%loop-monster%}
					kill the loop-monster
					play 80 (yellow wool break with speed 1) at the loop-monster
		clear {str.%victim%}
		clear {def.%victim%}
		clear {spd.%victim%}
		clear {skl.%victim%}
		clear {res.%victim%}
		set {_xp} to 10
		set {_cash} to 0
		#Midas Touch (Perk)
		set {_sklchk} to checkSlots(attacker,"Midas Touch")
		if {_sklchk} is 1:
			chance of 20%:
				give paper named "<light green><bold>Bullion (S)" with lore "<white>Right-click to gain 25 gold!" to the attacker
			chance of 5%:
				give paper named "<light green><bold>Bullion (M)" with lore "<white>Right-click to gain 50 gold!" to the attacker
			chance of 1%:
				chance of 10%:
					give paper named "<light green><bold>Bullion (L)" with lore "<white>Right-click to gain 75 gold!" to the attacker
		#Elite Mode
		if {elitemode.%attacker%} is true:
			add ceil(getEntityStat(attacker,"lvl") ^ 0.5) to {_xp}
			send formatted "<light blue>Elite Mode granted +%{_xp}% xp." to the attacker
		#Ring Bonuses
		loop all items in the attacker's inventory:
			if the name of the loop-item is "<yellow><bold>Thief Ring":
				chance of (({res.%attacker%} + {resbuff.%attacker%} + 25) / 2)%:
					give paper named "<light green><bold>Bullion (S)" with lore "<white>Right-click to gain $25!" to the attacker
			else if the name of the loop-item is "<light blue><bold>Elite Ring":
				add ceil(getEntityStat(attacker,"lvl") ^ 1.005) to {_xp}
			else if the name of the loop-item is "<gold><bold>Crest of Mastery":
				add ceil(getEntityStat(attacker,"lvl") ^ 1.15) to {_xp}
		#Boss Bonuses
		if {t_isBoss.%victim%} is set:
			loop {t_lvl.%victim%} times:
				chance of 1%:
					chance of 25%:
						drop 1 diamond block at the victim
				chance of 15%:
					drop 1 diamond at the victim
				chance of 25%:
					drop 1 emerald at the victim
					chance of 10%:
						drop 1 emerald block at the victim
				chance of 50%:
					drop 1 gold ingot at the victim
					chance of 10%:
						drop 1 gold block at the victim
				drop 1 iron ingot at the victim
				chance of 10%:
					drop 1 iron block at the victim
			add ceil(5 * getEntityStat(victim,"lvl")) to {_cash}
			add ceil(getEntityStat(attacker,"lvl") ^ 1.5) to {_xp}
			clear {isBoss.%victim%}
		#Treasure mob bonus
		if the name of the victim contains "<gold>Treasure":
			loop (10 + {t_lvl.%victim%}) times:
				chance of 1%:
					chance of 1%:
						drop 1 diamond block at the victim
				chance of 5%:
					drop 1 diamond at the victim
				chance of 14%:
					drop 1 emerald at the victim
					chance of 5%:
						drop 1 emerald block at the victim
				chance of 25%:
					drop 1 gold ingot at the victim
					chance of 5%:
						drop 1 gold block at the victim
				drop 1 iron ingot at the victim
				chance of 5%:
					drop 1 iron block at the victim
			add ceil(12 * getEntityStat(victim,"lvl")) to {_cash}
			add ceil(getEntityStat(attacker,"lvl") ^ 1.35) to {_xp}
		#Money & XP Base Rewards
		#Base money reward
		add 4 to {_cash}
		#Level scaling reward
		add ((getEntityStat(attacker,"lvl")) + ((getEntityStat(attacker,"promoted")) * 5)) * 0.15 to {_cash}
		add ((getEntityStat(attacker,"lvl")) + ((getEntityStat(attacker,"promoted")) * 5)) * 0.15 to {_xp}
		#Player is lower level
		if (((getEntityStat(attacker,"lvl")) + (((getEntityStat(attacker,"promoted")) - 1) * 10)) - (getEntityStat(victim,"lvl"))) is less than 0:
			add ((getEntityStat(victim,"lvl")) - ((getEntityStat(attacker,"lvl")) + (((getEntityStat(attacker,"promoted")) - 1) * 10))) * 5 to {_cash}
			add ((getEntityStat(victim,"lvl")) - ((getEntityStat(attacker,"lvl")) + (((getEntityStat(attacker,"promoted")) - 1) * 10))) * 8 to {_XP}
		#Alstair bonuses
		if victim's world is "Alstair":
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.6) to {_xp}
			#add 5 to {_cash}
		else if victim's world is "Alstair_Nether":
			add 1 to {_cash}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.7) to {_xp}
		else if victim's world is "Alstair_End":
			add 3 to {_cash}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.8) to {_xp}
		#Paragon bonus
		set {_slot} to checkSlots(attacker,"Paragon")
		if {_slot} is 1:
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.35) to {_xp}
		#Personal Difficulty bonus
		if {perdiff.%attacker%} is 3:
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.5) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.3) to {_cash}
		else if {perdiff.%attacker%} is 4:
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.65) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.4) to {_cash}
		else if {perdiff.%attacker%} is 5:
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.8) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.5) to {_cash}
		else if {perdiff.%attacker%} is 6:
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.95) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.6) to {_cash}
		else if {perdiff.%attacker%} is 7:
			add ceil(getEntityStat(attacker,"lvl") ^ 1.1) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.7) to {_cash}
		else if {perdiff.%attacker%} is 8:
			add ceil(getEntityStat(attacker,"lvl") + 1 ^ 1.15) to {_xp}
			add ceil(getEntityStat(attacker,"lvl") / 2 ^ 0.8) to {_cash}
	#Sacred Treasure Paragon Bonuses
	if the name of the attacker's tool contains "<gold><bold>Mercurius":
		add ceil((getEntityStat(attacker,"lvl") ^ 0.75) - floor(getEntityStat(attacker,"lvl") ^ 0.3)) to {_xp}
		make console execute command "/xp %{_xp}% %attacker%"
		send formatted "<light green>Mercurius: +%{_xp}% bonus EXP." to the attacker
	else if the name of the attacker's tool contains "<gold><bold>Gradivus":
		add ceil((getEntityStat(attacker,"lvl") ^ 0.75) - floor(getEntityStat(attacker,"lvl") ^ 0.3)) to {_xp}
		make console execute command "/xp %{_xp}% %attacker%"
		send formatted "<light green>Gradivus: +%{_xp}% bonus EXP." to the attacker
	else if the name of the attacker's tool contains "<gold><bold>Parthia":
		add ceil((getEntityStat(attacker,"lvl") ^ 0.75) - floor(getEntityStat(attacker,"lvl") ^ 0.3)) to {_xp}
		make console execute command "/xp %{_xp}% %attacker%"
		send formatted "<light green>Parthia: +%{_xp}% bonus EXP." to the attacker
	#Blessed Sword
	else if the name of the attacker's tool contains "<gold><bold>Blessed Sword":
		chance of (50 + ({res.%attacker%} + {resbuff.%attacker%} / 2))%:
			drop 1 steak at the victim
			increase the player's food level by 2
			send formatted "<yellow>Plenitude activated!" to the attacker
	#Experience Sapper
	if the 2nd line of the lore of the attacker's tool contains "Experience Sapper":
		add ceil(getEntityStat(attacker,"lvl") - 2 ^ 0.35) to {_xp}
		make console execute command "/xp %{_xp}% %attacker%"
		send formatted "<light green>Experience Sapper: +%{_xp}% bonus EXP." to the attacker
	#Grant total bonuses
	if {_xp} is more than 0:
		set {_xp} to floor({_xp})
		addClassXP(attacker,{_XP})
		make console execute command "/xp %{_xp}% %attacker%"
		send formatted "<light yellow>+%{_xp}% EXP earned." to the attacker
	if {_cash} is more than 0:
		set {_cash} to floor({_cash} ^ 0.8)
		add {_cash} to attacker's balance
		send formatted "<light yellow>+$%{_cash}% gold earned." to the attacker
	#Plenitude
	if the 2nd line of the lore of the attacker's tool contains "Plenitude":
		chance of (50 + ({res.%attacker%} + {resbuff.%attacker%} / 2))%:
			drop 1 steak at the victim
			increase the attacker's food level by 1
			send formatted "<yellow>Plenitude activated!" to the attacker
	#Despoil
	if the 2nd line of the lore of the attacker's tool contains "Despoil":
		chance of (10 + ({res.%attacker%} + {resbuff.%attacker%} / 4))%:
			give paper named "<light green><bold>Bullion (S)" with lore "<white>Right-click to gain $25!" to the attacker
			chance of (5 + ({res.%attacker%} + {resbuff.%attacker%} / 4))%:
				give paper named "<light green><bold>Bullion (M)" with lore "<white>Right-click to gain $50!" to the attacker
				chance of (1 + ({res.%attacker%} + {resbuff.%attacker%} / 4))%:
					give paper named "<light green><bold>Bullion (L)" with lore "<white>Right-click to gain $75!" to the attacker
					chance of ({res.%attacker%} + {resbuff.%attacker%} / 4)%:
						give paper named "<light green><bold>Bullion (XL)" with lore "<white>Right-click to gain $100!" to the attacker
	#Focus Skills
	if getEntitySkillsInHand(attacker,"STR Focus",2,1) is more than 0:
		set {_debug} to setEntityVariableByName(attacker,"strfocusbuff",getEntityVarByName(attacker,"strfocusbuff") parsed as integer + 10)
		set {_debug} to changeEntityStatBuff(attacker,"STR",10)
	else if getEntitySkillsInHand(attacker,"DEF Focus",2,1) is more than 0:
		set {_debug} to setEntityVariableByName(attacker,"deffocusbuff",getEntityVarByName(attacker,"deffocusbuff") parsed as integer + 10)
		set {_debug} to changeEntityStatBuff(attacker,"DEF",10)
	else if getEntitySkillsInHand(attacker,"SPD Focus",2,1) is more than 0:
		set {_debug} to setEntityVariableByName(attacker,"spdfocusbuff",getEntityVarByName(attacker,"spdfocusbuff") parsed as integer + 10)
		set {_debug} to changeEntityStatBuff(attacker,"SPD",10)
	else if getEntitySkillsInHand(attacker,"SKL Focus",2,1) is more than 0:
		set {_debug} to setEntityVariableByName(attacker,"sklfocusbuff",getEntityVarByName(attacker,"sklfocusbuff") parsed as integer + 10)
		set {_debug} to changeEntityStatBuff(attacker,"SKL",10)
	else if getEntitySkillsInHand(attacker,"MAG Focus",2,1) is more than 0:
		set {_debug} to setEntityVariableByName(attacker,"magfocusbuff",getEntityVarByName(attacker,"magfocusbuff") parsed as integer + 10)
		set {_debug} to changeEntityStatBuff(attacker,"RES",10)
	play 10 (redstone block break with speed 1) at the victim
	#Small chance of Green/Gold Herbs being dropped on mob death.
	chance of 33%:
		play 30 (light green wool break with speed 1) at the victim
		drop 1 green dye named "<light green><bold>Sacred Herb" with lore "<white>A medicinal herb used to heal wounds.","<white>Right-click to restore 6 hearts.","<white>Can also be picked up off the ground to restore 3 hearts if wounded." at the victim
	chance of 10%:
		play 30 (gold block break with speed 1) at the victim
		drop 1 yellow dye named "<light yellow><bold>Golden Herb" with lore "<white>Powerful medicinal herb with extreme healing power.","<white>Right-click to restore 12 hearts.","<white>Can also be picked up off the ground to restore 6 hearts if wounded." at the victim
						
#Broad Shot
on shoot:
	if the 1st line of the lore of the shooter's tool contains "Broad Shot":
		if {t_BroadShot.%shooter%} is not set:
			set {t_BroadShot.%shooter%} to 0
			loop 2 times:
				if shooter has 2 arrows:
					add 1 to {t_BroadShot.%shooter%}
					remove 1 arrow from the shooter
					make the shooter shoot an arrow at speed 2.75
					set {_xRNG} to a random number from -0.6 to 0.6
					push the last shot projectile right at speed {_xRNG}
			remove 1 arrow from the shooter
	if {t_BroadShot.%shooter%} is set:
		#send "broad shot: %{t_BroadShot.%shooter%}%" to the shooter
		subtract 1 from {t_BroadShot.%shooter%}
		if {t_BroadShot.%shooter%} is less than or equal to 0:
			clear {t_BroadShot.%shooter%}

#Bullion
on right-click with paper:
	if the name of the event-item is "<light green><bold>Money Voucher":
		remove 1 of tool from tool
		add 100 to the player's balance
		send formatted "<light green><bold>Redeemed the voucher for 100 Gold! New balance: %player's money%" to the player
	else if the name of the event-item is "<light green><bold>Bullion (S)":
		remove 1 of tool from tool
		add 25 to the player's balance
		send formatted "<light green><bold>Redeemed the Bullion (S) for 25 Gold! New balance: %player's money%" to the player
	else if the name of the event-item is "<light green><bold>Bullion (M)":
		remove 1 of tool from tool
		add 50 to the player's balance
		send formatted "<light green><bold>Redeemed the Bullion (M) for 50 Gold! New balance: %player's money%" to the player
	else if the name of the event-item is "<light green><bold>Bullion (L)":
		remove 1 of tool from tool
		add 75 to the player's balance
		send formatted "<light green><bold>Redeemed the Bullion (L) for 75 Gold! New balance: %player's money%" to the player
	else if the name of the event-item is "<light green><bold>Bullion (XL)":
		remove 1 of tool from tool
		add 100 to the player's balance
		send formatted "<light green><bold>Redeemed the Bullion (XL) for 100 Gold! New balance: %player's money%" to the player

#Players can stall themselves in the air by attacking.
on left click:
	if player is not on ground:
		if player's tool is not air:
			if player's game mode is not creative:
				if player is not sneaking:
					if player's tool is any sword:
						set {_HangOK} to true
					else if player's tool is any axe:
						set {_HangOK} to true
					else if player's tool is any shovel:
						set {_HangOK} to true
					else if player's tool is a bow:
						set {_HangOK} to true
					else if the name of the player's tool contains "Magic Wand":
						set {_HangOK} to true
					else if the player's tool is a book:
						set {_HangOK} to true
					if {_HangOK} is true:
						if {attackHangtimeCount.%player%} is more than 0:
							if {inHangtime.%player%} is not true:
								subtract 1 from {attackHangtimeCount.%player%}
								send formatted "<bold><italics>Air Hang: %{attackHangtimeCount.%player%}%"
								set {_magnitude} to sqrt((x of player's velocity ^ 2) + (z of player's velocity ^ 2)) + 0.15
								set {_magnitude} to {_magnitude} / (5 - {attackHangtimeCount.%player%})
								push the player in horizontal direction of the player at speed {_magnitude}
								loop 4 times:
									set {_magnitude} to (y of player's velocity)
									#Cap hangtime boost if it exceeds a specific amount, and take absolute value.
									if {_magnitude} is less than 0:
										set {_magnitude} to {_magnitude} * -1.05
									else:
										set {_magnitude} to 0.05
									push the player upwards at speed {_magnitude}
									wait 1 tick
									set {inHangtime.%player%} to true
								clear {inHangtime.%player%}
	#Firearms Reload Behavior
	set {_quick} to checkSlots(player,"Fast Fingers")
	set {_gunslinger} to checkSlots(player,"Resourceful")
	if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 1/2":
		if {_gunslinger} is 1:
			set {_reload} to 3
		else:
			set {_reload} to 6
		if the player has 12 gold nuggets:
			set {reloading.%player%} to 1
			set {_quick} to checkSlots(player,"Fast Fingers")
			if {_quick} is 1:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait 0.5 seconds
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait 0.5 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			else:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait a second
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait a second
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			set {_nugs} to "%{_reload}% gold nuggets" parsed as item
			remove {_nugs} from the player
			set the name of the player's tool to "<red><bold>Super Shotgun | Clip: 2/2"
			send formatted "<red><bold>Locked and loaded! Find some meat!"
			set {reloading.%player%} to 0
		else:
			send formatted "<red><bold>Not enough ammo!"
	else if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 0/2":
		if {_gunslinger} is 1:
			set {_reload} to 6
		else:
			set {_reload} to 12
		if the player has 12 gold nuggets:
			set {reloading.%player%} to 1
			set {_quick} to checkSlots(player,"Fast Fingers")
			if {_quick} is 1:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait 0.5 seconds
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait 0.5 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			else:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait a second
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait a second
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			set {_nugs} to "%{_reload}% gold nuggets" parsed as item
			remove {_nugs} from the player
			set the name of the player's tool to "<red><bold>Super Shotgun | Clip: 2/2"
			send formatted "<red><bold>Locked and loaded! Find some meat!"
			set {reloading.%player%} to 0
		else if the player has 6 gold nuggets:
			set {reloading.%player%} to 1
			set {_quick} to checkSlots(player,"Fast Fingers")
			if {_quick} is 1:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait 0.5 seconds
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait 0.5 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			else:
				play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
				wait a second
				play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
				wait a second
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
			set {_reload} to {_reload} / 2
			set {_nugs} to "%{_reload}% gold nuggets" parsed as item
			remove {_nugs} from the player
			set the name of the player's tool to "<red><bold>Super Shotgun | Clip: 1/2"
			send formatted "<red><bold>Could only load one barrel!"
			set {reloading.%player%} to 0
		else:
			send formatted "<red><bold>Not enough ammo!"
	else if the name of the player's tool contains "<red><bold>Super Shotgun | Clip: 2/2":
		send formatted "<red><bold>Already loaded! Find some meat!"
	#Flintlock Pistol
	if the name of the player's tool is "<light gray>Flintlock Pistol":
		if the 8th line of the lore of the player's tool is "0":
			if {reloading.%player%} is not set:
				if the player has 2 cobblestone:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.25 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.25 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.5 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.5 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "1"
						if {_gunslinger} is 1:
							remove 1 cobblestone from the player
						else:
							remove 2 cobblestone from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need at least 2 cobblestone to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already loaded!"
	#Iron Musket
	if the name of the player's tool is "<light gray>Iron Musket":
		if the 8th line of the lore of the player's tool is "0":
			if {reloading.%player%} is not set:
				if the player has 1 cobblestone:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.35 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.35 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.65 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.65 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "1"
						if {_gunslinger} is 1:
							chance of 50%:
								remove 1 cobblestone from the player
						else:
							remove 1 cobblestone from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need an iron nugget to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already loaded!"
	#Iron Pistol
	if the name of the player's tool is "<light gray>Iron Pistol":
		if the 8th line of the lore of the player's tool is not "8":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 8) * -1) / 2)
				set {_item} to "%{_cost}% iron nugget" parsed as item
				if the amount of iron nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.325 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.325 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.625 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.625 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "8"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron nugget from the player
						else:
							loop {_cost} times:
								remove 1 iron nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% iron nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Redstone Rifle
	if the name of the player's tool is "<light gray>Redstone Repeater":
		if the 8th line of the lore of the player's tool is not "30":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 30) * -1) / 2)
				set {_item} to "%{_cost}% iron nugget" parsed as item
				if the amount of iron nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.325 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.325 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.625 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.625 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "30"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron nugget from the player
						else:
							loop {_cost} times:
								remove 1 iron nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% iron nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Redgrave E-45 Express
	if the name of the player's tool is "<light gray>Redgrave E-45 Express":
		if the 8th line of the lore of the player's tool is not "18":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 18) * -1))
				set {_item} to "%{_cost}% iron nugget" parsed as item
				if the amount of iron nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.2 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.2 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.35 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.35 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "18"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron nugget from the player
						else:
							loop {_cost} times:
								remove 1 iron nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% iron nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Minigun
	if the name of the player's tool is "<light gray>Minigun":
		if the 8th line of the lore of the player's tool is not "200":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 200) * -1))
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 10 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 1.5 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							loop 14 times:
								play sound "entity.experience_orb.pickup" with volume 1 and pitch 0.8 at the player
								wait 0.1 seconds
							wait 1 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 2.2 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							loop 14 times:
								play sound "entity.experience_orb.pickup" with volume 1 and pitch 0.8 at the player
								wait 0.1 seconds
							wait 1.7 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "200"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 gold nugget from the player
						else:
							loop {_cost} times:
								remove 1 gold nugget from the player
						remove 10 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need 10 gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Redgrave Coyote-Alpha
	if the name of the player's tool is "<light gray>Redgrave Coyote-Alpha":
		if the 8th line of the lore of the player's tool is not "5":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 5) * -1) * 2)
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.3 seconds
							loop ({_cost} / 2) times:
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
								wait 0.3 second
							wait 0.3 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.44 second
							loop ({_cost} / 2) times:
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
								wait 0.44 second
							#wait 0.44 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "5"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 gold nugget from the player
						else:
							loop {_cost} times:
								remove 1 gold nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Vettik S-25
	if the name of the player's tool is "<light gray>Vettik S-25":
		if the 8th line of the lore of the player's tool is not "25":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 25) * -1))
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.15 seconds
							loop ({_cost}) times:
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
								wait 0.15 second
							wait 0.15 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.3 second
							loop ({_cost}) times:
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
								wait 0.3 second
							#wait 0.44 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "25"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 gold nugget from the player
						else:
							loop {_cost} times:
								remove 1 gold nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Vettik B-30AS
	if the name of the player's tool is "<light gray>Vettik B-30AS":
		if the 8th line of the lore of the player's tool is not "30":
			clear {firearmRecoilDynamic.%player%::Vettik B-30AS}
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 30) * -1))
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is not 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 1 at the player
							loop 3 times:
								wait 0.15 seconds
								play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							play sound "block.wood.break" with volume 2 and pitch 1 at the player
							wait 0.2 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.05 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 1 at the player
							wait 0.15 seconds
							play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							play sound "block.wood.break" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "30"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron nugget from the player
						else:
							loop {_cost} times:
								remove 1 iron nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Vettik A-10 Enforcer
	if the name of the player's tool is "<light gray>Vettik A-10 Enforcer":
		if the 8th line of the lore of the player's tool is not "10":
			if {reloading.%player%} is not set:
				clear {firearmRecoilDynamic.%player%::Vettik A-10 Enforcer}
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 10) * -1))
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is not 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 1 at the player
							loop 6 times:
								wait 0.15 seconds
								play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 0.8 at the player
							wait 0.1 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.05 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 1 at the player
							loop 3 times:
								wait 0.15 seconds
								play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.1 seconds
							play sound "block.wood.break" with volume 2 and pitch 1 at the player
							wait 0.1 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 0.8 at the player
							wait 0.05 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "10"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron nugget from the player
						else:
							loop {_cost} times:
								remove 1 iron nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Teufort Two-Timer
	if the name of the player's tool is "<light gray>Teufort Two-Timer":
		if the 8th line of the lore of the player's tool is not "2":
			if {reloading.%player%} is not set:
				clear {t_FirearmsCooldown.%player%::Teufort Two-Timer}
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 2) * -1) * 2)
				set {_item} to "%{_cost}% gold nugget" parsed as item
				if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.3 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.3 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.44 second
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.44 second
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "2"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 gold nugget from the player
						else:
							loop {_cost} times:
								remove 1 gold nugget from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% gold nuggets to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Rocket Launcher
	if the name of the player's tool is "<light gray>Rocket Launcher":
		if the 8th line of the lore of the player's tool is not "4":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to (({_clip} - 4) * -1)
				set {t_reloading.%Player%} to true
				#A while loop for reloading allows the player to cancel the reload process by firing.
				while {t_reloading.%player%} is true:
					set {_gunpowder} to false
					set {_firework} to false
					if player has 1 gunpowder:
						set {_gunpowder} to true
					loop all items in the player's inventory:
						if "%type of loop-item%" contains "firework":
							set {_firework} to true
					#Only continue the reloading process if the player has enough ammo. Remember that the Resourceful perk does not remove ammo from the player's inventory when reloading.
					if {_gunpowder} is true:
						if {_firework} is true:
							#Fast Fingers perk
							if {_quick} is 1:
								wait 0.4 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							#Normal Reload
							else:
								wait 0.8 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							remove 1 gunpowder from the player
							remove 1 firework item from the player
							subtract 1 from {_cost}
							if {_cost} is less than 1:
								exit 1 loop
								play sound "ui.button.click" with volume 1 and pitch 1 at the player
						else:
							send "<light red>No fireworks left to reload with!"
							exit 1 loop
							play sound "ui.button.click" with volume 1 and pitch 1 at the player
					else:
						send "<light red>No gunpowder left to reload with!"
						exit 1 loop
						play sound "ui.button.click" with volume 1 and pitch 1 at the player
				wait 0.4 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
				send formatted "<light green>Locked and loaded!"
				clear {t_reloading.%player%}
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Grenade Launcher
	if the name of the player's tool is "<light gray>Grenade Launcher":
		if the 8th line of the lore of the player's tool is not "4":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to (({_clip} - 4) * -1)
				set {t_reloading.%Player%} to true
				#A while loop for reloading allows the player to cancel the reload process by firing.
				while {t_reloading.%player%} is true:
					set {_gunpowder} to false
					set {_firework} to false
					if player has 1 gunpowder:
						set {_gunpowder} to true
					loop all items in the player's inventory:
						if "%type of loop-item%" contains "firework":
							set {_firework} to true
					#Only continue the reloading process if the player has enough ammo. Remember that the Resourceful perk does not remove ammo from the player's inventory when reloading.
					if {_gunpowder} is true:
						if {_firework} is true:
							#Fast Fingers perk
							if {_quick} is 1:
								wait 0.4 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							#Normal Reload
							else:
								wait 0.8 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							remove 1 gunpowder from the player
							remove 1 firework item from the player
							subtract 1 from {_cost}
							if {_cost} is less than 1:
								exit 1 loop
								play sound "ui.button.click" with volume 1 and pitch 1 at the player
						else:
							send "<light red>No fireworks left to reload with!"
							exit 1 loop
							play sound "ui.button.click" with volume 1 and pitch 1 at the player
					else:
						send "<light red>No gunpowder left to reload with!"
						exit 1 loop
						play sound "ui.button.click" with volume 1 and pitch 1 at the player
				wait 0.4 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
				send formatted "<light green>Locked and loaded!"
				clear {t_reloading.%player%}
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Home-Made Heater
	if the name of the player's tool is "<light gray>Home-Made Heater":
		if the 8th line of the lore of the player's tool is not "5":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to (({_clip} - 5) * -1)
				set {t_reloading.%Player%} to true
				#A while loop for reloading allows the player to cancel the reload process by firing.
				while {t_reloading.%player%} is true:
					set {_gunpowder} to false
					set {_firework} to false
					if player has 1 gunpowder:
						set {_gunpowder} to true
					if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
						set {_firework} to true
					#Only continue the reloading process if the player has enough ammo. Remember that the Resourceful perk does not remove ammo from the player's inventory when reloading.
					if {_gunpowder} is true:
						if {_firework} is true:
							#Fast Fingers perk
							if {_quick} is 1:
								wait 0.55 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							#Normal Reload
							else:
								wait 1.1 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							remove 1 gunpowder from the player
							remove 1 gold nugget from the player
							subtract 1 from {_cost}
							if {_cost} is less than 1:
								exit 1 loop
								play sound "ui.button.click" with volume 1 and pitch 1 at the player
						else:
							send "<light red>No gold nuggets left to reload with!"
							exit 1 loop
							play sound "ui.button.click" with volume 1 and pitch 1 at the player
					else:
						send "<light red>No gunpowder left to reload with!"
						exit 1 loop
						play sound "ui.button.click" with volume 1 and pitch 1 at the player
				wait 0.2 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
				send formatted "<light green>Locked and loaded!"
				clear {t_reloading.%player%}
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Hell's Spiral
	if the name of the player's tool is "<light gray>Hell's Spiral":
		if the 8th line of the lore of the player's tool is not "25":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to (({_clip} - 25) * -1)
				set {t_reloading.%Player%} to true
				#A while loop for reloading allows the player to cancel the reload process by firing.
				while {t_reloading.%player%} is true:
					set {_gunpowder} to false
					set {_firework} to false
					if player has 1 gunpowder:
						set {_gunpowder} to true
					if the amount of gold nugget in the player's inventory is more than or equal to {_cost}:
						set {_firework} to true
					#Only continue the reloading process if the player has enough ammo. Remember that the Resourceful perk does not remove ammo from the player's inventory when reloading.
					if {_gunpowder} is true:
						if {_firework} is true:
							#Fast Fingers perk
							if {_quick} is 1:
								wait 0.15 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							#Normal Reload
							else:
								wait 0.3 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							remove 1 gunpowder from the player
							remove 1 gold nugget from the player
							subtract 1 from {_cost}
							if {_cost} is less than 1:
								exit 1 loop
								play sound "ui.button.click" with volume 1 and pitch 1 at the player
						else:
							send "<light red>No gold nuggets left to reload with!"
							exit 1 loop
							play sound "ui.button.click" with volume 1 and pitch 1 at the player
					else:
						send "<light red>No gunpowder left to reload with!"
						exit 1 loop
						play sound "ui.button.click" with volume 1 and pitch 1 at the player
				wait 0.2 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
				send formatted "<light green>Locked and loaded!"
				clear {t_reloading.%player%}
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Redgrave Kalina
	if the name of the player's tool is "<light gray>Redgrave Kalina":
		if the 8th line of the lore of the player's tool is not "10":
			if {reloading.%player%} is not set:
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to (({_clip} - 10) * -1)
				set {t_reloading.%Player%} to true
				#A while loop for reloading allows the player to cancel the reload process by firing.
				while {t_reloading.%player%} is true:
					set {_gunpowder} to false
					set {_firework} to false
					if player has 1 gunpowder:
						set {_gunpowder} to true
					if the amount of iron ingot in the player's inventory is more than or equal to {_cost}:
						set {_firework} to true
					#Only continue the reloading process if the player has enough ammo. Remember that the Resourceful perk does not remove ammo from the player's inventory when reloading.
					if {_gunpowder} is true:
						if {_firework} is true:
							#Fast Fingers perk
							if {_quick} is 1:
								wait 0.4 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							#Normal Reload
							else:
								wait 0.8 second
								add 1 to {_clip}
								set the 8th line of the lore of the player's tool to "%{_clip}%"
								play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							remove 1 gunpowder from the player
							remove 1 iron ingot from the player
							subtract 1 from {_cost}
							if {_cost} is less than 1:
								exit 1 loop
								play sound "ui.button.click" with volume 1 and pitch 1 at the player
						else:
							send "<light red>No iron ingots left to reload with!"
							exit 1 loop
							play sound "ui.button.click" with volume 1 and pitch 1 at the player
					else:
						send "<light red>No gunpowder left to reload with!"
						exit 1 loop
						play sound "ui.button.click" with volume 1 and pitch 1 at the player
				wait 0.2 seconds
				play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
				send formatted "<light green>Locked and loaded!"
				clear {t_reloading.%player%}
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
	#Redgrave Ifrit
	if the name of the player's tool is "<light gray>Redgrave Ifrit":
		if the 8th line of the lore of the player's tool is not "7":
			if {reloading.%player%} is not set:
				clear {firearmRecoilDynamic.%player%::Redgrave Ifrit}
				set {_clip} to the 8th line of the lore of the player's tool parsed as integer
				set {_cost} to ceil((({_clip} - 7) * -1))
				set {_item} to "%{_cost}% iron ingot" parsed as item
				if the amount of iron ingot in the player's inventory is more than or equal to {_cost}:
					if the player has 1 gunpowder:
						set {reloading.%player%} to 1
						if {_quick} is 1:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.2 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.8 at the player
							loop 2 times:
								wait 0.1 seconds
								play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.2 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.2 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						else:
							play sound "block.dispenser.dispense" with volume 2 and pitch 2 at the player
							wait 0.35 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.8 at the player
							loop 3 times:
								wait 0.1 seconds
								play sound "block.wood.hit" with volume 2 and pitch 1 at the player
							wait 0.35 seconds
							play sound "block.dispenser.launch" with volume 2 and pitch 0.5 at the player
							wait 0.35 seconds
							play sound "block.dispenser.dispense" with volume 2 and pitch 1 at the player
						set the 8th line of the lore of the player's tool to "7"
						if {_gunslinger} is 1:
							loop ceil({_cost} / 2) times:
								remove 1 iron ingot from the player
						else:
							loop {_cost} times:
								remove 1 iron ingot from the player
						remove 1 gunpowder from the player
						send formatted "<light green>Locked and loaded!"
						clear {reloading.%player%}
					else:
						send formatted "<light red>You need gunpowder to reload!"
				else:
					send formatted "<light red>You need %{_cost}% iron ingots to reload!"
			else:
				send formatted "<light red>Already reloading!"
		else:
			send formatted "<light red>Already at max clip size!"
						
#Projectile Particles and Battle Forecast	
every 2 ticks:
	loop all players:
		loop all entities in radius 20 of the loop-player:
			if loop-value-2 is not a monster:
				if metadata value "gunType" of the loop-value-2 is "RocketLauncher":
					play 5 (smoke with speed 0) at the loop-value-2
					play 5 (cloud with speed 0) at the loop-value-2
				else if metadata value "gunType" of the loop-value-2 is set:
					play 5 (smoke with speed 0) at the loop-value-2
					play 5 (gold block break with speed 1) at the loop-value-2
				else if metadata value "TomeEff" of the loop-value-2 is set:
					play 5 (firework spark with speed 0) at the loop-value-2
				else if metadata value "SPELL" of the loop-value-2 is 1:
					play 5 (firework spark with speed 0) at the loop-value-2
		#Battle Forecast
		if getEntityStatTotal(loop-player's target,"STR") is more than or equal to 1:
			wipe the loop-player's sidebar
			clear {t_showBattleForecast.%loop-player%}
			set {t_showBattleForecast.%loop-player%} to 1
			set name of sidebar of the loop-player to "<gold>-=Battle Forecast=-"
			set score "STR:" in sidebar of the loop-player to (getEntityStatTotal(loop-player's target,"STR"))
			set score "DEF:" in sidebar of the loop-player to (getEntityStatTotal(loop-player's target,"DEF"))
			set score "SPD:" in sidebar of the loop-player to (getEntityStatTotal(loop-player's target,"SPD"))
			set score "SKL:" in sidebar of the loop-player to (getEntityStatTotal(loop-player's target,"SKL"))
			set score "MAG:" in sidebar of the loop-player to (getEntityStatTotal(loop-player's target,"RES"))
			while {t_showBattleForecast.%loop-player%} is less than 7:
				add 1 to {t_showBattleForecast.%loop-player%}
				wait 1 second
			wipe the loop-player's sidebar
			clear {t_showBattleForecast.%loop-player%}
			
#Firearm recoil cooldown
every tick:
	loop all players:
		if {firearmRecoilDynamic.%loop-player%::Redgrave Ifrit} is set:
			subtract 0.02 from {firearmRecoilDynamic.%loop-player%::Redgrave Ifrit}
			if {firearmRecoilDynamic.%loop-player%::Redgrave Ifrit} is less than or equal to 0:
				clear {firearmRecoilDynamic.%loop-player%::Redgrave Ifrit}
		else if {firearmRecoilDynamic.%loop-player%::Vettik A-10 Enforcer} is set:
			subtract 0.016 from {firearmRecoilDynamic.%loop-player%::Vettik A-10 Enforcer}
			if {firearmRecoilDynamic.%loop-player%::Vettik A-10 Enforcer} is less than or equal to 0:
				clear {firearmRecoilDynamic.%loop-player%::Vettik A-10 Enforcer}
		else if {firearmRecoilDynamic.%loop-player%::Vettik B-30AS} is set:
			subtract 0.009 from {firearmRecoilDynamic.%loop-player%::Vettik B-30AS}
			if {firearmRecoilDynamic.%loop-player%::Vettik B-30AS} is less than or equal to 0:
				clear {firearmRecoilDynamic.%loop-player%::Vettik B-30AS}